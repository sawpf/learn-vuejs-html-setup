const resultKeywordJava = [
  {
      "rendered_body": "\u003ch2 data-sourcepos=\"1:1-1:9\"\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\u003cp data-sourcepos=\"2:1-2:27\"\u003e今回はDjangoを使って\u003c/p\u003e\n\u003cul data-sourcepos=\"3:1-6:0\"\u003e\n\u003cli data-sourcepos=\"3:1-3:44\"\u003eユーザへ招待メールを送信する\u003c/li\u003e\n\u003cli data-sourcepos=\"4:1-4:47\"\u003eトークンが有効であるか確認する\u003c/li\u003e\n\u003cli data-sourcepos=\"5:1-6:0\"\u003e受信した招待メールのトークンを使ってユーザの認証を行う\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"7:1-7:27\"\u003eAPIの作成を行います\u003c/p\u003e\n\u003ch2 data-sourcepos=\"9:1-9:9\"\u003e\n\u003cspan id=\"前提\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提\u003c/h2\u003e\n\u003cul data-sourcepos=\"10:1-11:0\"\u003e\n\u003cli data-sourcepos=\"10:1-11:0\"\u003eDjangoのプロジェクトを作成済み\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 data-sourcepos=\"12:1-12:27\"\u003e\n\u003cspan id=\"ディレクトリ構成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eディレクトリ構成\u003c/h2\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"13:1-34:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etree\n・\n├── application\n│   ├── __init__.py\n│   ├── admin.py\n│   ├── apps.py\n│   ├── emails.py\n│   ├── fixtures\n│   │   └── fixture.json\n│   ├── migrations\n│   │   ├── 0001_initial.py\n│   │   └── __init__.py\n│   ├── models.py\n│   ├── templates\n│   │   ├── invite_user_email.html\n│   │   └── invite_user_email.txt\n│   ├── urls.py\n│   └── views.py\n└── project\n    └── settings.py\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch2 data-sourcepos=\"36:1-36:21\"\u003e\n\u003cspan id=\"メールの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%BC%E3%83%AB%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメールの設定\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"37:1-37:24\"\u003e\n\u003cspan id=\"mailcatcherの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mailcatcher%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMailCatcherの設定\u003c/h3\u003e\n\u003cp data-sourcepos=\"38:1-39:54\"\u003eMailCatcherという仮想のSMTPサーバの設定を行います\u003cbr\u003e\n詳細は以下の記事を参考にしてください\u003c/p\u003e\n\u003cp data-sourcepos=\"41:1-41:52\"\u003e\u003ciframe id=\"qiita-embed-content__6e24ee5da6ea4dc9fdd84151d8287703\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__6e24ee5da6ea4dc9fdd84151d8287703\" data-content=\"https%3A%2F%2Fqiita.com%2Fshun198%2Fitems%2F35c97c95079ecbe80e9d\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"yaml\" data-sourcepos=\"43:1-97:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003edocker-compose.yml\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"na\"\u003eversion\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e3.9'\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003eservices\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003edb\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003edb\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ebuild\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003econtext\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e.\u003c/span\u003e\n      \u003cspan class=\"na\"\u003edockerfile\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003econtainers/postgres/Dockerfile\u003c/span\u003e\n    \u003cspan class=\"na\"\u003evolumes\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003edb_data:/var/lib/postgresql/data\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ehealthcheck\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003etest\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003epg_isready -U \"${POSTGRES_USER:-postgres}\" || exit \u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\n      \u003cspan class=\"na\"\u003einterval\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e10s\u003c/span\u003e\n      \u003cspan class=\"na\"\u003etimeout\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e5s\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eretries\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003ePOSTGRES_NAME\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003ePOSTGRES_USER\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e5432:5432'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# デバッグ用\u003c/span\u003e\n\n  \u003cspan class=\"na\"\u003eapp\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eapp\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ebuild\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003econtext\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e.\u003c/span\u003e\n      \u003cspan class=\"na\"\u003edockerfile\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003econtainers/django/Dockerfile\u003c/span\u003e\n    \u003cspan class=\"na\"\u003evolumes\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003e./backend:/code\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003e./static:/static\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e8000:8000'\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e# デバッグ用ポート\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e8080:8080'\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ecommand\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003esh -c \"/usr/local/bin/entrypoint.sh\"\u003c/span\u003e\n    \u003cspan class=\"na\"\u003estdin_open\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"na\"\u003etty\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eenv_file\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s\"\u003e.env\u003c/span\u003e\n    \u003cspan class=\"na\"\u003edepends_on\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"na\"\u003edb\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"na\"\u003econdition\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eservice_healthy\u003c/span\u003e\n\n  \u003cspan class=\"na\"\u003email\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"na\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003email\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eimage\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003eschickling/mailcatcher\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eports\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e1080:1080'\u003c/span\u003e\n      \u003cspan class=\"pi\"\u003e-\u003c/span\u003e \u003cspan class=\"s1\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e1025:1025'\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003evolumes\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003edb_data\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"na\"\u003estatic\u003c/span\u003e\u003cspan class=\"pi\"\u003e:\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch2 data-sourcepos=\"99:1-99:18\"\u003e\n\u003cspan id=\"djangoの設定\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#django%E3%81%AE%E8%A8%AD%E5%AE%9A\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDjangoの設定\u003c/h2\u003e\n\u003cp data-sourcepos=\"100:1-100:55\"\u003esettings.pyにMailCatcherとSESの設定を行います\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"102:1-116:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003esettings.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eDEBUG\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# メールの設定\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eEMAIL_HOST\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003email\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEMAIL_HOST_USER\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEMAIL_HOST_PASSWORD\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEMAIL_PORT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1025\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEMAIL_USE_TLS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# SESの設定\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eEMAIL_BACKEND\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003edjango_ses.SESBackend\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAWS_DEFAULT_REGION_NAME\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenviron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eAWS_DEFAULT_REGION_NAME\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAWS_SES_REGION_ENDPOINT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenviron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eAWS_SES_REGION_ENDPOINT\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDEFAULT_FROM_EMAIL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenviron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eDEFAULT_FROM_EMAIL\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"118:1-118:64\"\u003e.envファイルに必要な環境変数の設定を行います\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"119:1-124:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e.env\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eAWS_DEFAULT_REGION_NAME=ap-northeast-1\nAWS_SES_REGION_ENDPOINT=email.ap-northeast-1.amazonaws.com\nDEFAULT_FROM_EMAIL=example.co.jp\nBASE_URL=http://localhost\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch2 data-sourcepos=\"126:1-126:27\"\u003e\n\u003cspan id=\"ユーザの招待機能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%AE%E6%8B%9B%E5%BE%85%E6%A9%9F%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eユーザの招待機能\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"127:1-127:9\"\u003e\n\u003cspan id=\"model\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eModel\u003c/h3\u003e\n\u003cul data-sourcepos=\"128:1-130:0\"\u003e\n\u003cli data-sourcepos=\"128:1-128:23\"\u003eシステムユーザ\u003c/li\u003e\n\u003cli data-sourcepos=\"129:1-130:0\"\u003eシステムユーザの招待用トークンを管理する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"131:1-132:86\"\u003e用のModelを作成します\u003cbr\u003e\nシステムユーザのModelの詳細は以下の記事を参考にしてください\u003c/p\u003e\n\u003cp data-sourcepos=\"134:1-134:52\"\u003e\u003ciframe id=\"qiita-embed-content__1c3033454d56bf9d1897c31845cfd0f4\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__1c3033454d56bf9d1897c31845cfd0f4\" data-content=\"https%3A%2F%2Fqiita.com%2Fshun198%2Fitems%2F1e97889942f5da3bec1e\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"136:1-254:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003emodels.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003euuid\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.contrib.auth.models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eAbstractUser\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.contrib.auth.validators\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUnicodeUsernameValidator\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.core.validators\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eRegexValidator\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.db\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eAbstractUser\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eusername_validator\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eUnicodeUsernameValidator\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIntegerChoices\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザのロール\n\n        Args:\n            MANAGEMENT(0): 管理者\n            GENERAL(1):    一般\n            PART_TIME(2):  アルバイト\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eMANAGEMENT\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eGENERAL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ePART_TIME\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# 不要なフィールドはNoneにすることができる\n\u003c/span\u003e    \u003cspan class=\"n\"\u003efirst_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elast_name\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edate_joined\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n    \u003cspan class=\"n\"\u003egroups\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003eid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eUUIDField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eprimary_key\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edefault\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euuid\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euuid4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eeditable\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザID\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemployee_number\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eunique\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003evalidators\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nc\"\u003eRegexValidator\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sa\"\u003er\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e^[0-9]{8}$\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)],\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員番号\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eusername\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e150\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eunique\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003evalidators\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eusername_validator\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザ名\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eEmailField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e254\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eunique\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eメールアドレス\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003erole\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003ePositiveIntegerField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003echoices\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003echoices\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edefault\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePART_TIME\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザのロール\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecreated_at\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eDateTimeField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eauto_now_add\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e作成日\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eupdated_at\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eDateTimeField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eauto_now\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e更新日\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eis_verified\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eBooleanField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edefault\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e有効化有無\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eUSERNAME_FIELD\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eREQUIRED_FIELDS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemail\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eusername\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMeta\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eordering\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_table\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eUser\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_table_comment\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e__str__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eusername\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModel\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員招待用テーブルに対応するモデルクラス\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"nb\"\u003eid\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eUUIDField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eprimary_key\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edefault\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euuid\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euuid4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eeditable\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザID\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eパスワード設定メールURL用トークン\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eDateTimeField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003enull\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edefault\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e有効期限\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecreated_at\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eDateTimeField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eauto_now_add\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e作成日時\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eForeignKey\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eon_delete\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003emodels\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePROTECT\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erelated_name\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003euser_invitation\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_comment\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員テーブル外部キー\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMeta\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_table\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003euser_password_setting\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n        \u003cspan class=\"n\"\u003edb_table_comment\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員パスワード再設定\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch3 data-sourcepos=\"256:1-256:14\"\u003e\n\u003cspan id=\"serializer\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#serializer\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eSerializer\u003c/h3\u003e\n\u003cul data-sourcepos=\"257:1-259:0\"\u003e\n\u003cli data-sourcepos=\"257:1-257:11\"\u003e招待用\u003c/li\u003e\n\u003cli data-sourcepos=\"258:1-259:0\"\u003eトークン認証とパスワード設定用\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"260:1-264:52\"\u003eのSerializerを作成します\u003cbr\u003e\nSerializerのvalidateメソッドを作成し、新規パスワードと確認用パスワードが一致するか確認し、\u003cbr\u003e\nもし一致してなかったらValidationErrorをraiseします\u003cbr\u003e\nまた、Djangoのvalidate_passwordメソッドを使って新規パスワードのバリデーションを行います\u003cbr\u003e\n独自でValidationを設定していなかったら\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"265:1-267:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eget_default_password_validators()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"268:1-268:102\"\u003eメソッドからDjangoのデフォルトのパスワードのバリデーションを使用します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"270:1-318:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eserializers.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eapplication.models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.contrib.auth.password_validation\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003evalidate_password\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eModelSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザ用シリアライザ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMeta\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003emodel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\n        \u003cspan class=\"n\"\u003efields\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eid\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eusername\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemail\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003erole\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eread_only_fields\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eid\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ecreated_at\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eupdated_at\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eInviteUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザ招待用シリアライザ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eemployee_number\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emin_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員番号\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員指氏名\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eEmailField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e254\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e社員メールアドレス\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eVerifyUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eシステムユーザ認証用シリアライザ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eパスワード登録用メールURL用トークン\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003enew_password\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規パスワード\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003econfirm_password\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規パスワード再確認\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003evalidate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003enew_password\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003econfirm_password\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規パスワードと確認パスワードが違います\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003evalidate_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003enew_password\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCheckTokenSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eトークンが有効であるか確認するSerializer\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eserializers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eCharField\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emax_length\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eトークン\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"320:1-338:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003edjango/contrib/auth/password_validation.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003evalidate_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epassword_validators\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e\n    Validate that the password meets all validator requirements.\n\n    If the password is valid, return ``None``.\n    If the password is invalid, raise ValidationError with all error messages.\n    \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eerrors\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003epassword_validators\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003epassword_validators\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_default_password_validators\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003evalidator\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003epassword_validators\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003evalidator\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003evalidate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eValidationError\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"nc\"\u003eValidationError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch3 data-sourcepos=\"340:1-340:9\"\u003e\n\u003cspan id=\"views\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#views\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eViews\u003c/h3\u003e\n\u003cul data-sourcepos=\"341:1-343:0\"\u003e\n\u003cli data-sourcepos=\"341:1-341:33\"\u003einvite_user(ユーザの招待)\u003c/li\u003e\n\u003cli data-sourcepos=\"342:1-343:0\"\u003everify_user(ユーザの認証)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"344:1-344:27\"\u003e用のAPIを作成します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"346:1-513:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eviews.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esecrets\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elogging\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edatetime\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.contrib.auth.hashers\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003emake_password\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.db\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eDatabaseError\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etransaction\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.http\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eJsonResponse\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.utils\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.utils.crypto\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eget_random_string\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework.decorators\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eaction\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework.permissions\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eAllowAny\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework.viewsets\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eModelViewSet\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eapplication.emails\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003esend_invitation_email\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eapplication.models\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eapplication.serializers\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eVerifyUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eInviteUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUserSerializer\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUserViewSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eModelViewSet\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003equeryset\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eall\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epermission_classes\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eAllowAny\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003elogger\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003elogging\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetLogger\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e__name__\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_serializer_class\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ematch\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecase\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003einvite_user\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eInviteUserSerializer\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecase\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003everify_user\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eVerifyUserSerializer\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecase\u003c/span\u003e \u003cspan class=\"n\"\u003e_\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eUserSerializer\u003c/span\u003e\n\n    \u003cspan class=\"nd\"\u003e@action\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edetail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ePOST\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003einvite_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e指定したメールアドレス宛へユーザの招待メールを送る\n\n        Args:\n            request: リクエスト\n\n        Returns:\n            HttpResponse\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e# Userの新規登録と招待用トークンを作成する\n\u003c/span\u003e        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_serializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eis_valid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_exception\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003etransaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eatomic\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eusername\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ename\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\n                        \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nf\"\u003emake_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_random_string\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e16\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemail\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esecrets\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoken_urlsafe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nf\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edays\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenviron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eBASE_URL\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e# 初回登録用のURLへ遷移\n\u003c/span\u003e                \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e/verify-user/\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003esend_invitation_email\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e招待メールを送信しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_200_OK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eDatabaseError\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザの登録に失敗しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_400_BAD_REQUEST\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\n    \u003cspan class=\"nd\"\u003e@action\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edetail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epost\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003everify_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規ユーザを認証する\n\n        Args:\n            request (HttpRequest): HttpRequestオブジェクト\n\n        Returns:\n            Union[\n                HttpResponse,\n                JsonResponse\n            ]\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_serializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eis_valid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_exception\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003etoken\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDoesNotExist\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e無効なURLです\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_404_NOT_FOUND\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n        \u003cspan class=\"nf\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n            \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e):\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eこちらのURLは有効期限切れです\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_404_NOT_FOUND\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003etransaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eatomic\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_verified\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eset_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003enew_password\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eDatabaseError\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003elogging\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規ユーザの認証に失敗しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_400_BAD_REQUEST\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規ユーザの認証に成功しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_200_OK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\n    \u003cspan class=\"nd\"\u003e@action\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edetail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epost\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003echeck_invitation_token\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_serializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eis_valid\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003echeck\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003echeck\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_check_invitation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003etoken\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003echeck\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003echeck\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_check_invitation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザ招待用トークンを認証する\n\n        Args:\n            token : ユーザ認証用トークン\n\n        Returns:\n            Union[\n                Invitationオブジェクト,\n                None\n            ]\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elocaltime\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ow\"\u003eor\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_used\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"515:1-515:34\"\u003e1つずつ解説していきます\u003c/p\u003e\n\u003ch4 data-sourcepos=\"517:1-517:23\"\u003e\n\u003cspan id=\"ユーザの招待\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%AE%E6%8B%9B%E5%BE%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eユーザの招待\u003c/h4\u003e\n\u003cp data-sourcepos=\"518:1-519:30\"\u003eSerializerを使ったバリデーションに成功した後、\u003cbr\u003e\nユーザを招待する際に\u003c/p\u003e\n\u003cul data-sourcepos=\"520:1-522:0\"\u003e\n\u003cli data-sourcepos=\"520:1-520:6\"\u003eUser\u003c/li\u003e\n\u003cli data-sourcepos=\"521:1-522:0\"\u003eUserInvitation\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"523:1-525:91\"\u003eを作成します\u003cbr\u003e\n途中で処理が失敗してもロールバックができるよう、transaction.atomic()を使ってトランザクション処理を行います\u003cbr\u003e\nUserInvitation用のModelを作成する際にトークンの有効期限を24hとします\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"526:1-543:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e            \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003etransaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eatomic\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eusername\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ename\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\n                        \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemployee_number\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n                    \u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003epassword\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nf\"\u003emake_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_random_string\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e16\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemail\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esecrets\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoken_urlsafe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nf\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edays\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cul data-sourcepos=\"545:1-547:0\"\u003e\n\u003cli data-sourcepos=\"545:1-545:6\"\u003eUser\u003c/li\u003e\n\u003cli data-sourcepos=\"546:1-547:0\"\u003eUserInvitation\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"548:1-551:90\"\u003eのデータの作成に成功したらメールを送信します\u003cbr\u003e\nBASE_URLに今回はlocalhostを指定していますが本番環境ではドメインを指定します\u003cbr\u003e\nメール内に招待用のurlを記載し、今回はMailCatcherへ送信します\u003cbr\u003e\n下記のurlのパスはフロントエンドと相談して決める必要があります\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"553:1-565:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e                \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eenviron\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eBASE_URL\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"c1\"\u003e# 初回登録用のURLへ遷移\n\u003c/span\u003e                \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e/verify-user/\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\n                \u003cspan class=\"nf\"\u003esend_invitation_email\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e招待メールを送信しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_200_OK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch4 data-sourcepos=\"567:1-567:41\"\u003e\n\u003cspan id=\"トークンの有効期限の確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%88%E3%83%BC%E3%82%AF%E3%83%B3%E3%81%AE%E6%9C%89%E5%8A%B9%E6%9C%9F%E9%99%90%E3%81%AE%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eトークンの有効期限の確認\u003c/h4\u003e\n\u003cp data-sourcepos=\"568:1-570:18\"\u003eメール内の招待用URLへアクセスする前にトークンが有効かどうか確認するAPIを作成します\u003cbr\u003e\nトークンの有効期限、すでに使用されているかを確認し、\u003cbr\u003e\n有効であれば\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"571:1-573:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e{\"check\": True}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"574:1-574:18\"\u003e無効であれば\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"575:1-577:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e{\"check\": False}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"578:1-578:15\"\u003eを返します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"580:1-612:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    \u003cspan class=\"nd\"\u003e@action\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edetail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epost\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003echeck_invitation_token\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget_serializer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eis_valid\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003echeck\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003echeck\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003e_check_invitation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003etoken\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003echeck\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003echeck\u003c/span\u003e\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_check_invitation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザ招待用トークンを認証する\n\n        Args:\n            token : ユーザ認証用トークン\n\n        Returns:\n            Union[\n                Invitationオブジェクト,\n                None\n            ]\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elocaltime\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"ow\"\u003eor\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_used\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003einvitation\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch4 data-sourcepos=\"614:1-614:23\"\u003e\n\u003cspan id=\"ユーザの認証\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A6%E3%83%BC%E3%82%B6%E3%81%AE%E8%AA%8D%E8%A8%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eユーザの認証\u003c/h4\u003e\n\u003cp data-sourcepos=\"615:1-620:102\"\u003eメールに添付されたurlへアクセスする際にフロント側からトークンの値を受け取ります\u003cbr\u003e\nSerializerを使ったバリデーションに成功した後、\u003cbr\u003e\nユーザを認証する際にトークンが存在するか確認し、なければ404を返します\u003cbr\u003e\nトークンの有効期限用のAPIを作成したので不要かと思われますが\u003cbr\u003e\n例えば有効期限ギリギリにアクセスし、有効期限が過ぎてから認証しようとしてしまうことなど、\u003cbr\u003e\n有効期限を確認するAPIでは検知できない不備を防ぐために記載しております\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"622:1-641:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003etoken\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDoesNotExist\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e無効なURLです\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_404_NOT_FOUND\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n        \u003cspan class=\"nf\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n            \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e):\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eこちらのURLは有効期限切れです\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_404_NOT_FOUND\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"643:1-643:173\"\u003eトークンが有効であることを確認した後、Userテーブル内に新しいパスワードを設定し、テーブル内の有効化フラグをTrueにします\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"645:1-662:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003etransaction\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eatomic\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euser_invitation_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_verified\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eset_password\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eserializer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003evalidated_data\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003enew_password\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n                \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eDatabaseError\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemergency_logger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ee\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規ユーザの認証に失敗しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_400_BAD_REQUEST\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e新規ユーザの認証に成功しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_200_OK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch2 data-sourcepos=\"664:1-664:24\"\u003e\n\u003cspan id=\"メール送信機能\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A1%E3%83%BC%E3%83%AB%E9%80%81%E4%BF%A1%E6%A9%9F%E8%83%BD\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eメール送信機能\u003c/h2\u003e\n\u003cp data-sourcepos=\"665:1-666:161\"\u003eメール送信機能を実装します\u003cbr\u003e\nメール送信の際はEmailMultiAlternativesクラスを使ってhtmlとtxtの両方のバージョンのメールを送信できるように設定できます\u003c/p\u003e\n\u003cp data-sourcepos=\"668:1-668:51\"\u003e\u003ciframe id=\"qiita-embed-content__060cbf46ec9fa80d74439830facdae83\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__060cbf46ec9fa80d74439830facdae83\" data-content=\"https%3A%2F%2Fdocs.djangoproject.com%2Fen%2F4.2%2Ftopics%2Femail%2F\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"670:1-694:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eemails.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.core.mail\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eEmailMultiAlternatives\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.template.loader\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003erender_to_string\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003esend_invitation_email\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplaintext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003erender_to_string\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003einvite_user_email.txt\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eemail\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eurl\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003emsg\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eEmailMultiAlternatives\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esubject\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eアカウント登録のお知らせ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebody\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eplaintext\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003efrom_email\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eto\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# 送信\n\u003c/span\u003e    \u003cspan class=\"n\"\u003emsg\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esend\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"696:1-696:54\"\u003eメールの本文は以下の通りurlを入れます\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"697:1-701:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003etemplates/invite_user_email.txt\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e下記URLへ24時間以内にアクセスしてアカウントの本登録をお願いします。\n▼アカウント認証URL\n{{ url }}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"703:1-711:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003etemplates/invite_user_email.html\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nt\"\u003e\u0026lt;pre\u0026gt;\u003c/span\u003e\n\n下記URLへ24時間以内にアクセスしてアカウントの本登録をお願いします。\n▼アカウント認証URL\n\u003cspan class=\"nt\"\u003e\u0026lt;a\u003c/span\u003e \u003cspan class=\"na\"\u003ehref=\u003c/span\u003e\u003cspan class=\"s\"\u003e{{url}}\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e{{ url }}\u003cspan class=\"nt\"\u003e\u0026lt;/a\u0026gt;\u003c/span\u003e\n    \n\u003cspan class=\"nt\"\u003e\u0026lt;/pre\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch3 data-sourcepos=\"713:1-713:11\"\u003e\n\u003cspan id=\"urlspy\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#urlspy\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eurls.py\u003c/h3\u003e\n\u003cp data-sourcepos=\"714:1-714:30\"\u003eAPIのパスを作成します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"716:1-728:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eurls.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003edjango.urls\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003einclude\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epath\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003erest_framework_nested\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003erouters\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eapplication.views\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eUserViewSet\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003erouter\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erouters\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eDefaultRouter\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003erouter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eregister\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sa\"\u003er\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eusers\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eUserViewSet\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebasename\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003euser\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eurlpatterns\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sa\"\u003er\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einclude\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erouter\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eurls\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch2 data-sourcepos=\"730:1-730:48\"\u003e\n\u003cspan id=\"実際にユーザを招待してみよう\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%83%A6%E3%83%BC%E3%82%B6%E3%82%92%E6%8B%9B%E5%BE%85%E3%81%97%E3%81%A6%E3%81%BF%E3%82%88%E3%81%86\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実際にユーザを招待してみよう！\u003c/h2\u003e\n\u003cul data-sourcepos=\"731:1-734:0\"\u003e\n\u003cli data-sourcepos=\"731:1-731:14\"\u003e社員番号\u003c/li\u003e\n\u003cli data-sourcepos=\"732:1-732:14\"\u003eユーザ名\u003c/li\u003e\n\u003cli data-sourcepos=\"733:1-734:0\"\u003eメールアドレス\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"735:1-735:63\"\u003eを入力して/api/users/invite_user/へrequestを送ります\u003c/p\u003e\n\u003cp data-sourcepos=\"737:1-737:162\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/feb5764d782ae87616918a42f29110c2605f4b59/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3632353938302f38656131626539372d623265322d383161312d333361632d6136363662303831653364642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F8ea1be97-b2e2-81a1-33ac-a666b081e3dd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d6943759076a8415fd660a77341b6cdd\" alt=\"スクリーンショット 2023-10-28 9.41.26.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/8ea1be97-b2e2-81a1-33ac-a666b081e3dd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F8ea1be97-b2e2-81a1-33ac-a666b081e3dd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2f86d311571d6a36390688909a317088 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"739:1-739:59\"\u003e以下のようなresponseが返ってきたら成功です\u003c/p\u003e\n\u003cp data-sourcepos=\"741:1-741:162\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/5014cd1cdc225782265cb7fe6add5011c38dccc4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3632353938302f33376631383234312d353036352d323038352d623635332d3238646661653939633237352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F37f18241-5065-2085-b653-28dfae99c275.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d6793c1c4e032925e45f4fd24bfbd9ce\" alt=\"スクリーンショット 2023-10-28 9.54.11.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/37f18241-5065-2085-b653-28dfae99c275.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F37f18241-5065-2085-b653-28dfae99c275.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2a63ee2934b1b4c0aa9fcc6549d44553 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"743:1-744:162\"\u003eMailCatcher(127.0.0.1:1080)へアクセスすると以下のようにメールを受信できたことを確認したら成功です\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/a15ca4376d6c85ec5a53c122bb165fe70883eb86/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3632353938302f63333866366131352d356532322d343933302d313932372d3665616530303961323735612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2Fc38f6a15-5e22-4930-1927-6eae009a275a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7698f89b70c56da98d55c60fb5376af4\" alt=\"スクリーンショット 2023-10-28 9.41.04.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/c38f6a15-5e22-4930-1927-6eae009a275a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2Fc38f6a15-5e22-4930-1927-6eae009a275a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ecbc8c00f5ace26481455ad45b1b6194 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul data-sourcepos=\"746:1-749:0\"\u003e\n\u003cli data-sourcepos=\"746:1-746:47\"\u003e先ほど受信したメールのトークン\u003c/li\u003e\n\u003cli data-sourcepos=\"747:1-747:23\"\u003e新規パスワード\u003c/li\u003e\n\u003cli data-sourcepos=\"748:1-749:0\"\u003e確認用パスワード\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"750:1-750:63\"\u003eを入力して/api/users/verify_user/へrequestを送ります\u003c/p\u003e\n\u003cp data-sourcepos=\"752:1-752:162\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/030e043a63d6b51d2ce9ea6fb2b8254677e8d8c5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3632353938302f31626432376234352d363562372d613362662d386562302d3030353935316661383535312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F1bd27b45-65b7-a3bf-8eb0-005951fa8551.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=19f9f210213801560c3204074fdd26df\" alt=\"スクリーンショット 2023-10-28 9.44.53.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/1bd27b45-65b7-a3bf-8eb0-005951fa8551.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F1bd27b45-65b7-a3bf-8eb0-005951fa8551.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b8474515514ba4b4ef048696f4382e47 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"754:1-755:162\"\u003e以下のようなresponseが返ってきたら成功です\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/8c6d65406152de8c30649fa4c14a236d40fdf7ff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3632353938302f34343365363037372d313032312d333230612d323765332d6632333035333863656539362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F443e6077-1021-320a-27e3-f230538cee96.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0b427487ed895211504cb402db64cd7c\" alt=\"スクリーンショット 2023-10-28 9.54.24.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/443e6077-1021-320a-27e3-f230538cee96.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F625980%2F443e6077-1021-320a-27e3-f230538cee96.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0d255131e3744bd180ef465ea981d1b2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 data-sourcepos=\"757:1-757:39\"\u003e\n\u003cspan id=\"招待メールを再送したい時\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%8B%9B%E5%BE%85%E3%83%A1%E3%83%BC%E3%83%AB%E3%82%92%E5%86%8D%E9%80%81%E3%81%97%E3%81%9F%E3%81%84%E6%99%82\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e招待メールを再送したい時\u003c/h2\u003e\n\u003cp data-sourcepos=\"758:1-759:46\"\u003e再送したい時は以下のように招待用APIと分けて作成するのが一般的です\u003cbr\u003e\n今回はSerializerを使わずに行います\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"761:1-805:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eviews.py\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e    \u003cspan class=\"nd\"\u003e@action\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edetail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emethods\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epost\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ereinvite_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epk\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\u003cspan class=\"s\"\u003eユーザを再招待する\n\n        Args:\n            request (HttpRequest): HttpRequestオブジェクト\n\n        Returns:\n            Union[\n                HttpResponse,\n                JsonResponse\n            ]\n        \u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\"\"\u003c/span\u003e\n        \u003cspan class=\"k\"\u003etry\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epk\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003epk\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eexcept\u003c/span\u003e \u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eDoesNotExist\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e指定されたユーザは見つかりませんでした\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_404_NOT_FOUND\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eis_verified\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n                \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e指定されたユーザは認証済です\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n                \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_400_BAD_REQUEST\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003etoken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esecrets\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoken_urlsafe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etimezone\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nf\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edays\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eUserInvitation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eobjects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eexpiry\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edjango_settings\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBASE_URL\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e# 初回登録用のURLへ遷移\n\u003c/span\u003e        \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebase_url\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e/verify-user/\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etoken\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003esend_invitation_email\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nc\"\u003eJsonResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003emsg\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e招待メールを再送信しました\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e\n            \u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTP_200_OK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"807:1-807:12\"\u003e以上です\u003c/p\u003e\n",
      "body": "## 概要\n今回はDjangoを使って\n- ユーザへ招待メールを送信する\n- トークンが有効であるか確認する\n- 受信した招待メールのトークンを使ってユーザの認証を行う\n\nAPIの作成を行います\n\n## 前提\n- Djangoのプロジェクトを作成済み\n\n## ディレクトリ構成\n```\ntree\n・\n├── application\n│   ├── __init__.py\n│   ├── admin.py\n│   ├── apps.py\n│   ├── emails.py\n│   ├── fixtures\n│   │   └── fixture.json\n│   ├── migrations\n│   │   ├── 0001_initial.py\n│   │   └── __init__.py\n│   ├── models.py\n│   ├── templates\n│   │   ├── invite_user_email.html\n│   │   └── invite_user_email.txt\n│   ├── urls.py\n│   └── views.py\n└── project\n    └── settings.py\n```\n\n## メールの設定\n### MailCatcherの設定\nMailCatcherという仮想のSMTPサーバの設定を行います\n詳細は以下の記事を参考にしてください\n\nhttps://qiita.com/shun198/items/35c97c95079ecbe80e9d\n\n```docker-compose.yml\nversion: '3.9'\n\nservices:\n  db:\n    container_name: db\n    build:\n      context: .\n      dockerfile: containers/postgres/Dockerfile\n    volumes:\n      - db_data:/var/lib/postgresql/data\n    healthcheck:\n      test: pg_isready -U \"${POSTGRES_USER:-postgres}\" || exit 1\n      interval: 10s\n      timeout: 5s\n      retries: 5\n    environment:\n      - POSTGRES_NAME\n      - POSTGRES_USER\n      - POSTGRES_PASSWORD\n    ports:\n      - '5432:5432' # デバッグ用\n\n  app:\n    container_name: app\n    build:\n      context: .\n      dockerfile: containers/django/Dockerfile\n    volumes:\n      - ./backend:/code\n      - ./static:/static\n    ports:\n      - '8000:8000'\n      # デバッグ用ポート\n      - '8080:8080'\n    command: sh -c \"/usr/local/bin/entrypoint.sh\"\n    stdin_open: true\n    tty: true\n    env_file:\n      - .env\n    depends_on:\n      db:\n        condition: service_healthy\n\n  mail:\n    container_name: mail\n    image: schickling/mailcatcher\n    ports:\n      - '1080:1080'\n      - '1025:1025'\n\nvolumes:\n  db_data:\n  static:\n```\n\n## Djangoの設定\nsettings.pyにMailCatcherとSESの設定を行います\n\n```settings.py\nif DEBUG:\n    # メールの設定\n    EMAIL_HOST = \"mail\"\n    EMAIL_HOST_USER = \"\"\n    EMAIL_HOST_PASSWORD = \"\"\n    EMAIL_PORT = 1025\n    EMAIL_USE_TLS = False\nelse:\n    # SESの設定\n    EMAIL_BACKEND = \"django_ses.SESBackend\"\n    AWS_DEFAULT_REGION_NAME = os.environ.get(\"AWS_DEFAULT_REGION_NAME\")\n    AWS_SES_REGION_ENDPOINT = os.environ.get(\"AWS_SES_REGION_ENDPOINT\")\n    DEFAULT_FROM_EMAIL = os.environ.get(\"DEFAULT_FROM_EMAIL\")\n```\n\n.envファイルに必要な環境変数の設定を行います\n```.env\nAWS_DEFAULT_REGION_NAME=ap-northeast-1\nAWS_SES_REGION_ENDPOINT=email.ap-northeast-1.amazonaws.com\nDEFAULT_FROM_EMAIL=example.co.jp\nBASE_URL=http://localhost\n```\n\n## ユーザの招待機能\n### Model\n- システムユーザ\n- システムユーザの招待用トークンを管理する\n\n用のModelを作成します\nシステムユーザのModelの詳細は以下の記事を参考にしてください\n\nhttps://qiita.com/shun198/items/1e97889942f5da3bec1e\n\n```models.py\nimport uuid\n\nfrom django.contrib.auth.models import AbstractUser\nfrom django.contrib.auth.validators import UnicodeUsernameValidator\nfrom django.core.validators import RegexValidator\nfrom django.db import models\n\n\nclass User(AbstractUser):\n    \"\"\"システムユーザ\"\"\"\n\n    username_validator = UnicodeUsernameValidator()\n\n    class Role(models.IntegerChoices):\n        \"\"\"システムユーザのロール\n\n        Args:\n            MANAGEMENT(0): 管理者\n            GENERAL(1):    一般\n            PART_TIME(2):  アルバイト\n        \"\"\"\n\n        MANAGEMENT = 0\n        GENERAL = 1\n        PART_TIME = 2\n\n    # 不要なフィールドはNoneにすることができる\n    first_name = None\n    last_name = None\n    date_joined = None\n    groups = None\n    id = models.UUIDField(\n        primary_key=True,\n        default=uuid.uuid4,\n        editable=False,\n        db_comment=\"システムユーザID\",\n    )\n    employee_number = models.CharField(\n        unique=True,\n        validators=[RegexValidator(r\"^[0-9]{8}$\")],\n        max_length=8,\n        db_comment=\"社員番号\",\n    )\n    username = models.CharField(\n        max_length=150,\n        unique=True,\n        validators=[username_validator],\n        db_comment=\"ユーザ名\",\n    )\n    email = models.EmailField(\n        max_length=254,\n        unique=True,\n        db_comment=\"メールアドレス\",\n    )\n    role = models.PositiveIntegerField(\n        choices=Role.choices,\n        default=Role.PART_TIME,\n        db_comment=\"システムユーザのロール\",\n    )\n    created_at = models.DateTimeField(\n        auto_now_add=True,\n        db_comment=\"作成日\",\n    )\n    updated_at = models.DateTimeField(\n        auto_now=True,\n        db_comment=\"更新日\",\n    )\n    is_verified = models.BooleanField(\n        default=False,\n        db_comment=\"有効化有無\",\n    )\n\n    USERNAME_FIELD = \"employee_number\"\n    REQUIRED_FIELDS = [\"email\", \"username\"]\n\n    class Meta:\n        ordering = [\"employee_number\"]\n        db_table = \"User\"\n        db_table_comment = \"システムユーザ\"\n\n    def __str__(self):\n        return self.username\n\n\nclass UserInvitation(models.Model):\n    \"\"\"社員招待用テーブルに対応するモデルクラス\"\"\"\n\n    id = models.UUIDField(\n        primary_key=True,\n        default=uuid.uuid4,\n        editable=False,\n        db_comment=\"システムユーザID\",\n    )\n    token = models.CharField(\n        max_length=255,\n        db_comment=\"パスワード設定メールURL用トークン\",\n    )\n    expiry = models.DateTimeField(\n        null=True,\n        default=None,\n        db_comment=\"有効期限\",\n    )\n    created_at = models.DateTimeField(\n        auto_now_add=True,\n        db_comment=\"作成日時\",\n    )\n    user = models.ForeignKey(\n        User,\n        on_delete=models.PROTECT,\n        related_name=\"user_invitation\",\n        db_comment=\"社員テーブル外部キー\",\n    )\n\n    class Meta:\n        db_table = \"user_password_setting\"\n        db_table_comment = \"社員パスワード再設定\"\n\n```\n\n### Serializer\n- 招待用\n- トークン認証とパスワード設定用\n\nのSerializerを作成します\nSerializerのvalidateメソッドを作成し、新規パスワードと確認用パスワードが一致するか確認し、\nもし一致してなかったらValidationErrorをraiseします\nまた、Djangoのvalidate_passwordメソッドを使って新規パスワードのバリデーションを行います\n独自でValidationを設定していなかったら\n```\nget_default_password_validators()\n```\nメソッドからDjangoのデフォルトのパスワードのバリデーションを使用します\n\n```serializers.py\nfrom application.models import User\nfrom django.contrib.auth.password_validation import validate_password\nfrom rest_framework import serializers\n\n\nclass UserSerializer(serializers.ModelSerializer):\n    \"\"\"ユーザ用シリアライザ\"\"\"\n\n    class Meta:\n        model = User\n        fields = [\"id\", \"employee_number\", \"username\", \"email\", \"role\"]\n        read_only_fields = [\"id\", \"created_at\", \"updated_at\"]\n\n\nclass InviteUserSerializer(serializers.Serializer):\n    \"\"\"ユーザ招待用シリアライザ\"\"\"\n\n    employee_number = serializers.CharField(min_length=8, max_length=8)\n    \"\"\"社員番号\"\"\"\n    name = serializers.CharField(max_length=255)\n    \"\"\"社員指氏名\"\"\"\n    email = serializers.EmailField(max_length=254)\n    \"\"\"社員メールアドレス\"\"\"\n\n\nclass VerifyUserSerializer(serializers.Serializer):\n    \"\"\"システムユーザ認証用シリアライザ\"\"\"\n\n    token = serializers.CharField(max_length=255)\n    \"\"\"パスワード登録用メールURL用トークン\"\"\"\n    new_password = serializers.CharField(max_length=255)\n    \"\"\"新規パスワード\"\"\"\n    confirm_password = serializers.CharField(max_length=255)\n    \"\"\"新規パスワード再確認\"\"\"\n\n    def validate(self, data):\n        if data[\"new_password\"] != data[\"confirm_password\"]:\n            raise serializers.ValidationError(\"新規パスワードと確認パスワードが違います\")\n        validate_password(data[\"new_password\"])\n        return data\n\n\nclass CheckTokenSerializer(serializers.Serializer):\n    \"\"\"トークンが有効であるか確認するSerializer\"\"\"\n\n    token = serializers.CharField(max_length=255)\n    \"\"\"トークン\"\"\"\n```\n\n```django/contrib/auth/password_validation.py\ndef validate_password(password, user=None, password_validators=None):\n    \"\"\"\n    Validate that the password meets all validator requirements.\n\n    If the password is valid, return ``None``.\n    If the password is invalid, raise ValidationError with all error messages.\n    \"\"\"\n    errors = []\n    if password_validators is None:\n        password_validators = get_default_password_validators()\n    for validator in password_validators:\n        try:\n            validator.validate(password, user)\n        except ValidationError as error:\n            errors.append(error)\n    if errors:\n        raise ValidationError(errors)\n```\n\n### Views\n- invite_user(ユーザの招待)\n- verify_user(ユーザの認証)\n\n用のAPIを作成します\n\n```views.py\nimport os, secrets, logging\nfrom datetime import timedelta\n\nfrom django.contrib.auth.hashers import make_password\nfrom django.db import DatabaseError, transaction\nfrom django.http import HttpResponse, JsonResponse\nfrom django.utils import timezone\nfrom django.utils.crypto import get_random_string\nfrom rest_framework import status\nfrom rest_framework.decorators import action\nfrom rest_framework.permissions import AllowAny\nfrom rest_framework.viewsets import ModelViewSet\n\nfrom application.emails import send_invitation_email\nfrom application.models import User, UserInvitation\nfrom application.serializers import (\n    VerifyUserSerializer,\n    InviteUserSerializer,\n    UserSerializer,\n)\n\n\nclass UserViewSet(ModelViewSet):\n    queryset = User.objects.all()\n    permission_classes = [AllowAny]\n    logger = logging.getLogger(__name__)\n\n    def get_serializer_class(self):\n        match self.action:\n            case \"invite_user\":\n                return InviteUserSerializer\n            case \"verify_user\":\n                return VerifyUserSerializer\n            case _:\n                return UserSerializer\n\n    @action(detail=False, methods=[\"POST\"])\n    def invite_user(self, request):\n        \"\"\"指定したメールアドレス宛へユーザの招待メールを送る\n\n        Args:\n            request: リクエスト\n\n        Returns:\n            HttpResponse\n        \"\"\"\n        # Userの新規登録と招待用トークンを作成する\n        serializer = self.get_serializer(data=request.data)\n        serializer.is_valid(raise_exception=True)\n        try:\n            with transaction.atomic():\n                user = User.objects.create(\n                    username=serializer.validated_data[\"name\"],\n                    employee_number=serializer.validated_data[\n                        \"employee_number\"\n                    ],\n                    password=make_password(get_random_string(16)),\n                    email=serializer.validated_data[\"email\"],\n                )\n                token = secrets.token_urlsafe(64)\n                expiry = timezone.now() + timedelta(days=1)\n                UserInvitation.objects.create(\n                    token=token,\n                    user=user,\n                    expiry=expiry,\n                )\n                base_url = os.environ.get(\"BASE_URL\")\n                # 初回登録用のURLへ遷移\n                url = base_url + \"/verify-user/\" + token\n                send_invitation_email(\n                    email=user.email,\n                    url=url,\n                )\n                return JsonResponse(\n                    data={\"msg\": \"招待メールを送信しました\"},\n                    status=status.HTTP_200_OK,\n                )\n        except DatabaseError as e:\n            logger.error(e)\n            return JsonResponse(\n                data={\"msg\": \"ユーザの登録に失敗しました\"},\n                status=status.HTTP_400_BAD_REQUEST,\n            )\n\n\n    @action(detail=False, methods=[\"post\"])\n    def verify_user(self, request):\n        \"\"\"新規ユーザを認証する\n\n        Args:\n            request (HttpRequest): HttpRequestオブジェクト\n\n        Returns:\n            Union[\n                HttpResponse,\n                JsonResponse\n            ]\n        \"\"\"\n        serializer = self.get_serializer(data=request.data)\n        serializer.is_valid(raise_exception=True)\n\n        try:\n            user_invitation_password = UserInvitation.objects.get(\n                token=serializer.validated_data[\"token\"]\n            )\n        except UserInvitation.DoesNotExist:\n            return JsonResponse(\n                data={\"msg\": \"無効なURLです\"},\n                status=status.HTTP_404_NOT_FOUND,\n            )\n\n        if (\n            user_invitation_password.expiry is not None\n            and user_invitation_password.expiry \u003c timezone.now()\n        ):\n            return JsonResponse(\n                data={\"msg\": \"こちらのURLは有効期限切れです\"},\n                status=status.HTTP_404_NOT_FOUND,\n            )\n        try:\n            with transaction.atomic():\n                user = user_invitation_password.user\n                user.is_verified = True\n                user.set_password(serializer.validated_data[\"new_password\"])\n                user.save()\n        except DatabaseError as e:\n            logging.error(e)\n            return JsonResponse(\n                data={\"msg\": \"新規ユーザの認証に失敗しました\"},\n                status=status.HTTP_400_BAD_REQUEST,\n            )\n        return JsonResponse(\n            data={\"msg\": \"新規ユーザの認証に成功しました\"},\n            status=status.HTTP_200_OK,\n\n    @action(detail=False, methods=[\"post\"])\n    def check_invitation_token(self, request):\n        serializer = self.get_serializer(data=request.data)\n        if not serializer.is_valid():\n            return JsonResponse(data={\"check\": False})\n\n        check = self._check_invitation(serializer.data[\"token\"]) != None\n        return JsonResponse(data={\"check\": check})\n\n    def _check_invitation(self, token):\n        \"\"\"ユーザ招待用トークンを認証する\n\n        Args:\n            token : ユーザ認証用トークン\n\n        Returns:\n            Union[\n                Invitationオブジェクト,\n                None\n            ]\n        \"\"\"\n        try:\n            invitation = UserInvitation.objects.get(\n                token=token\n            )\n        except:\n            return None\n\n        if invitation.expiry \u003c timezone.localtime() or invitation.is_used:\n            return None\n        return invitation\n```\n\n1つずつ解説していきます\n\n#### ユーザの招待\nSerializerを使ったバリデーションに成功した後、\nユーザを招待する際に\n- User\n- UserInvitation\n\nを作成します\n途中で処理が失敗してもロールバックができるよう、transaction.atomic()を使ってトランザクション処理を行います\nUserInvitation用のModelを作成する際にトークンの有効期限を24hとします\n```python\n            with transaction.atomic():\n                user = User.objects.create(\n                    username=serializer.validated_data[\"name\"],\n                    employee_number=serializer.validated_data[\n                        \"employee_number\"\n                    ],\n                    password=make_password(get_random_string(16)),\n                    email=serializer.validated_data[\"email\"],\n                )\n                token = secrets.token_urlsafe(64)\n                expiry = timezone.now() + timedelta(days=1)\n                UserInvitation.objects.create(\n                    token=token,\n                    user=user,\n                    expiry=expiry,\n                )\n```\n\n- User\n- UserInvitation\n\nのデータの作成に成功したらメールを送信します\nBASE_URLに今回はlocalhostを指定していますが本番環境ではドメインを指定します\nメール内に招待用のurlを記載し、今回はMailCatcherへ送信します\n下記のurlのパスはフロントエンドと相談して決める必要があります\n\n```python\n                base_url = os.environ.get(\"BASE_URL\")\n                # 初回登録用のURLへ遷移\n                url = base_url + \"/verify-user/\" + token\n                send_invitation_email(\n                    email=user.email,\n                    url=url,\n                )\n                return JsonResponse(\n                    data={\"msg\": \"招待メールを送信しました\"},\n                    status=status.HTTP_200_OK,\n                )\n```\n\n#### トークンの有効期限の確認\nメール内の招待用URLへアクセスする前にトークンが有効かどうか確認するAPIを作成します\nトークンの有効期限、すでに使用されているかを確認し、\n有効であれば\n```\n{\"check\": True}\n```\n無効であれば\n```\n{\"check\": False}\n```\nを返します\n\n```python\n    @action(detail=False, methods=[\"post\"])\n    def check_invitation_token(self, request):\n        serializer = self.get_serializer(data=request.data)\n        if not serializer.is_valid():\n            return JsonResponse(data={\"check\": False})\n\n        check = self._check_invitation(serializer.data[\"token\"]) != None\n        return JsonResponse(data={\"check\": check})\n\n    def _check_invitation(self, token):\n        \"\"\"ユーザ招待用トークンを認証する\n\n        Args:\n            token : ユーザ認証用トークン\n\n        Returns:\n            Union[\n                Invitationオブジェクト,\n                None\n            ]\n        \"\"\"\n        try:\n            invitation = UserInvitation.objects.get(\n                token=token\n            )\n        except:\n            return None\n\n        if invitation.expiry \u003c timezone.localtime() or invitation.is_used:\n            return None\n        return invitation\n```\n\n#### ユーザの認証\nメールに添付されたurlへアクセスする際にフロント側からトークンの値を受け取ります\nSerializerを使ったバリデーションに成功した後、\nユーザを認証する際にトークンが存在するか確認し、なければ404を返します\nトークンの有効期限用のAPIを作成したので不要かと思われますが\n例えば有効期限ギリギリにアクセスし、有効期限が過ぎてから認証しようとしてしまうことなど、\n有効期限を確認するAPIでは検知できない不備を防ぐために記載しております\n\n```python\n        try:\n            user_invitation_password = UserInvitation.objects.get(\n                token=serializer.validated_data[\"token\"]\n            )\n        except UserInvitation.DoesNotExist:\n            return JsonResponse(\n                data={\"msg\": \"無効なURLです\"},\n                status=status.HTTP_404_NOT_FOUND,\n            )\n\n        if (\n            user_invitation_password.expiry is not None\n            and user_invitation_password.expiry \u003c timezone.now()\n        ):\n            return JsonResponse(\n                data={\"msg\": \"こちらのURLは有効期限切れです\"},\n                status=status.HTTP_404_NOT_FOUND,\n            )\n```\n\nトークンが有効であることを確認した後、Userテーブル内に新しいパスワードを設定し、テーブル内の有効化フラグをTrueにします\n\n```python\n        try:\n            with transaction.atomic():\n                user = user_invitation_password.user\n                user.is_verified = True\n                user.set_password(serializer.validated_data[\"new_password\"])\n                user.save()\n        except DatabaseError as e:\n            self.emergency_logger.error(e)\n            return JsonResponse(\n                data={\"msg\": \"新規ユーザの認証に失敗しました\"},\n                status=status.HTTP_400_BAD_REQUEST,\n            )\n        return JsonResponse(\n            data={\"msg\": \"新規ユーザの認証に成功しました\"},\n            status=status.HTTP_200_OK,\n        )\n```\n\n## メール送信機能\nメール送信機能を実装します\nメール送信の際はEmailMultiAlternativesクラスを使ってhtmlとtxtの両方のバージョンのメールを送信できるように設定できます\n\nhttps://docs.djangoproject.com/en/4.2/topics/email/\n\n```emails.py\nfrom django.core.mail import EmailMultiAlternatives\nfrom django.template.loader import render_to_string\n\n\ndef send_invitation_email(email, url):\n    plaintext = render_to_string(\n        \"invite_user_email.txt\",\n        {\n            \"email\": email,\n            \"url\": url,\n        },\n    )\n\n    msg = EmailMultiAlternatives(\n        subject=\"アカウント登録のお知らせ\",\n        body=plaintext,\n        from_email=None,\n        to=[email],\n    )\n\n    # 送信\n    msg.send()\n\n```\n\nメールの本文は以下の通りurlを入れます\n```templates/invite_user_email.txt\n下記URLへ24時間以内にアクセスしてアカウントの本登録をお願いします。\n▼アカウント認証URL\n{{ url }}\n```\n\n```templates/invite_user_email.html\n\u003cpre\u003e\n\n下記URLへ24時間以内にアクセスしてアカウントの本登録をお願いします。\n▼アカウント認証URL\n\u003ca href={{url}}\u003e{{ url }}\u003c/a\u003e\n    \n\u003c/pre\u003e\n```\n\n### urls.py\nAPIのパスを作成します\n\n```urls.py\nfrom django.urls import include, path\nfrom rest_framework_nested import routers\n\nfrom application.views import UserViewSet\n\nrouter = routers.DefaultRouter()\nrouter.register(r\"users\", UserViewSet, basename=\"user\")\n\nurlpatterns = [\n    path(r\"\", include(router.urls)),\n]\n```\n\n## 実際にユーザを招待してみよう！\n- 社員番号\n- ユーザ名\n- メールアドレス\n\nを入力して/api/users/invite_user/へrequestを送ります\n\n![スクリーンショット 2023-10-28 9.41.26.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/8ea1be97-b2e2-81a1-33ac-a666b081e3dd.png)\n\n以下のようなresponseが返ってきたら成功です\n\n![スクリーンショット 2023-10-28 9.54.11.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/37f18241-5065-2085-b653-28dfae99c275.png)\n\nMailCatcher(127.0.0.1:1080)へアクセスすると以下のようにメールを受信できたことを確認したら成功です\n![スクリーンショット 2023-10-28 9.41.04.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/c38f6a15-5e22-4930-1927-6eae009a275a.png)\n\n- 先ほど受信したメールのトークン\n- 新規パスワード\n- 確認用パスワード\n\nを入力して/api/users/verify_user/へrequestを送ります\n\n![スクリーンショット 2023-10-28 9.44.53.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/1bd27b45-65b7-a3bf-8eb0-005951fa8551.png)\n\n以下のようなresponseが返ってきたら成功です\n![スクリーンショット 2023-10-28 9.54.24.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/443e6077-1021-320a-27e3-f230538cee96.png)\n\n## 招待メールを再送したい時\n再送したい時は以下のように招待用APIと分けて作成するのが一般的です\n今回はSerializerを使わずに行います\n\n```views.py\n    @action(detail=True, methods=[\"post\"])\n    def reinvite_user(self, request, pk):\n        \"\"\"ユーザを再招待する\n\n        Args:\n            request (HttpRequest): HttpRequestオブジェクト\n\n        Returns:\n            Union[\n                HttpResponse,\n                JsonResponse\n            ]\n        \"\"\"\n        try:\n            user = User.objects.get(pk=pk)\n        except User.DoesNotExist:\n            return JsonResponse(\n                data={\"msg\": \"指定されたユーザは見つかりませんでした\"},\n                status=status.HTTP_404_NOT_FOUND,\n            )\n        if user.is_verified:\n            return JsonResponse(\n                data={\"msg\": \"指定されたユーザは認証済です\"},\n                status=status.HTTP_400_BAD_REQUEST,\n            )\n        token = secrets.token_urlsafe(64)\n        expiry = timezone.now() + timedelta(days=1)\n        UserInvitation.objects.create(\n            token=token,\n            user=user,\n            expiry=expiry,\n        )\n        base_url = django_settings.BASE_URL\n        # 初回登録用のURLへ遷移\n        url = base_url + \"/verify-user/\" + token\n        send_invitation_email(\n            email=user.email,\n            url=url,\n        )\n        return JsonResponse(\n            data={\"msg\": \"招待メールを再送信しました\"},\n            status=status.HTTP_200_OK,\n        )\n```\n\n以上です\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T16:31:07+09:00",
      "group": null,
      "id": "c825af382a9be8c2fec7",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Django",
              "versions": []
          },
          {
              "name": "ses",
              "versions": []
          },
          {
              "name": "mailcatcher",
              "versions": []
          },
          {
              "name": "django-rest-framework",
              "versions": []
          }
      ],
      "title": "[Django]ユーザのメール招待と認証機能を実装しよう！",
      "updated_at": "2023-10-28T16:33:14+09:00",
      "url": "https://qiita.com/shun198/items/c825af382a9be8c2fec7",
      "user": {
          "description": "2022年7月から関西の金融系会社のバックエンドエンジニアとして勤務\r\nおもにDjango Rest Framework、Docker、GitHub Actions、Pytest、AWSを使って開発してます\r\nReact、CloudFormationも勉強中",
          "facebook_id": "",
          "followees_count": 47,
          "followers_count": 31,
          "github_login_name": "shun198",
          "id": "shun198",
          "items_count": 106,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 625980,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/625980/profile-images/1662332073",
          "team_only": false,
          "twitter_screen_name": "198_shun",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"2:1-3:19\"\u003eLinuxの勉強をしていて、ファイルに関する条件式についていろいろと調べたのでその備忘録を。\u003cbr\u003e\n\u003cstrong\u003e主な使い方\u003c/strong\u003e\u003c/p\u003e\n\u003cul data-sourcepos=\"4:1-8:0\"\u003e\n\u003cli data-sourcepos=\"4:1-4:32\"\u003eファイルが存在するか\u003c/li\u003e\n\u003cli data-sourcepos=\"5:1-5:32\"\u003eファイルが実行可能か\u003c/li\u003e\n\u003cli data-sourcepos=\"6:1-8:0\"\u003eファイルが読み取り可能か\u003cbr\u003e\nを評価してシェルスクリプトを実行したいときに使います。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 data-sourcepos=\"9:1-9:8\"\u003e\n\u003cspan id=\"回答\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9B%9E%E7%AD%94\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e回答\u003c/h1\u003e\n\u003cp data-sourcepos=\"10:1-10:126\"\u003eファイルに関する主な条件式とその意味について、そして名前の由来についてお答えします。\u003c/p\u003e\n\u003cp data-sourcepos=\"12:1-12:109\"\u003eシェルスクリプトにおけるファイルの条件式は、主に以下のものがあります¹²³:\u003c/p\u003e\n\u003cul data-sourcepos=\"14:1-20:0\"\u003e\n\u003cli data-sourcepos=\"14:1-14:81\"\u003e\n\u003ccode\u003e-e ファイル名\u003c/code\u003e: ファイルが存在する場合に真を返します。\u003c/li\u003e\n\u003cli data-sourcepos=\"15:1-15:111\"\u003e\n\u003ccode\u003e-f ファイル名\u003c/code\u003e: ファイルが存在し、通常のファイルである場合に真を返します。\u003c/li\u003e\n\u003cli data-sourcepos=\"16:1-16:129\"\u003e\n\u003ccode\u003e-d ディレクトリ名\u003c/code\u003e: ディレクトリが存在し、通常のディレクトリである場合に真を返します。\u003c/li\u003e\n\u003cli data-sourcepos=\"17:1-17:108\"\u003e\n\u003ccode\u003e-r ファイル名\u003c/code\u003e: ファイルが存在し、読み取り可能である場合に真を返します。\u003c/li\u003e\n\u003cli data-sourcepos=\"18:1-18:108\"\u003e\n\u003ccode\u003e-w ファイル名\u003c/code\u003e: ファイルが存在し、書き込み可能である場合に真を返します。\u003c/li\u003e\n\u003cli data-sourcepos=\"19:1-20:0\"\u003e\n\u003ccode\u003e-x ファイル名\u003c/code\u003e: ファイルが存在し、実行可能である場合に真を返します。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"21:1-21:206\"\u003eこれらの条件式は、if文やwhile文などの制御構文で使用されます。例えば、以下のようなコードでファイルが存在するかどうかを判定することができます:\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"23:1-29:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e \u003cspan class=\"nt\"\u003e-e\u003c/span\u003e /path/to/file \u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n    \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ファイルが存在します\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\n    \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ファイルが存在しません\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003efi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"31:1-31:246\"\u003eシェルスクリプトという名前は、コマンドラインインターフェース（CLI）の「シェル」という機能と、それを記述するための「スクリプト」というプログラム言語から来ています⁴。\u003c/p\u003e\n\u003cp data-sourcepos=\"33:1-33:130\"\u003e実行例としては、以下のようなコードでファイルが存在するかどうかを判定することができます:\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"35:1-43:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c\"\u003e#!/bin/bash\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"o\"\u003e[\u003c/span\u003e \u003cspan class=\"nt\"\u003e-e\u003c/span\u003e /path/to/file \u003cspan class=\"o\"\u003e]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003ethen\n    \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ファイルが存在します\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eelse\n    \u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"ファイルが存在しません\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003efi\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"45:1-49:290\"\u003e\u003cstrong\u003e参考文献\u003c/strong\u003e\u003cbr\u003e\n(1) もうシェルスクリプトでIFの書き方を迷わないための逆引き .... \u003ca href=\"https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\" class=\"autolink\" id=\"reference-42b1888dc99c274f4b93\"\u003ehttps://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\u003c/a\u003e.\u003cbr\u003e\n(2) 【シェルスクリプト】ファイルが存在するかで処理を場合分け .... \u003ca href=\"https://sugublog.org/shell-script-file-exist/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://sugublog.org/shell-script-file-exist/\u003c/a\u003e.\u003cbr\u003e\n(3) シェルスクリプトのif文の基本構文と条件分岐オプションの書き .... \u003ca href=\"https://libproc.com/shellscript-ifelse-options/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://libproc.com/shellscript-ifelse-options/\u003c/a\u003e.\u003cbr\u003e\n(4) シェルスクリプトの入門編7：if文について | Shiro's secret base. \u003ca href=\"https://shiro-secret-base.com/%e3%82%b7%e3%82%a7%e3%83%ab%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88%e3%81%ae%e5%85%a5%e9%96%80%e7%b7%a8%ef%bc%97%ef%bc%9aif%e6%96%87%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://shiro-secret-base.com/%e3%82%b7%e3%82%a7%e3%83%ab%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88%e3%81%ae%e5%85%a5%e9%96%80%e7%b7%a8%ef%bc%97%ef%bc%9aif%e6%96%87%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6/\u003c/a\u003e.\u003c/p\u003e\n\u003ch1 data-sourcepos=\"51:1-51:14\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\u003cp data-sourcepos=\"52:1-53:42\"\u003e最後まで読んでいただきありがとうございます。\u003cbr\u003e\nまたお会い出来たら幸いです。\u003c/p\u003e\n",
      "body": "# はじめに\nLinuxの勉強をしていて、ファイルに関する条件式についていろいろと調べたのでその備忘録を。\n**主な使い方**\n* ファイルが存在するか\n* ファイルが実行可能か\n* ファイルが読み取り可能か\nを評価してシェルスクリプトを実行したいときに使います。\n\n# 回答\nファイルに関する主な条件式とその意味について、そして名前の由来についてお答えします。\n\nシェルスクリプトにおけるファイルの条件式は、主に以下のものがあります¹²³:\n\n- `-e ファイル名`: ファイルが存在する場合に真を返します。\n- `-f ファイル名`: ファイルが存在し、通常のファイルである場合に真を返します。\n- `-d ディレクトリ名`: ディレクトリが存在し、通常のディレクトリである場合に真を返します。\n- `-r ファイル名`: ファイルが存在し、読み取り可能である場合に真を返します。\n- `-w ファイル名`: ファイルが存在し、書き込み可能である場合に真を返します。\n- `-x ファイル名`: ファイルが存在し、実行可能である場合に真を返します。\n\nこれらの条件式は、if文やwhile文などの制御構文で使用されます。例えば、以下のようなコードでファイルが存在するかどうかを判定することができます:\n\n```bash\nif [ -e /path/to/file ]; then\n    echo \"ファイルが存在します\"\nelse\n    echo \"ファイルが存在しません\"\nfi\n```\n\nシェルスクリプトという名前は、コマンドラインインターフェース（CLI）の「シェル」という機能と、それを記述するための「スクリプト」というプログラム言語から来ています⁴。\n\n実行例としては、以下のようなコードでファイルが存在するかどうかを判定することができます:\n\n```bash\n#!/bin/bash\n\nif [ -e /path/to/file ]; then\n    echo \"ファイルが存在します\"\nelse\n    echo \"ファイルが存在しません\"\nfi\n```\n\n**参考文献**\n(1) もうシェルスクリプトでIFの書き方を迷わないための逆引き .... https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d.\n(2) 【シェルスクリプト】ファイルが存在するかで処理を場合分け .... https://sugublog.org/shell-script-file-exist/.\n(3) シェルスクリプトのif文の基本構文と条件分岐オプションの書き .... https://libproc.com/shellscript-ifelse-options/.\n(4) シェルスクリプトの入門編7：if文について | Shiro's secret base. https://shiro-secret-base.com/%e3%82%b7%e3%82%a7%e3%83%ab%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88%e3%81%ae%e5%85%a5%e9%96%80%e7%b7%a8%ef%bc%97%ef%bc%9aif%e6%96%87%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6/.\n\n# おわりに\n最後まで読んでいただきありがとうございます。\nまたお会い出来たら幸いです。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T16:16:10+09:00",
      "group": null,
      "id": "c28432e3603d072ebe48",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Linux",
              "versions": []
          },
          {
              "name": "ChatGPT",
              "versions": []
          }
      ],
      "title": "Linuxのシェルスクリプトでファイルに使う条件式をまとめてみた。",
      "updated_at": "2023-10-28T16:16:10+09:00",
      "url": "https://qiita.com/taipy/items/c28432e3603d072ebe48",
      "user": {
          "description": "勉強になったことや共有したいことを記事にしていきます。\r\n不束者ですがよろしくお願いします。",
          "facebook_id": "",
          "followees_count": 2,
          "followers_count": 1,
          "github_login_name": null,
          "id": "taipy",
          "items_count": 24,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 2613568,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2613568/profile-images/1698460306",
          "team_only": false,
          "twitter_screen_name": "taiPy5",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-2:132\"\u003e下記の例題は累積和の基礎となるAtcoderの問題です。\u003cbr\u003e\n今回はこの例題をもとに、累積和を求める愚直解から最適解までのステップを確認していきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"4:1-4:68\"\u003e\u003ciframe id=\"qiita-embed-content__89f9dcf813f79c627b25a9768a0815df\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__89f9dcf813f79c627b25a9768a0815df\" data-content=\"https%3A%2F%2Fatcoder.jp%2Fcontests%2Ftessoku-book%2Ftasks%2Fmath_and_algorithm_ai\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003ch2 data-sourcepos=\"6:1-6:12\"\u003e\n\u003cspan id=\"愚直解\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%84%9A%E7%9B%B4%E8%A7%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e愚直解\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"8:1-8:84\"\u003e\n\u003cspan id=\"各質問に対して毎回lからrの来場者数の和を直接計算する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%90%84%E8%B3%AA%E5%95%8F%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E6%AF%8E%E5%9B%9El%E3%81%8B%E3%82%89r%E3%81%AE%E6%9D%A5%E5%A0%B4%E8%80%85%E6%95%B0%E3%81%AE%E5%92%8C%E3%82%92%E7%9B%B4%E6%8E%A5%E8%A8%88%E7%AE%97%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e各質問に対して、毎回LからRの来場者数の和を直接計算する\u003c/h3\u003e\n\u003cp data-sourcepos=\"10:1-12:104\"\u003eこの方法ではQ回の質問に対して、毎回L日からR日までのの和を求める計算をします。\u003cbr\u003e\nその場合、計算量は最大O(N ^ R)になります。\u003cbr\u003e\nN, Qともに取りうる最大値は10 ^ 5なので実行時間制限2秒を超えてしまいます。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"14:1-14:52\"\u003e\n\u003cspan id=\"累積和を事前に求める直接計算\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B4%AF%E7%A9%8D%E5%92%8C%E3%82%92%E4%BA%8B%E5%89%8D%E3%81%AB%E6%B1%82%E3%82%81%E3%82%8B%E7%9B%B4%E6%8E%A5%E8%A8%88%E7%AE%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e累積和を事前に求める（直接計算）\u003c/h3\u003e\n\u003cp data-sourcepos=\"16:1-17:66\"\u003e１つ目の方法は同じ日数間の合計来場者数を求める場合でも、再度計算する必要がありました。\u003cbr\u003e\nそのため計算量が大きくなることが欠点でした。\u003c/p\u003e\n\u003cp data-sourcepos=\"19:1-19:185\"\u003e今回は事前にそれぞれの日数の合計来場者数を求めることとします。その場合、同じ日数間の合計来場者数はO(N)からO(1)に削減できます。\u003c/p\u003e\n\u003cp data-sourcepos=\"21:1-21:108\"\u003e例えば、A = [11, 46, 47, 77, 80]のリストがある場合、この累積和を計算してみます。\u003c/p\u003e\n\u003cul data-sourcepos=\"23:1-28:0\"\u003e\n\u003cli data-sourcepos=\"23:1-23:9\"\u003eS1 = 11\u003c/li\u003e\n\u003cli data-sourcepos=\"24:1-24:19\"\u003eS2 = 11 + 46 = 57\u003c/li\u003e\n\u003cli data-sourcepos=\"25:1-25:26\"\u003eS3 = 11 + 46 + 47  = 104\u003c/li\u003e\n\u003cli data-sourcepos=\"26:1-26:30\"\u003eS4 = 11 + 46 + 47 + 77 = 181\u003c/li\u003e\n\u003cli data-sourcepos=\"27:1-28:0\"\u003eS5 = 11 + 46 + 47 + 77 + 80 = 261\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"29:1-30:90\"\u003eこの配列の大きさであれば手計算でも可能ですが、配列の大きさがNの場合、S1を求めるのに1個の数の足し算、S2を求めるのに2個の数の足し算、SNを求めるのにN個の数の足し算をする必要があります。合計計算回数は N * (N - 1) / 2回になり、Nが大きい場合に実行時間に間に合いません。\u003cbr\u003e\nそのため次の最適解である累積和の計算方法を取ることにします。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"32:1-32:12\"\u003e\n\u003cspan id=\"最適解\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%80%E9%81%A9%E8%A7%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e最適解\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"34:1-34:109\"\u003e\n\u003cspan id=\"累積和を事前に求める一つ前に求めた累積和を使って次の累積和を求める\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B4%AF%E7%A9%8D%E5%92%8C%E3%82%92%E4%BA%8B%E5%89%8D%E3%81%AB%E6%B1%82%E3%82%81%E3%82%8B%E4%B8%80%E3%81%A4%E5%89%8D%E3%81%AB%E6%B1%82%E3%82%81%E3%81%9F%E7%B4%AF%E7%A9%8D%E5%92%8C%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E6%AC%A1%E3%81%AE%E7%B4%AF%E7%A9%8D%E5%92%8C%E3%82%92%E6%B1%82%E3%82%81%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e累積和を事前に求める（一つ前に求めた累積和を使って次の累積和を求める）\u003c/h3\u003e\n\u003cp data-sourcepos=\"36:1-36:106\"\u003e以下の方法を取ることで、計算量O(N)で累積和を求めることが可能になります。\u003c/p\u003e\n\u003cul data-sourcepos=\"38:1-40:0\"\u003e\n\u003cli data-sourcepos=\"38:1-38:17\"\u003eS0 = 0とする\u003c/li\u003e\n\u003cli data-sourcepos=\"39:1-40:0\"\u003ei = 1, 2, 3, …., Nとした場合、Si = Si-1 + Aiを計算して累積和Siを求める\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"41:1-41:96\"\u003eA = [11, 46, 47, 77, 80]のリストがある場合、この累積和を計算してみます。\u003c/p\u003e\n\u003cul data-sourcepos=\"43:1-48:0\"\u003e\n\u003cli data-sourcepos=\"43:1-43:19\"\u003eS1 = S0 + A1 = 11\u003c/li\u003e\n\u003cli data-sourcepos=\"44:1-44:19\"\u003eS2 = S1 + A2 = 57\u003c/li\u003e\n\u003cli data-sourcepos=\"45:1-45:21\"\u003eS3 = S2 + A3  = 104\u003c/li\u003e\n\u003cli data-sourcepos=\"46:1-46:20\"\u003eS4 = S3 + A4 = 181\u003c/li\u003e\n\u003cli data-sourcepos=\"47:1-48:0\"\u003eS5 = S4 + A5 = 261\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"49:1-52:100\"\u003e例題では累積和を使ってQ回の質問に答えるので計算量はO(Q + N)で計算できます。\u003cbr\u003e\nここで例題の注意点として、L日からR日間の累計来場者数を計算する場合、\u003cbr\u003e\n\u003ccode\u003e（Rの累計来場者数）- （L-1日目の累計来場者数）\u003c/code\u003eを計算する必要があります。\u003cbr\u003e\nこの問題ではL日目の来場者数も含める必要があるため、L-1としています。\u003c/p\u003e\n\u003cp data-sourcepos=\"54:1-54:24\"\u003e最適解による回答\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"56:1-72:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n\u003cspan class=\"n\"\u003eL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e\n\u003cspan class=\"n\"\u003eR\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eQ\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003eR\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 累積和の計算\n\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eQ\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eR\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"74:1-74:167\"\u003ePythonの場合、一次元の累積和は**\u003ccode\u003eitertools.accumulate\u003c/code\u003e**のライブラリを使うことで以下のように簡単に計算することができます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"75:1-90:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eitertools\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eaccumulate\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e()))\u003c/span\u003e\n\u003cspan class=\"n\"\u003eL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e\n\u003cspan class=\"n\"\u003eR\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eQ\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eQ\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003eR\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003einput\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003esplit\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 累積和の計算\n\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eaccumulate\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eQ\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eR\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n",
      "body": "下記の例題は累積和の基礎となるAtcoderの問題です。\n今回はこの例題をもとに、累積和を求める愚直解から最適解までのステップを確認していきます。\n\nhttps://atcoder.jp/contests/tessoku-book/tasks/math_and_algorithm_ai\n\n## 愚直解\n\n### 各質問に対して、毎回LからRの来場者数の和を直接計算する\n\nこの方法ではQ回の質問に対して、毎回L日からR日までのの和を求める計算をします。\nその場合、計算量は最大O(N ^ R)になります。\nN, Qともに取りうる最大値は10 ^ 5なので実行時間制限2秒を超えてしまいます。\n\n### 累積和を事前に求める（直接計算）\n\n１つ目の方法は同じ日数間の合計来場者数を求める場合でも、再度計算する必要がありました。\nそのため計算量が大きくなることが欠点でした。\n\n今回は事前にそれぞれの日数の合計来場者数を求めることとします。その場合、同じ日数間の合計来場者数はO(N)からO(1)に削減できます。\n\n例えば、A = [11, 46, 47, 77, 80]のリストがある場合、この累積和を計算してみます。\n\n- S1 = 11\n- S2 = 11 + 46 = 57\n- S3 = 11 + 46 + 47  = 104\n- S4 = 11 + 46 + 47 + 77 = 181\n- S5 = 11 + 46 + 47 + 77 + 80 = 261\n\nこの配列の大きさであれば手計算でも可能ですが、配列の大きさがNの場合、S1を求めるのに1個の数の足し算、S2を求めるのに2個の数の足し算、SNを求めるのにN個の数の足し算をする必要があります。合計計算回数は N * (N - 1) / 2回になり、Nが大きい場合に実行時間に間に合いません。\nそのため次の最適解である累積和の計算方法を取ることにします。\n\n## 最適解\n\n### 累積和を事前に求める（一つ前に求めた累積和を使って次の累積和を求める）\n\n以下の方法を取ることで、計算量O(N)で累積和を求めることが可能になります。\n\n- S0 = 0とする\n- i = 1, 2, 3, …., Nとした場合、Si = Si-1 + Aiを計算して累積和Siを求める\n\nA = [11, 46, 47, 77, 80]のリストがある場合、この累積和を計算してみます。\n\n- S1 = S0 + A1 = 11\n- S2 = S1 + A2 = 57\n- S3 = S2 + A3  = 104\n- S4 = S3 + A4 = 181\n- S5 = S4 + A5 = 261\n\n例題では累積和を使ってQ回の質問に答えるので計算量はO(Q + N)で計算できます。\nここで例題の注意点として、L日からR日間の累計来場者数を計算する場合、\n`（Rの累計来場者数）- （L-1日目の累計来場者数）`を計算する必要があります。\nこの問題ではL日目の来場者数も含める必要があるため、L-1としています。\n\n最適解による回答\n\n```python\nN, Q = map(int, input().split())\nA = list(map(int, input().split()))\nL = [None] * Q\nR = [None] * Q\nfor q in range(Q):\n    L[q], R[q] = map(int, input().split())\n\n# 累積和の計算\nS = [None] * (N + 1)\nS[0] = 0\nfor i in range(N):\n    S[i + 1] = S[i] + A[i]\n\nfor q in range(Q):\n    print(S[R[q]] - S[L[q] - 1])\n```\n\nPythonの場合、一次元の累積和は**`itertools.accumulate`**のライブラリを使うことで以下のように簡単に計算することができます。\n```python\nfrom itertools import accumulate\n\nN, Q = map(int, input().split())\nA = list(map(int, input().split()))\nL = [None] * Q\nR = [None] * Q\nfor q in range(Q):\n    L[q], R[q] = map(int, input().split())\n\n# 累積和の計算\nS = list(accumulate([0] + A))\n\nfor q in range(Q):\n    print(S[R[q]] - S[L[q] - 1])\n```\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T16:06:43+09:00",
      "group": null,
      "id": "4966367957486756b9c9",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Python",
              "versions": []
          },
          {
              "name": "AtCoder",
              "versions": []
          },
          {
              "name": "累積和",
              "versions": []
          }
      ],
      "title": "Pythonで累積和〜愚直解から最適解まで〜",
      "updated_at": "2023-10-28T16:22:15+09:00",
      "url": "https://qiita.com/hk_578381/items/4966367957486756b9c9",
      "user": {
          "description": null,
          "facebook_id": null,
          "followees_count": 1,
          "followers_count": 0,
          "github_login_name": null,
          "id": "hk_578381",
          "items_count": 1,
          "linkedin_id": null,
          "location": null,
          "name": "",
          "organization": null,
          "permanent_id": 3586015,
          "profile_image_url": "https://secure.gravatar.com/avatar/3b063fa42ac17ead90fc428cad3529e7",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": null
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-1:62\"\u003e\u003ciframe id=\"qiita-embed-content__9676f8e3f8f90fc295e9098dca8e6e73\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__9676f8e3f8f90fc295e9098dca8e6e73\" data-content=\"https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DEsSEFjrDLMU%26ab_channel%3DSHNHIRA\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cp data-sourcepos=\"3:1-6:205\"\u003e冷房始動時の消費電力経緯です。\u003cbr\u003e\n一気に上がらずマイルドに上がるところが凄い。\u003cbr\u003e\nコンプレッサ始動時は20A位行くのかなと思ってました。\u003cbr\u003e\nブレーカ30A契約時、4基エアコン使用しているとうちだけ停電になってました。1基7Aでもエアコンだけで28A。今年は40A契約にしてそれはなくなりました。\u003c/p\u003e\n\u003cp data-sourcepos=\"8:1-8:98\"\u003eこれは違うエアコンですが前面(上部)カバー外して清掃もしてみました。\u003c/p\u003e\n\u003cdiv data-sourcepos=\"10:1-14:3\" class=\"note alert\"\u003e\n\u003cspan class=\"fa fa-fw fa-times-circle\"\u003e\u003c/span\u003e\u003cdiv\u003e\n\u003cp data-sourcepos=\"11:1-13:36\"\u003e1.コンセントは抜いてください.\u003cbr\u003e\n2.清掃時に電子部品に水が掛からないようにして下さい.\u003cbr\u003e\n3.全て自己責任となります.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"15:1-17:165\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/d70069e193ceb0e4fc8296d67d78aae9951b44a2/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f323832313838322f37303138633965392d623266632d306632322d393532662d6632363037666661386335612e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F2821882%2F7018c9e9-b2fc-0f22-952f-f2607ffa8c5a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0ddff6def694bd5da59bb3b1b73fa579\" alt=\"346268231_1045502613502342_7106061804863682010_n.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2821882/7018c9e9-b2fc-0f22-952f-f2607ffa8c5a.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F2821882%2F7018c9e9-b2fc-0f22-952f-f2607ffa8c5a.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4495204cff16c45f0938fe4bfc3e24d5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n・10年目にしては綺麗な方\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b036e49b7b25a918e84e1aa7ee98d64174940322/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f323832313838322f65613037363666362d313961352d363131392d396438332d3565663330303331313265392e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F2821882%2Fea0766f6-19a5-6119-9d83-5ef3003112e9.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=32d6ab6f26685fec591636fc97876d77\" alt=\"346612543_196337813272251_4486199857169799740_n.jpg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2821882/ea0766f6-19a5-6119-9d83-5ef3003112e9.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F2821882%2Fea0766f6-19a5-6119-9d83-5ef3003112e9.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ddbc3914c4ef387f413c1077d2ef3a4d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cul data-sourcepos=\"19:1-22:161\"\u003e\n\u003cli data-sourcepos=\"19:1-19:65\"\u003e上部カバーを外すと清掃が格段にし易くなる。\u003c/li\u003e\n\u003cli data-sourcepos=\"20:1-20:298\"\u003e左右、上にはネジ止めはありません。吹き出し口の所か、フィルタを外す時に開けるカバーを開けるとあります。自宅にある、4社5基のルームエアコン全て清掃メンテの為、バラしましたが同様でした。時間も1-2分です。\u003c/li\u003e\n\u003cli data-sourcepos=\"21:1-21:188\"\u003e更にやるならドレンパンも外します。これは機種によっては難易度が高い場合があります。この写真の日立製の機器は簡単にできました。\u003c/li\u003e\n\u003cli data-sourcepos=\"22:1-22:161\"\u003eもっとやるならシロッコファン自体取り外しますがここまでしなくても季節毎に適当に清掃していれば不要でしょう。\u003c/li\u003e\n\u003c/ul\u003e\n",
      "body": "https://www.youtube.com/watch?v=EsSEFjrDLMU\u0026ab_channel=SHNHIRA\n\n冷房始動時の消費電力経緯です。\n一気に上がらずマイルドに上がるところが凄い。\nコンプレッサ始動時は20A位行くのかなと思ってました。\nブレーカ30A契約時、4基エアコン使用しているとうちだけ停電になってました。1基7Aでもエアコンだけで28A。今年は40A契約にしてそれはなくなりました。\n\nこれは違うエアコンですが前面(上部)カバー外して清掃もしてみました。\n\n:::note alert\n1.コンセントは抜いてください.\n2.清掃時に電子部品に水が掛からないようにして下さい.\n3.全て自己責任となります.\n:::\n![346268231_1045502613502342_7106061804863682010_n.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2821882/7018c9e9-b2fc-0f22-952f-f2607ffa8c5a.jpeg)\n・10年目にしては綺麗な方\n![346612543_196337813272251_4486199857169799740_n.jpg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2821882/ea0766f6-19a5-6119-9d83-5ef3003112e9.jpeg)\n\n- 上部カバーを外すと清掃が格段にし易くなる。\n- 左右、上にはネジ止めはありません。吹き出し口の所か、フィルタを外す時に開けるカバーを開けるとあります。自宅にある、4社5基のルームエアコン全て清掃メンテの為、バラしましたが同様でした。時間も1-2分です。\n- 更にやるならドレンパンも外します。これは機種によっては難易度が高い場合があります。この写真の日立製の機器は簡単にできました。\n- もっとやるならシロッコファン自体取り外しますがここまでしなくても季節毎に適当に清掃していれば不要でしょう。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T15:57:45+09:00",
      "group": null,
      "id": "037a358a2cefc1865805",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "消費電力",
              "versions": []
          },
          {
              "name": "エアコン",
              "versions": []
          }
      ],
      "title": "エアコンについて",
      "updated_at": "2023-10-28T16:27:06+09:00",
      "url": "https://qiita.com/inf102/items/037a358a2cefc1865805",
      "user": {
          "description": "C++(MFC含),WPF,WinForms,組込み系,Arduino,PIC 等。\r\n写真は富士通製セラミックパッケージ版 i8086マイクロプロセッサ",
          "facebook_id": "",
          "followees_count": 0,
          "followers_count": 1,
          "github_login_name": null,
          "id": "inf102",
          "items_count": 20,
          "linkedin_id": "",
          "location": "日本国",
          "name": "",
          "organization": "某国立大学病院 情報システム課",
          "permanent_id": 2821882,
          "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/2821882/263da3335fe477f48846d03abc09ea487432381e/x_large.png?1695559311",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"3:1-4:96\"\u003eSwift でコードを書いていると Protocol を使う場面は多いですが、\u003cbr\u003e\nProtocol にどのような名前をつけるべきか、今までよく悩んできました。\u003c/p\u003e\n\u003cp data-sourcepos=\"6:1-8:90\"\u003e標準ライブラリでよく見られる「 \u003ccode\u003eEquatable\u003c/code\u003e 」や「 \u003ccode\u003eHashable\u003c/code\u003e 」のような、\u003cbr\u003e\n「 \u003ccode\u003e**able\u003c/code\u003e 」 Protocol はどういう時に定義すべきなのかも曖昧だったので、\u003cbr\u003e\n一般的な命名パターンをある程度把握しておきたいと思いました。\u003c/p\u003e\n\u003cp data-sourcepos=\"10:1-10:168\"\u003eそこで本記事では、一般的にどのように Protocol の命名がなされているのかを Web で調査して、自分なりに整理してみました。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"12:1-12:36\"\u003e\n\u003cspan id=\"公式ドキュメントの記述\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%AC%E5%BC%8F%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E8%A8%98%E8%BF%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e公式ドキュメントの記述\u003c/h2\u003e\n\u003cp data-sourcepos=\"14:1-15:63\"\u003e\u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAPI Design Guidelines\u003c/a\u003e には、プロトコルの命名規則についてはそれほど多く語られておらず、\u003cbr\u003e\n主な記述は以下の数行にまとめられています。\u003c/p\u003e\n\u003cblockquote data-sourcepos=\"17:1-18:126\"\u003e\n\u003cul data-sourcepos=\"17:3-18:126\"\u003e\n\u003cli data-sourcepos=\"17:3-18:126\"\u003eProtocols that describe what something is should read as nouns (e.g. Collection).\u003cbr\u003e\n\u003cstrong\u003e何かが何であるかを記述するプロトコルは、名詞として読むべきである（例：\u003ccode\u003eCollection\u003c/code\u003e）\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cblockquote data-sourcepos=\"20:1-21:173\"\u003e\n\u003cul data-sourcepos=\"20:3-21:173\"\u003e\n\u003cli data-sourcepos=\"20:3-21:173\"\u003eProtocols that describe a capability should be named using the suffixes able, ible, or ing (e.g. Equatable, ProgressReporting).\u003cbr\u003e\n\u003cstrong\u003e能力を記述するプロトコルは、接尾辞able、ible、またはingを使用して命名されるべきである（例：\u003ccode\u003eEquatable\u003c/code\u003e、\u003ccode\u003eProgressReporting\u003c/code\u003e）\u003c/strong\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp data-sourcepos=\"23:1-24:111\"\u003e短い説明ではありますが、プロトコルに名前をつける際には基本的に\u003cbr\u003e\n上記ガイドラインで説明されているいずれかのパターンに分類できると思います。\u003c/p\u003e\n\u003cp data-sourcepos=\"26:1-26:81\"\u003eそれぞれのパターンについて、以下で詳しく見ていきます。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"28:1-28:50\"\u003e\n\u003cspan id=\"基本的なプロトコル命名規則の分類\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E5%91%BD%E5%90%8D%E8%A6%8F%E5%89%87%E3%81%AE%E5%88%86%E9%A1%9E\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e基本的なプロトコル命名規則の分類\u003c/h1\u003e\n\u003cp data-sourcepos=\"30:1-31:79\"\u003e上述した \u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAPI Design Guidelines\u003c/a\u003e の定義に基づくと、\u003cbr\u003e\nプロトコルの命名規則は以下の3パターンに分類できます。\u003c/p\u003e\n\u003col data-sourcepos=\"33:1-36:0\"\u003e\n\u003cli data-sourcepos=\"33:1-33:51\"\u003eプロトコル名が名詞になるパターン\u003c/li\u003e\n\u003cli data-sourcepos=\"34:1-34:63\"\u003eプロトコル名の末尾が「ing」になるパターン\u003c/li\u003e\n\u003cli data-sourcepos=\"35:1-36:0\"\u003eプロトコル名の末尾が「able」または「ible」になるパターン\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp data-sourcepos=\"37:1-38:48\"\u003eそれぞれのパターンがどのようなケースで適用されるかについて、\u003cbr\u003e\n具体例とともに以下に記載します。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"40:1-40:54\"\u003e\n\u003cspan id=\"1-プロトコル名が名詞になるパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E5%90%8D%E3%81%8C%E5%90%8D%E8%A9%9E%E3%81%AB%E3%81%AA%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. プロトコル名が名詞になるパターン\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"42:1-42:16\"\u003e\n\u003cspan id=\"適用条件\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%A9%E7%94%A8%E6%9D%A1%E4%BB%B6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e適用条件\u003c/h3\u003e\n\u003cul data-sourcepos=\"44:1-45:0\"\u003e\n\u003cli data-sourcepos=\"44:1-45:0\"\u003e準拠型が「何であるか」を表すプロトコルは、名詞で命名する\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"46:1-46:87\"\u003eもう少し具体的にいうと、以下のように表現できると思います。\u003c/p\u003e\n\u003cul data-sourcepos=\"48:1-49:0\"\u003e\n\u003cli data-sourcepos=\"48:1-49:0\"\u003e準拠型を「カテゴリ」や「グループ」等に分類できる場合、その分類名（名詞）をプロトコル名とする\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"50:1-50:31\"\u003e\n\u003cspan id=\"標準ライブラリの例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A8%99%E6%BA%96%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e標準ライブラリの例\u003c/h3\u003e\n\u003cul data-sourcepos=\"52:1-55:0\"\u003e\n\u003cli data-sourcepos=\"52:1-52:12\"\u003e\u003ccode\u003eSequence\u003c/code\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"53:1-53:13\"\u003e\u003ccode\u003eMTLDevice\u003c/code\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"54:1-55:0\"\u003eSwiftUI の \u003ccode\u003eView\u003c/code\u003e, \u003ccode\u003eShape\u003c/code\u003e など\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"56:1-56:13\"\u003e\n\u003cspan id=\"具体例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e具体例\u003c/h3\u003e\n\u003cp data-sourcepos=\"58:1-58:55\"\u003e\u003cstrong\u003e「動物であること」を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"60:1-67:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「動物であること」を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eAnimal\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003eeat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"nv\"\u003efood\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eEatable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eDog\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eAnimal\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eCat\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eAnimal\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"69:1-69:52\"\u003e\u003cstrong\u003e「車であること」を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"71:1-78:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「車であること」を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eCar\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003efuelLevel\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eInt\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003ePrius\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eCar\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eCrown\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eCar\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"80:1-80:64\"\u003e\u003cstrong\u003e「BLEデバイスであること」を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"82:1-90:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「BLEデバイスであること」を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLEDevice\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ebatteryLevel\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eInt\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003econnect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"nv\"\u003edevice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLEDevice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLEEarphone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLEDevice\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLESpeaker\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eBLEDevice\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"92:1-92:67\"\u003e\u003cstrong\u003e「APIリクエストであること」を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"94:1-101:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「APIリクエストであること」を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eAPIRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ehttpHeaders\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ehttpMethod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eLoginAPIRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eAPIRequest\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch2 data-sourcepos=\"103:1-103:66\"\u003e\n\u003cspan id=\"2-プロトコル名の末尾がingになるパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E5%90%8D%E3%81%AE%E6%9C%AB%E5%B0%BE%E3%81%8Cing%E3%81%AB%E3%81%AA%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. プロトコル名の末尾が「ing」になるパターン\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"105:1-105:16\"\u003e\n\u003cspan id=\"適用条件-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%A9%E7%94%A8%E6%9D%A1%E4%BB%B6-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e適用条件\u003c/h3\u003e\n\u003cp data-sourcepos=\"107:1-107:84\"\u003e以下条件の両方に合致する場合、このパターンを適用します。\u003c/p\u003e\n\u003cul data-sourcepos=\"109:1-111:0\"\u003e\n\u003cli data-sourcepos=\"109:1-109:68\"\u003eプロトコルが「能力」や「機能」を説明する場合\u003c/li\u003e\n\u003cli data-sourcepos=\"110:1-111:0\"\u003eプロトコルの準拠型が「 \u003cstrong\u003e処理を実行する主体（Subject）\u003c/strong\u003e 」である場合\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"112:1-112:31\"\u003e\n\u003cspan id=\"標準ライブラリの例-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A8%99%E6%BA%96%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E4%BE%8B-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e標準ライブラリの例\u003c/h3\u003e\n\u003cul data-sourcepos=\"114:1-115:0\"\u003e\n\u003cli data-sourcepos=\"114:1-115:0\"\u003e\u003ccode\u003eProgressReporting\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"116:1-116:99\"\u003e標準ライブラリには「ing」で終わるプロトコルはあまりなさそうでした。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"118:1-118:13\"\u003e\n\u003cspan id=\"具体例-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E4%BE%8B-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e具体例\u003c/h3\u003e\n\u003cp data-sourcepos=\"120:1-120:73\"\u003e\u003cstrong\u003e「デバッグログを出力する」機能を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"122:1-129:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「デバッグログを出力する」機能を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eDebugLogging\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"nv\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 準拠型自身が「ログを出力する」処理を行う主体である\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eDebugLogger\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eDebugLogging\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"131:1-131:61\"\u003e\u003cstrong\u003e「音声を録音する」機能を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"133:1-141:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「音声を録音する」という機能を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eVoiceRecording\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003estartRecording\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\t\u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003estopRecording\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 準拠型自身が「音声を録音する」処理を行う主体である\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eVoiceRecorder\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eVoiceRecording\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch2 data-sourcepos=\"144:1-144:86\"\u003e\n\u003cspan id=\"3-プロトコル名の末尾がableまたはibleになるパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E5%90%8D%E3%81%AE%E6%9C%AB%E5%B0%BE%E3%81%8Cable%E3%81%BE%E3%81%9F%E3%81%AFible%E3%81%AB%E3%81%AA%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. プロトコル名の末尾が「able」または「ible」になるパターン\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"146:1-146:16\"\u003e\n\u003cspan id=\"適用条件-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%81%A9%E7%94%A8%E6%9D%A1%E4%BB%B6-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e適用条件\u003c/h3\u003e\n\u003cp data-sourcepos=\"148:1-148:84\"\u003e以下条件の両方に合致する場合、このパターンを適用します。\u003c/p\u003e\n\u003cul data-sourcepos=\"150:1-152:0\"\u003e\n\u003cli data-sourcepos=\"150:1-150:68\"\u003eプロトコルが「能力」や「機能」を説明する場合\u003c/li\u003e\n\u003cli data-sourcepos=\"151:1-152:0\"\u003eプロトコルの準拠型が「 \u003cstrong\u003e処理される対象（Object）\u003c/strong\u003e 」である場合\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"153:1-153:31\"\u003e\n\u003cspan id=\"標準ライブラリの例-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A8%99%E6%BA%96%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E4%BE%8B-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e標準ライブラリの例\u003c/h3\u003e\n\u003cul data-sourcepos=\"155:1-164:0\"\u003e\n\u003cli data-sourcepos=\"155:1-157:63\"\u003e\n\u003ccode\u003eEquatable\u003c/code\u003e\n\u003cul data-sourcepos=\"156:5-157:63\"\u003e\n\u003cli data-sourcepos=\"156:5-156:84\"\u003e「値が等しいか比較できる」という能力を表すプロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"157:5-157:63\"\u003e自身が「等しいか比較される」対象である\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"158:1-160:69\"\u003e\n\u003ccode\u003eHashable\u003c/code\u003e\n\u003cul data-sourcepos=\"159:5-160:69\"\u003e\n\u003cli data-sourcepos=\"159:5-159:84\"\u003e「ハッシュ値を生成できる」という能力を表すプロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"160:5-160:69\"\u003e自身が「ハッシュ値を生成される」対象である\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"161:1-164:0\"\u003e\n\u003ccode\u003eCustomStringConvertible\u003c/code\u003e\n\u003cul data-sourcepos=\"162:5-164:0\"\u003e\n\u003cli data-sourcepos=\"162:5-162:90\"\u003e「カスタム文字列に変換できる」という能力を表すプロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"163:5-164:0\"\u003e自身が「カスタム文字列に変換される」対象である\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"165:1-165:13\"\u003e\n\u003cspan id=\"具体例-2\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E4%BE%8B-2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e具体例\u003c/h3\u003e\n\u003cp data-sourcepos=\"167:1-167:61\"\u003e\u003cstrong\u003e「リセットできる」能力を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"169:1-176:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「リセットできる」能力を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eResettable\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003emutating\u003c/span\u003e \u003cspan class=\"kd\"\u003efunc\u003c/span\u003e \u003cspan class=\"nf\"\u003ereset\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 準拠型自身が「リセットされる」対象である\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eAccountSettings\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eResettable\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"178:1-178:67\"\u003e\u003cstrong\u003e「食べることができる」能力を表すプロトコル\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"swift\" data-sourcepos=\"180:1-191:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// 「食べることができる」能力を表すプロトコル\u003c/span\u003e\n\u003cspan class=\"kd\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"kt\"\u003eEatable\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\u003cspan class=\"k\"\u003evar\u003c/span\u003e \u003cspan class=\"nv\"\u003ekcal\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eInt\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003eget\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// 準拠型自身が「食べられる」対象である\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003eApple\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eEatable\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"kd\"\u003estruct\u003c/span\u003e \u003cspan class=\"kt\"\u003ePeach\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eEatable\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e...\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// Eatable なオブジェクトは、先述した Animal によって食べられる\u003c/span\u003e\n\u003cspan class=\"k\"\u003elet\u003c/span\u003e \u003cspan class=\"nv\"\u003edog\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kt\"\u003eDog\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003edog\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003ePeach\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch1 data-sourcepos=\"193:1-193:75\"\u003e\n\u003cspan id=\"備忘録-個人的に悩ましいプロトコルの命名について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%82%99%E5%BF%98%E9%8C%B2-%E5%80%8B%E4%BA%BA%E7%9A%84%E3%81%AB%E6%82%A9%E3%81%BE%E3%81%97%E3%81%84%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E3%81%AE%E5%91%BD%E5%90%8D%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e備忘録： 個人的に悩ましいプロトコルの命名について\u003c/h1\u003e\n\u003cp data-sourcepos=\"195:1-196:138\"\u003e基本的なプロトコルの命名規則についてはある程度理解できましたが、\u003cbr\u003e\n「この場合はどのように命名したらいいのだろう」と個人的に悩ましいケースがいくつかありました。\u003c/p\u003e\n\u003cp data-sourcepos=\"198:1-198:132\"\u003e以下ではそうしたケースについて見ていき、個人的に考えたことを備忘録として記載しています。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"200:1-200:60\"\u003e\n\u003cspan id=\"アーキテクチャデザインパターンの命名\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E5%91%BD%E5%90%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eアーキテクチャ・デザインパターンの命名\u003c/h2\u003e\n\u003cp data-sourcepos=\"202:1-203:96\"\u003eアーキテクチャやデザインパターンで一般的に使用される名称が存在する場合は、\u003cbr\u003e\nその名称をプロトコル名として使用する方針が良いかと考えています。\u003c/p\u003e\n\u003cp data-sourcepos=\"205:1-207:97\"\u003e具体例は後述していますが、\u003cbr\u003e\n例えば MVVM アーキテクチャでは 「 \u003ccode\u003e**ViewModel\u003c/code\u003e 」プロトコルを定義し、\u003cbr\u003e\nMVP アーキテクチャでは「 \u003ccode\u003e**Presenter\u003c/code\u003e 」プロトコルを定義する方針です。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"209:1-209:10\"\u003e\n\u003cspan id=\"理由\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%90%86%E7%94%B1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e理由\u003c/h3\u003e\n\u003cp data-sourcepos=\"211:1-211:224\"\u003e理由としては、\u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/#use-terminology-well\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAPI Design Guidelines - Use Terminology Well\u003c/a\u003e の記述を参考にしており、意訳すると以下の通りです。\u003c/p\u003e\n\u003cul data-sourcepos=\"213:1-214:0\"\u003e\n\u003cli data-sourcepos=\"213:1-214:0\"\u003e専門用語や、広く知られている用語は、できるだけそのまま使うこと\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"215:1-215:132\"\u003e例えば、標準ライブラリにもデザインパターン由来と想像されるプロトコルの命名が見られます。\u003c/p\u003e\n\u003cul data-sourcepos=\"217:1-223:0\"\u003e\n\u003cli data-sourcepos=\"217:1-219:66\"\u003e\n\u003ccode\u003eUITableViewDelegate\u003c/code\u003e などの \u003ccode\u003e**Delegate\u003c/code\u003e プロトコル\n\u003cul data-sourcepos=\"218:5-219:66\"\u003e\n\u003cli data-sourcepos=\"218:5-219:66\"\u003eデリゲートパターン\n\u003cul data-sourcepos=\"219:9-219:66\"\u003e\n\u003cli data-sourcepos=\"219:9-219:66\"\u003e参考: \u003ca href=\"https://en.wikipedia.org/wiki/Delegation_pattern\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://en.wikipedia.org/wiki/Delegation_pattern\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"220:1-223:0\"\u003eCombine の \u003ccode\u003ePublisher\u003c/code\u003e / \u003ccode\u003eSubscriber\u003c/code\u003e プロトコル\n\u003cul data-sourcepos=\"221:5-223:0\"\u003e\n\u003cli data-sourcepos=\"221:5-223:0\"\u003ePublish–subscribe パターン\n\u003cul data-sourcepos=\"222:9-223:0\"\u003e\n\u003cli data-sourcepos=\"222:9-223:0\"\u003e参考: \u003ca href=\"https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"224:1-226:98\"\u003e例えば、\u003ccode\u003ePublisher\u003c/code\u003e という広く知られている名称を採用することで、\u003cbr\u003e\nこのプロトコルがどんな機能を持っているかを感覚で理解できること、\u003cbr\u003e\n同時に \u003ccode\u003eSubscriber\u003c/code\u003e プロトコルが存在することも推測できるかと思います。\u003c/p\u003e\n\u003cp data-sourcepos=\"228:1-228:191\"\u003eまた、広く知られている名称は Web で検索するとその元となっているパターンがすぐに調べられるので、コード理解の助けにもなりそうです。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"230:1-230:36\"\u003e\n\u003cspan id=\"具体例-アーキテクチャ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E4%BE%8B-%E3%82%A2%E3%83%BC%E3%82%AD%E3%83%86%E3%82%AF%E3%83%81%E3%83%A3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e具体例: アーキテクチャ\u003c/h3\u003e\n\u003cul data-sourcepos=\"232:1-243:0\"\u003e\n\u003cli data-sourcepos=\"232:1-234:35\"\u003eMVP\n\u003cul data-sourcepos=\"233:5-234:35\"\u003e\n\u003cli data-sourcepos=\"233:5-233:30\"\u003e\n\u003ccode\u003e**View\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"234:5-234:35\"\u003e\n\u003ccode\u003e**Presenter\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"235:1-237:35\"\u003eMVVM\n\u003cul data-sourcepos=\"236:5-237:35\"\u003e\n\u003cli data-sourcepos=\"236:5-236:30\"\u003e\n\u003ccode\u003e**View\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"237:5-237:35\"\u003e\n\u003ccode\u003e**ViewModel\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"238:1-243:0\"\u003eVIPER\n\u003cul data-sourcepos=\"239:5-243:0\"\u003e\n\u003cli data-sourcepos=\"239:5-239:30\"\u003e\n\u003ccode\u003e**View\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"240:5-240:35\"\u003e\n\u003ccode\u003e**Presenter\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"241:5-241:32\"\u003e\n\u003ccode\u003e**Router\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003cli data-sourcepos=\"242:5-243:0\"\u003e\n\u003ccode\u003e**Interactor\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"244:1-244:39\"\u003e\n\u003cspan id=\"具体例-デザインパターン\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%85%B7%E4%BD%93%E4%BE%8B-%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e具体例: デザインパターン\u003c/h3\u003e\n\u003cul data-sourcepos=\"246:1-252:0\"\u003e\n\u003cli data-sourcepos=\"246:1-247:36\"\u003eRepository パターン\n\u003cul data-sourcepos=\"247:5-247:36\"\u003e\n\u003cli data-sourcepos=\"247:5-247:36\"\u003e\n\u003ccode\u003e**Repository\u003c/code\u003e プロトコル\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"248:1-252:0\"\u003eIterator パターン\n\u003cul data-sourcepos=\"249:5-252:0\"\u003e\n\u003cli data-sourcepos=\"249:5-252:0\"\u003e標準ライブラリの例)\n\u003cul data-sourcepos=\"250:9-252:0\"\u003e\n\u003cli data-sourcepos=\"250:9-250:28\"\u003e\u003ccode\u003eIteratorProtocol\u003c/code\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"251:9-252:0\"\u003e\u003ccode\u003eAsyncIteratorProtocol\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 data-sourcepos=\"253:1-253:60\"\u003e\n\u003cspan id=\"プロトコル名と準拠型名が同じになる場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB%E5%90%8D%E3%81%A8%E6%BA%96%E6%8B%A0%E5%9E%8B%E5%90%8D%E3%81%8C%E5%90%8C%E3%81%98%E3%81%AB%E3%81%AA%E3%82%8B%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロトコル名と準拠型名が同じになる場合\u003c/h2\u003e\n\u003cp data-sourcepos=\"255:1-255:84\"\u003e例えば、MVVM で「メイン画面の ViewModel」を作成するとします。\u003c/p\u003e\n\u003cp data-sourcepos=\"257:1-258:83\"\u003eこの ViewModel のプロトコルと準拠型を定義しようとすると、\u003cbr\u003e\n両方 \u003ccode\u003eMainViewModel\u003c/code\u003e という名前になってしまうかもしれません。\u003c/p\u003e\n\u003cp data-sourcepos=\"260:1-261:66\"\u003eこの場合、どのようにして名前の競合を防ぐことができるでしょうか？\u003cbr\u003e\n例えば以下のようなアプローチが考えられます。\u003c/p\u003e\n\u003cul data-sourcepos=\"263:1-268:0\"\u003e\n\u003cli data-sourcepos=\"263:1-264:25\"\u003e準拠型名の接尾辞に任意の文字列をつける\n\u003cul data-sourcepos=\"264:5-264:25\"\u003e\n\u003cli data-sourcepos=\"264:5-264:25\"\u003e\u003ccode\u003eMainViewModelImpl\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"265:1-268:0\"\u003e準拠型の接頭辞に任意の文字列をつける\n\u003cul data-sourcepos=\"266:5-268:0\"\u003e\n\u003cli data-sourcepos=\"266:5-266:24\"\u003e\u003ccode\u003eAppMainViewModel\u003c/code\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"267:5-268:0\"\u003e\u003ccode\u003eTYMainViewModel\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"269:1-269:87\"\u003e悩ましいですが、私は以下の命名で区別しようと考えています。\u003c/p\u003e\n\u003cul data-sourcepos=\"271:1-274:0\"\u003e\n\u003cli data-sourcepos=\"271:1-274:0\"\u003e\n\u003cstrong\u003eプロトコルの末尾に \u003ccode\u003eProtocol\u003c/code\u003e をつける\u003c/strong\u003e\n\u003cul data-sourcepos=\"272:5-274:0\"\u003e\n\u003cli data-sourcepos=\"272:5-272:29\"\u003e\u003ccode\u003eMainViewModelProtocol\u003c/code\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"273:5-274:0\"\u003e準拠型は \u003ccode\u003eMainViewModel\u003c/code\u003e など\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"275:1-275:10\"\u003e\n\u003cspan id=\"理由-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%90%86%E7%94%B1-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e理由\u003c/h3\u003e\n\u003cp data-sourcepos=\"277:1-277:33\"\u003e理由は以下の通りです。\u003c/p\u003e\n\u003cul data-sourcepos=\"279:1-287:0\"\u003e\n\u003cli data-sourcepos=\"279:1-280:172\"\u003e\n\u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAPI Design Guidelines\u003c/a\u003e にも、プロトコル名の末尾に \u003ccode\u003eProtocol\u003c/code\u003e をつけて衝突を回避する例が記載されていること\n\u003cul data-sourcepos=\"280:5-280:172\"\u003e\n\u003cli data-sourcepos=\"280:5-280:172\"\u003e\n\u003cblockquote data-sourcepos=\"280:7-280:172\"\u003e\n\u003cp data-sourcepos=\"280:9-280:172\"\u003eIf an associated type is so tightly bound to its protocol constraint that the protocol name is the role, avoid collision by appending Protocol to the protocol name:\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"281:1-287:0\"\u003e標準ライブラリのプロトコルにも末尾が \u003ccode\u003eProtocol\u003c/code\u003e の命名は見られること\n\u003cul data-sourcepos=\"282:5-287:0\"\u003e\n\u003cli data-sourcepos=\"282:5-287:0\"\u003e例）\n\u003cul data-sourcepos=\"283:9-287:0\"\u003e\n\u003cli data-sourcepos=\"283:9-284:42\"\u003e\n\u003ccode\u003eAsyncIteratorProtocol\u003c/code\u003e\n\u003cul data-sourcepos=\"284:13-284:42\"\u003e\n\u003cli data-sourcepos=\"284:13-284:42\"\u003e準拠型は \u003ccode\u003eAsyncIterator\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"285:9-287:0\"\u003e\n\u003ccode\u003eNSObjectProtocol\u003c/code\u003e\n\u003cul data-sourcepos=\"286:13-287:0\"\u003e\n\u003cli data-sourcepos=\"286:13-287:0\"\u003e準拠型は \u003ccode\u003eNSObject\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"288:1-289:90\"\u003e型情報（\u003ccode\u003eProtocol\u003c/code\u003e）の繰り返しになってしまい少し微妙な気もしますが、\u003cbr\u003e\n他に良いアプローチが見つかるまではこの方法で検討しています。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"291:1-291:38\"\u003e\n\u003cspan id=\"colorprovider-vs-colorproviding\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#colorprovider-vs-colorproviding\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eColorProvider\u003c/code\u003e vs \u003ccode\u003eColorProviding\u003c/code\u003e\n\u003c/h2\u003e\n\u003cp data-sourcepos=\"293:1-294:115\"\u003e参考文献で意見が分かれていた「色を提供する」というプロトコルについて考えてみます。\u003cbr\u003e\nこのプロトコルの命名として、参考文献では以下の2パターンが提示されていました。\u003c/p\u003e\n\u003cul data-sourcepos=\"296:1-305:0\"\u003e\n\u003cli data-sourcepos=\"296:1-299:160\"\u003e\n\u003ccode\u003eColorProvider\u003c/code\u003e\n\u003cul data-sourcepos=\"297:5-299:160\"\u003e\n\u003cli data-sourcepos=\"297:5-299:160\"\u003e「色の提供者である」とみなし、名詞で命名\n\u003cul data-sourcepos=\"298:9-299:160\"\u003e\n\u003cli data-sourcepos=\"298:9-299:160\"\u003eこの命名を採用している参考文献\n\u003cul data-sourcepos=\"299:13-299:160\"\u003e\n\u003cli data-sourcepos=\"299:13-299:160\"\u003e\u003ca href=\"https://www.swiftbysundell.com/articles/different-categories-of-swift-protocols/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eThe different categories of Swift protocols | Swift by Sundell\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"300:1-305:0\"\u003e\n\u003ccode\u003eColorProviding\u003c/code\u003e\n\u003cul data-sourcepos=\"301:5-305:0\"\u003e\n\u003cli data-sourcepos=\"301:5-301:57\"\u003e「色を提供する」機能を持つとみなす\u003c/li\u003e\n\u003cli data-sourcepos=\"302:5-305:0\"\u003e準拠型自身が「色を提供する主体」とみなし、「ing」で命名\n\u003cul data-sourcepos=\"303:9-305:0\"\u003e\n\u003cli data-sourcepos=\"303:9-305:0\"\u003eこの命名を採用している参考文献\n\u003cul data-sourcepos=\"304:13-305:0\"\u003e\n\u003cli data-sourcepos=\"304:13-305:0\"\u003e\u003ca href=\"https://dev.srdanstanic.com/swift-protocol-types-and-naming/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSwift protocol naming guidelines with examples\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"306:1-307:71\"\u003eどの命名を採用するかはプロジェクトの方針次第で絶対的な正解はないと思いますが、\u003cbr\u003e\n個人的には \u003ccode\u003eColorProvider\u003c/code\u003e が良いかなと考えています。\u003c/p\u003e\n\u003cp data-sourcepos=\"309:1-309:42\"\u003e理由としては以下の通りです。\u003c/p\u003e\n\u003cul data-sourcepos=\"311:1-316:0\"\u003e\n\u003cli data-sourcepos=\"311:1-312:327\"\u003e\n\u003ccode\u003eProvider\u003c/code\u003e という名称は広く知られていると思われること\n\u003cul data-sourcepos=\"312:5-312:327\"\u003e\n\u003cli data-sourcepos=\"312:5-312:327\"\u003e先述した「\u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/#use-terminology-well\" rel=\"nofollow noopener\" target=\"_blank\"\u003eAPI Design Guidelines - Use Terminology Well\u003c/a\u003e」 の「専門用語はそのまま使う」と同じ考え方で、Provider は広く知られている用語とみなし、そのまま Provider プロトコルとして命名\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"313:1-316:0\"\u003e公式に \u003ca href=\"https://github.com/apple/swift-package-manager/blob/00a781262befd88779a42b5d83b6a5259d211f98/Sources/SourceControl/Repository.swift#L78\" rel=\"nofollow noopener\" target=\"_blank\"\u003eRepositoryProvider\u003c/a\u003e というプロトコルがあること\n\u003cul data-sourcepos=\"314:5-316:0\"\u003e\n\u003cli data-sourcepos=\"314:5-316:0\"\u003eProvider プロトコルは公式でも使用されていることから不自然な命名ではないと判断できます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 data-sourcepos=\"317:1-317:14\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\u003cp data-sourcepos=\"319:1-319:117\"\u003eプロトコル名について言及されているWeb上の記事が多くあり、大変参考になりました。\u003c/p\u003e\n\u003cp data-sourcepos=\"321:1-322:87\"\u003eただ、記事によって解釈が異なっている部分もあったりするため、\u003cbr\u003e\n「絶対的な正解はこれだ！」というものはなさそうに思います。\u003c/p\u003e\n\u003cp data-sourcepos=\"324:1-324:141\"\u003eなので、どういう命名にするかは自分のプロジェクトの方針に応じて柔軟に変えていければと思います。\u003c/p\u003e\n\u003cp data-sourcepos=\"326:1-327:67\"\u003e本記事も私の主観でまとめたものであり、解釈がおかしい恐れも多分にあると思いますが、\u003cbr\u003e\nその際はご指摘いただけますと幸いです🙇‍♂️\u003c/p\u003e\n\u003ch1 data-sourcepos=\"329:1-329:14\"\u003e\n\u003cspan id=\"参考文献\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考文献\u003c/h1\u003e\n\u003cul data-sourcepos=\"331:1-335:98\"\u003e\n\u003cli data-sourcepos=\"331:1-331:97\"\u003e\u003ca href=\"https://www.swift.org/documentation/api-design-guidelines/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSwift.org - API Design Guidelines\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"332:1-332:134\"\u003e\u003ca href=\"https://santoshbotre01.medium.com/naming-a-protocol-in-swift-b0d933b44ddc\" rel=\"nofollow noopener\" target=\"_blank\"\u003eNaming a Protocol in Swift. | by Santosh Botre | Medium\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"333:1-333:148\"\u003e\u003ca href=\"https://www.swiftbysundell.com/articles/different-categories-of-swift-protocols/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eThe different categories of Swift protocols | Swift by Sundell\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"334:1-334:112\"\u003e\u003ca href=\"https://dev.srdanstanic.com/swift-protocol-types-and-naming/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eSwift protocol naming guidelines with examples\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"335:1-335:98\"\u003e\u003ca href=\"https://forums.swift.org/t/protocol-naming/59453\" rel=\"nofollow noopener\" target=\"_blank\"\u003eProtocol naming - Using Swift - Swift Forums\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n",
      "body": "# はじめに\n\nSwift でコードを書いていると Protocol を使う場面は多いですが、\nProtocol にどのような名前をつけるべきか、今までよく悩んできました。\n\n標準ライブラリでよく見られる「 `Equatable` 」や「 `Hashable` 」のような、\n「 `**able` 」 Protocol はどういう時に定義すべきなのかも曖昧だったので、\n一般的な命名パターンをある程度把握しておきたいと思いました。\n\nそこで本記事では、一般的にどのように Protocol の命名がなされているのかを Web で調査して、自分なりに整理してみました。\n\n## 公式ドキュメントの記述\n\n[API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/) には、プロトコルの命名規則についてはそれほど多く語られておらず、\n主な記述は以下の数行にまとめられています。\n\n\u003e * Protocols that describe what something is should read as nouns (e.g. Collection).  \n\u003e **何かが何であるかを記述するプロトコルは、名詞として読むべきである（例：`Collection`）**\n\n\u003e * Protocols that describe a capability should be named using the suffixes able, ible, or ing (e.g. Equatable, ProgressReporting).\n\u003e **能力を記述するプロトコルは、接尾辞able、ible、またはingを使用して命名されるべきである（例：`Equatable`、`ProgressReporting`）**\n\n短い説明ではありますが、プロトコルに名前をつける際には基本的に\n上記ガイドラインで説明されているいずれかのパターンに分類できると思います。\n\nそれぞれのパターンについて、以下で詳しく見ていきます。\n\n# 基本的なプロトコル命名規則の分類\n\n上述した [API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/) の定義に基づくと、\nプロトコルの命名規則は以下の3パターンに分類できます。\n\n1. プロトコル名が名詞になるパターン\n2. プロトコル名の末尾が「ing」になるパターン\n3. プロトコル名の末尾が「able」または「ible」になるパターン\n\nそれぞれのパターンがどのようなケースで適用されるかについて、\n具体例とともに以下に記載します。\n\n## 1. プロトコル名が名詞になるパターン\n\n### 適用条件\n\n* 準拠型が「何であるか」を表すプロトコルは、名詞で命名する\n\nもう少し具体的にいうと、以下のように表現できると思います。\n\n* 準拠型を「カテゴリ」や「グループ」等に分類できる場合、その分類名（名詞）をプロトコル名とする\n\n### 標準ライブラリの例\n\n* `Sequence`\n* `MTLDevice`\n* SwiftUI の `View`, `Shape` など\n\n### 具体例\n\n**「動物であること」を表すプロトコル**\n\n```swift\n// 「動物であること」を表すプロトコル\nprotocol Animal {\n\tfunc eat(_ food: Eatable)\n}\nstruct Dog: Animal { ... }\nstruct Cat: Animal { ... }\n```\n\n**「車であること」を表すプロトコル**\n\n```swift\n// 「車であること」を表すプロトコル\nprotocol Car {\n\tvar fuelLevel: Int { get }\n}\nstruct Prius: Car { ... }\nstruct Crown: Car { ... }\n```\n\n**「BLEデバイスであること」を表すプロトコル**\n\n```swift\n// 「BLEデバイスであること」を表すプロトコル\nprotocol BLEDevice {\n\tvar batteryLevel: Int { get }\n\tfunc connect(_ device: BLEDevice)\n}\nstruct BLEEarphone: BLEDevice { ... }\nstruct BLESpeaker: BLEDevice { ... }\n```\n\n**「APIリクエストであること」を表すプロトコル**\n\n```swift\n// 「APIリクエストであること」を表すプロトコル\nprotocol APIRequest {\n\tvar httpHeaders: [String: String] { get }\n\tvar httpMethod: String { get }\n}\nstruct LoginAPIRequest: APIRequest { ... }\n```\n\n## 2. プロトコル名の末尾が「ing」になるパターン\n\n### 適用条件\n\n以下条件の両方に合致する場合、このパターンを適用します。\n\n* プロトコルが「能力」や「機能」を説明する場合\n* プロトコルの準拠型が「 **処理を実行する主体（Subject）** 」である場合\n\n### 標準ライブラリの例\n\n* `ProgressReporting`\n\n標準ライブラリには「ing」で終わるプロトコルはあまりなさそうでした。\n\n### 具体例\n\n**「デバッグログを出力する」機能を表すプロトコル**\n\n```swift\n// 「デバッグログを出力する」機能を表すプロトコル\nprotocol DebugLogging {\n\tfunc log(_ message: String)\n}\n// 準拠型自身が「ログを出力する」処理を行う主体である\nstruct DebugLogger: DebugLogging { ... }\n```\n\n**「音声を録音する」機能を表すプロトコル**\n\n```swift\n// 「音声を録音する」という機能を表すプロトコル\nprotocol VoiceRecording {\n\tfunc startRecording()\n\tfunc stopRecording()\n}\n// 準拠型自身が「音声を録音する」処理を行う主体である\nstruct VoiceRecorder: VoiceRecording { ... }\n```\n\n\n## 3. プロトコル名の末尾が「able」または「ible」になるパターン\n\n### 適用条件\n\n以下条件の両方に合致する場合、このパターンを適用します。\n\n* プロトコルが「能力」や「機能」を説明する場合\n* プロトコルの準拠型が「 **処理される対象（Object）** 」である場合\n\n### 標準ライブラリの例\n\n- `Equatable`\n    - 「値が等しいか比較できる」という能力を表すプロトコル\n    - 自身が「等しいか比較される」対象である\n- `Hashable`\n    - 「ハッシュ値を生成できる」という能力を表すプロトコル\n    - 自身が「ハッシュ値を生成される」対象である\n- `CustomStringConvertible`\n    - 「カスタム文字列に変換できる」という能力を表すプロトコル\n    - 自身が「カスタム文字列に変換される」対象である\n\n### 具体例\n\n**「リセットできる」能力を表すプロトコル**\n\n```swift\n// 「リセットできる」能力を表すプロトコル\nprotocol Resettable {\n\tmutating func reset()\n}\n// 準拠型自身が「リセットされる」対象である\nstruct AccountSettings: Resettable { ... }\n```\n\n**「食べることができる」能力を表すプロトコル**\n\n```swift\n// 「食べることができる」能力を表すプロトコル\nprotocol Eatable {\n\tvar kcal: Int { get }\n}\n// 準拠型自身が「食べられる」対象である\nstruct Apple: Eatable { ... }\nstruct Peach: Eatable { ... }\n// Eatable なオブジェクトは、先述した Animal によって食べられる\nlet dog = Dog()\ndog.eat(Peach())\n```\n\n# 備忘録： 個人的に悩ましいプロトコルの命名について\n\n基本的なプロトコルの命名規則についてはある程度理解できましたが、\n「この場合はどのように命名したらいいのだろう」と個人的に悩ましいケースがいくつかありました。\n\n以下ではそうしたケースについて見ていき、個人的に考えたことを備忘録として記載しています。\n\n## アーキテクチャ・デザインパターンの命名\n\nアーキテクチャやデザインパターンで一般的に使用される名称が存在する場合は、\nその名称をプロトコル名として使用する方針が良いかと考えています。\n\n具体例は後述していますが、\n例えば MVVM アーキテクチャでは 「 `**ViewModel` 」プロトコルを定義し、 \nMVP アーキテクチャでは「 `**Presenter` 」プロトコルを定義する方針です。\n\n### 理由\n\n理由としては、[API Design Guidelines - Use Terminology Well](https://www.swift.org/documentation/api-design-guidelines/#use-terminology-well) の記述を参考にしており、意訳すると以下の通りです。\n\n* 専門用語や、広く知られている用語は、できるだけそのまま使うこと\n\n例えば、標準ライブラリにもデザインパターン由来と想像されるプロトコルの命名が見られます。\n\n* `UITableViewDelegate` などの `**Delegate` プロトコル\n    * デリゲートパターン\n        * 参考: https://en.wikipedia.org/wiki/Delegation_pattern\n* Combine の `Publisher` / `Subscriber` プロトコル\n    * Publish–subscribe パターン\n        * 参考: https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern\n\n例えば、`Publisher` という広く知られている名称を採用することで、\nこのプロトコルがどんな機能を持っているかを感覚で理解できること、\n同時に `Subscriber` プロトコルが存在することも推測できるかと思います。\n\nまた、広く知られている名称は Web で検索するとその元となっているパターンがすぐに調べられるので、コード理解の助けにもなりそうです。\n\n### 具体例: アーキテクチャ\n\n* MVP\n    * `**View` プロトコル\n    * `**Presenter` プロトコル\n* MVVM\n    * `**View` プロトコル\n    * `**ViewModel` プロトコル\n* VIPER\n    * `**View` プロトコル\n    * `**Presenter` プロトコル\n    * `**Router` プロトコル\n    * `**Interactor` プロトコル\n\n### 具体例: デザインパターン\n\n* Repository パターン\n    * `**Repository` プロトコル\n* Iterator パターン\n    * 標準ライブラリの例)\n        * `IteratorProtocol`\n        * `AsyncIteratorProtocol`\n\n## プロトコル名と準拠型名が同じになる場合\n\n例えば、MVVM で「メイン画面の ViewModel」を作成するとします。\n\nこの ViewModel のプロトコルと準拠型を定義しようとすると、\n両方 `MainViewModel` という名前になってしまうかもしれません。\n\nこの場合、どのようにして名前の競合を防ぐことができるでしょうか？\n例えば以下のようなアプローチが考えられます。\n\n* 準拠型名の接尾辞に任意の文字列をつける\n    * `MainViewModelImpl`\n* 準拠型の接頭辞に任意の文字列をつける\n    * `AppMainViewModel`\n    * `TYMainViewModel`\n\n悩ましいですが、私は以下の命名で区別しようと考えています。\n\n* **プロトコルの末尾に `Protocol` をつける**\n    * `MainViewModelProtocol`\n    * 準拠型は `MainViewModel` など\n\n### 理由\n\n理由は以下の通りです。\n\n* [API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/) にも、プロトコル名の末尾に `Protocol` をつけて衝突を回避する例が記載されていること\n    * \u003e If an associated type is so tightly bound to its protocol constraint that the protocol name is the role, avoid collision by appending Protocol to the protocol name:\n* 標準ライブラリのプロトコルにも末尾が `Protocol` の命名は見られること\n    * 例）\n        * `AsyncIteratorProtocol`\n            * 準拠型は `AsyncIterator`\n        * `NSObjectProtocol`\n            * 準拠型は `NSObject`\n\n型情報（`Protocol`）の繰り返しになってしまい少し微妙な気もしますが、\n他に良いアプローチが見つかるまではこの方法で検討しています。\n\n## `ColorProvider` vs `ColorProviding`\n\n参考文献で意見が分かれていた「色を提供する」というプロトコルについて考えてみます。\nこのプロトコルの命名として、参考文献では以下の2パターンが提示されていました。\n\n* `ColorProvider`\n    * 「色の提供者である」とみなし、名詞で命名\n        * この命名を採用している参考文献\n            * [The different categories of Swift protocols | Swift by Sundell](https://www.swiftbysundell.com/articles/different-categories-of-swift-protocols/)\n* `ColorProviding`\n    * 「色を提供する」機能を持つとみなす\n    * 準拠型自身が「色を提供する主体」とみなし、「ing」で命名\n        * この命名を採用している参考文献\n            * [Swift protocol naming guidelines with examples](https://dev.srdanstanic.com/swift-protocol-types-and-naming/)\n\nどの命名を採用するかはプロジェクトの方針次第で絶対的な正解はないと思いますが、\n個人的には `ColorProvider` が良いかなと考えています。\n\n理由としては以下の通りです。\n\n* `Provider` という名称は広く知られていると思われること\n    * 先述した「[API Design Guidelines - Use Terminology Well](https://www.swift.org/documentation/api-design-guidelines/#use-terminology-well)」 の「専門用語はそのまま使う」と同じ考え方で、Provider は広く知られている用語とみなし、そのまま Provider プロトコルとして命名\n* 公式に [RepositoryProvider](https://github.com/apple/swift-package-manager/blob/00a781262befd88779a42b5d83b6a5259d211f98/Sources/SourceControl/Repository.swift#L78) というプロトコルがあること\n    * Provider プロトコルは公式でも使用されていることから不自然な命名ではないと判断できます\n\n\n# おわりに\n\nプロトコル名について言及されているWeb上の記事が多くあり、大変参考になりました。\n\nただ、記事によって解釈が異なっている部分もあったりするため、\n「絶対的な正解はこれだ！」というものはなさそうに思います。\n\nなので、どういう命名にするかは自分のプロジェクトの方針に応じて柔軟に変えていければと思います。\n\n本記事も私の主観でまとめたものであり、解釈がおかしい恐れも多分にあると思いますが、\nその際はご指摘いただけますと幸いです🙇‍♂️\n\n# 参考文献\n\n- [Swift.org - API Design Guidelines](https://www.swift.org/documentation/api-design-guidelines/)\n- [Naming a Protocol in Swift. | by Santosh Botre | Medium](https://santoshbotre01.medium.com/naming-a-protocol-in-swift-b0d933b44ddc)\n- [The different categories of Swift protocols | Swift by Sundell](https://www.swiftbysundell.com/articles/different-categories-of-swift-protocols/)\n- [Swift protocol naming guidelines with examples](https://dev.srdanstanic.com/swift-protocol-types-and-naming/)\n- [Protocol naming - Using Swift - Swift Forums](https://forums.swift.org/t/protocol-naming/59453)\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T15:47:17+09:00",
      "group": null,
      "id": "6b518680c1b9b9cab40b",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "iOS",
              "versions": []
          },
          {
              "name": "Protocol",
              "versions": []
          },
          {
              "name": "命名規則",
              "versions": []
          },
          {
              "name": "Swift",
              "versions": []
          }
      ],
      "title": "【Swift】Protocol の命名規則について調査した",
      "updated_at": "2023-10-28T15:47:17+09:00",
      "url": "https://qiita.com/tyomashin/items/6b518680c1b9b9cab40b",
      "user": {
          "description": null,
          "facebook_id": null,
          "followees_count": 7,
          "followers_count": 1,
          "github_login_name": null,
          "id": "tyomashin",
          "items_count": 3,
          "linkedin_id": null,
          "location": null,
          "name": "",
          "organization": null,
          "permanent_id": 179818,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/179818/profile-images/1685174408",
          "team_only": false,
          "twitter_screen_name": "neginegimaki",
          "website_url": null
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-3:164\"\u003ePyPyを使ってます。\u003cbr\u003e\nオーダーとしては、問題ないアルゴリズムなのに、TLEになってしまった問題がありました。\u003cbr\u003e\nやっぱりC++でないとだめなのかなぁ。と思ったんですが、試行錯誤した結果、ACする事ができたので、メモしておきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"5:1-5:6\"\u003e問題\u003c/p\u003e\n\u003cp data-sourcepos=\"7:1-7:49\"\u003e\u003ciframe id=\"qiita-embed-content__173748be9a62d40218f11c4badd97fcb\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__173748be9a62d40218f11c4badd97fcb\" data-content=\"https%3A%2F%2Fatcoder.jp%2Fcontests%2Fabc265%2Ftasks%2Fabc265_e\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cp data-sourcepos=\"9:1-11:61\"\u003eO(N^3)の計算量\u003cbr\u003e\nN=300、9000000=9*10^6\u003cbr\u003e\n制限時間が3秒なので、計算量の大きめの問題\u003c/p\u003e\n\u003ch1 data-sourcepos=\"13:1-13:26\"\u003e\n\u003cspan id=\"tleになったコード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#tle%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eTLEになったコード\u003c/h1\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"15:1-45:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eMOD\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e998244353\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eTII\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003ed\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eTII\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003exy\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"nc\"\u003eTII\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003e_\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e)])\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003ereturn \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003emove_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003emove_d\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003ed\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ed\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]))\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003edefaultdict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003edefaultdict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003em\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emove_d\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003exy\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                \u003cspan class=\"k\"\u003econtinue\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\n            \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e%=\u003c/span\u003e \u003cspan class=\"n\"\u003eMOD\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# print(count_pos)\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eans\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esum\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003evalues\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"n\"\u003eMOD\u003c/span\u003e\n\u003cspan class=\"nf\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eans\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch1 data-sourcepos=\"46:1-46:20\"\u003e\n\u003cspan id=\"対策前の結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AF%BE%E7%AD%96%E5%89%8D%E3%81%AE%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e対策前の結果\u003c/h1\u003e\n\u003cp data-sourcepos=\"48:1-48:121\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/b378d204a74ec487baf08c37a1e31c2c1340460d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3533323233352f38656239333637662d376266652d383562642d666333622d3838353931333662636263332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2F8eb9367f-7bfe-85bd-fc3b-8859136bcbc3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=fc278f84c1a1a6723c0a08be86dca5c9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/8eb9367f-7bfe-85bd-fc3b-8859136bcbc3.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2F8eb9367f-7bfe-85bd-fc3b-8859136bcbc3.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3d03a9d377aebda17f6588348e16f23c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch1 data-sourcepos=\"50:1-50:41\"\u003e\n\u003cspan id=\"関数呼び出しをインライン化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%96%A2%E6%95%B0%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E3%82%92%E3%82%A4%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%B3%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e関数呼び出しをインライン化\u003c/h1\u003e\n\u003cp data-sourcepos=\"52:1-53:42\"\u003ePyPyの関数呼び出しは遅いとよく聞きますが、まさにこれでした。\u003cbr\u003e\nインラインに書き換えました。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"diff_python\" data-sourcepos=\"55:1-64:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e     \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003edefaultdict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n     \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eitems\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n         \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003em\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emove_d\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n\u003cspan class=\"hdl\"\u003e\u003cspan class=\"o\"\u003e- \u003c/span\u003e           \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"hil\"\u003e\u003cspan class=\"o\"\u003e+ \u003c/span\u003e           \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003epos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003c/span\u003e             \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003exy\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                 \u003cspan class=\"k\"\u003econtinue\u003c/span\u003e\n             \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"66:1-67:102\"\u003eこれは効果が絶大でした。\u003cbr\u003e\nこの処理は、ループ一番中側なので、N^3回実行されます。為影響が大きい。\u003c/p\u003e\n\u003cp data-sourcepos=\"69:1-69:121\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/f7943eea52a1f73165c37331774aba8fd5f75fc6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3533323233352f35616666373463342d313166642d346332642d636232302d3162666563356661613432612e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2F5aff74c4-11fd-4c2d-cb20-1bfec5faa42a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=b5e73cbfe063f16f9ba00ef1f235e0d7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/5aff74c4-11fd-4c2d-cb20-1bfec5faa42a.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2F5aff74c4-11fd-4c2d-cb20-1bfec5faa42a.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=582dad945d7058f2c66fc58a4035a3fd 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"71:1-71:33\"\u003eしかし、あと一歩です。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"73:1-73:32\"\u003e\n\u003cspan id=\"辞書の参照回数の削減\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BE%9E%E6%9B%B8%E3%81%AE%E5%8F%82%E7%85%A7%E5%9B%9E%E6%95%B0%E3%81%AE%E5%89%8A%E6%B8%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e辞書の参照回数の削減\u003c/h1\u003e\n\u003cp data-sourcepos=\"75:1-75:96\"\u003e参照回数の減らし方は、コードをみていただいた方が早いと思います。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"diff_python\" data-sourcepos=\"77:1-86:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e             \u003cspan class=\"c1\"\u003e# next_pos = add(pos,m)\u003c/span\u003e\n             \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003exy\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n                 \u003cspan class=\"k\"\u003econtinue\u003c/span\u003e\n\u003cspan class=\"hdl\"\u003e\u003cspan class=\"o\"\u003e- \u003c/span\u003e           \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"hdl\"\u003e\u003cspan class=\"o\"\u003e- \u003c/span\u003e           \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e%=\u003c/span\u003e \u003cspan class=\"n\"\u003eMOD\u003c/span\u003e\n\u003c/span\u003e\u003cspan class=\"hil\"\u003e\u003cspan class=\"o\"\u003e+ \u003c/span\u003e           \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enext_pos\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"n\"\u003eMOD\u003c/span\u003e\n\u003c/span\u003e     \u003cspan class=\"n\"\u003ecount_pos\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enext_count_pos\u003c/span\u003e\n     \u003cspan class=\"c1\"\u003e# print(count_pos) \u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"87:1-87:121\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/6ffe8d8efe2f5083faa4d33b93ff2a0db18dc032/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3533323233352f61376336373762362d313635662d366238302d373161332d6133643466336464343339312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2Fa7c677b6-165f-6b80-71a3-a3d4f3dd4391.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ee53f5eb79e416045891e111fb584ff6\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/a7c677b6-165f-6b80-71a3-a3d4f3dd4391.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F532235%2Fa7c677b6-165f-6b80-71a3-a3d4f3dd4391.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=feeaca1534347c6d54a93a76ff91281a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"89:1-91:27\"\u003e辞書のアクセスはO(logN)。O(N)に比べれば小さいですが、実行回数の多い場合、無視できません。\u003cbr\u003e\n記述が楽なので、特に気にせず、2行にしてました。配列のアクセスだったらO(1)なので、誤差だったんですが、そうはいきませんでせいた。\u003cbr\u003e\n勉強になりました。\u003c/p\u003e\n\u003cp data-sourcepos=\"93:1-93:46\"\u003e実行時間は2043 msで余裕でクリア。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"95:1-95:46\"\u003e\n\u003cspan id=\"おまけdictdefultdictcounterの比較\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91dictdefultdictcounter%E3%81%AE%E6%AF%94%E8%BC%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおまけ　dict/defultdict/Counterの比較\u003c/h1\u003e\n\u003cp data-sourcepos=\"97:1-97:229\"\u003e辞書の参照回数を減らす。分かってしまえば当たり前の結果でしたが、これにたどり着く前に、defultdictが遅いのではないか？とおもい、このあたりも試行錯誤しました。\u003c/p\u003e\n\u003cp data-sourcepos=\"99:1-99:86\"\u003e同じ条件で、dict/defultdict/Counterを変えてみて測定した結果です。\u003c/p\u003e\n\u003ctable data-sourcepos=\"101:1-105:25\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"101:1-101:25\"\u003e\n\u003cth data-sourcepos=\"101:2-101:10\"\u003e変更点\u003c/th\u003e\n\u003cth data-sourcepos=\"101:12-101:24\"\u003e実行時間\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"103:1-103:13\"\u003e\n\u003ctd data-sourcepos=\"103:2-103:5\"\u003edict\u003c/td\u003e\n\u003ctd data-sourcepos=\"103:7-103:12\"\u003e2105ms\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"104:1-104:19\"\u003e\n\u003ctd data-sourcepos=\"104:2-104:11\"\u003edefultdict\u003c/td\u003e\n\u003ctd data-sourcepos=\"104:13-104:18\"\u003e2043ms\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"105:1-105:25\"\u003e\n\u003ctd data-sourcepos=\"105:2-105:17\"\u003eCounterに変更\u003c/td\u003e\n\u003ctd data-sourcepos=\"105:19-105:24\"\u003e2520ms\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp data-sourcepos=\"107:1-108:74\"\u003e上記の結果では、defultdictの方が速い結果になっていますが、ジャッジ毎のばらつきがあり、dictとdefultdictでは、有意な違いはなさそうです。\u003cbr\u003e\ndefultdictは無罪でした。Counterは20%程度遅いようでした。\u003c/p\u003e\n\u003cp data-sourcepos=\"110:1-110:146\"\u003edictに比べて、defultdictが速度的に不利になる事はなさそうなので、今後も気にせず使っていこうと思います。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"112:1-112:11\"\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\u003cp data-sourcepos=\"114:1-115:98\"\u003eTLEになった時は、計算量を見積もって、アルゴリズムに問題ないか確認するのが基本ですが\u003cbr\u003e\nPythonの場合、実行回数が多い（10^7くらいでしょうか)部分は次の点に注意\u003c/p\u003e\n\u003cul data-sourcepos=\"117:1-118:84\"\u003e\n\u003cli data-sourcepos=\"117:1-117:29\"\u003e関数を呼び出さない\u003c/li\u003e\n\u003cli data-sourcepos=\"118:1-118:84\"\u003e辞書の参照などO(logN)を不要に行わない。 %=　等の記述に注意\u003c/li\u003e\n\u003c/ul\u003e\n",
      "body": "PyPyを使ってます。\nオーダーとしては、問題ないアルゴリズムなのに、TLEになってしまった問題がありました。\nやっぱりC++でないとだめなのかなぁ。と思ったんですが、試行錯誤した結果、ACする事ができたので、メモしておきます。\n\n問題\n\nhttps://atcoder.jp/contests/abc265/tasks/abc265_e\n\nO(N^3)の計算量\nN=300、9000000=9*10^6\n制限時間が3秒なので、計算量の大きめの問題\n\n# TLEになったコード\n\n```python\nMOD = 998244353\n\nN,M = TII()\nd = TII()\nxy = set([TII() for _ in range(M)])\n\ndef add(a,b):\n    return (a[0]+b[0], a[1]+b[1])\n\nmove_d =[]\nfor i in range(3):\n    move_d.append((d[i*2],d[i*2+1]))\n\ncount_pos = defaultdict(int)\ncount_pos[(0,0)] = 1\nfor i in range(N):\n    next_count_pos = defaultdict(int)\n    for pos,val in count_pos.items():\n        for m in move_d:\n            next_pos = add(pos,m)\n            if next_pos in xy:\n                continue\n            next_count_pos[next_pos] += val\n            next_count_pos[next_pos] %= MOD\n    count_pos = next_count_pos\n    # print(count_pos)\n\nans = sum(count_pos.values()) % MOD\nprint(ans)\n```\n# 対策前の結果\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/8eb9367f-7bfe-85bd-fc3b-8859136bcbc3.png)\n\n# 関数呼び出しをインライン化\n\nPyPyの関数呼び出しは遅いとよく聞きますが、まさにこれでした。\nインラインに書き換えました。\n\n```diff_python\n     next_count_pos = defaultdict(int)\n     for pos,val in count_pos.items():\n         for m in move_d:\n-            next_pos = add(pos,m)\n+            next_pos = (pos[0]+m[0], pos[1]+m[1])\n             if next_pos in xy:\n                 continue\n             next_count_pos[next_pos] += val\n```\n\nこれは効果が絶大でした。\nこの処理は、ループ一番中側なので、N^3回実行されます。為影響が大きい。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/5aff74c4-11fd-4c2d-cb20-1bfec5faa42a.png)\n\nしかし、あと一歩です。\n\n# 辞書の参照回数の削減\n\n参照回数の減らし方は、コードをみていただいた方が早いと思います。\n\n```diff_python\n             # next_pos = add(pos,m)\n             if next_pos in xy:\n                 continue\n-            next_count_pos[next_pos] += val\n-            next_count_pos[next_pos] %= MOD\n+            next_count_pos[next_pos] = (next_count_pos[next_pos] + val) % MOD\n     count_pos = next_count_pos\n     # print(count_pos) \n```\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/532235/a7c677b6-165f-6b80-71a3-a3d4f3dd4391.png)\n\n辞書のアクセスはO(logN)。O(N)に比べれば小さいですが、実行回数の多い場合、無視できません。\n記述が楽なので、特に気にせず、2行にしてました。配列のアクセスだったらO(1)なので、誤差だったんですが、そうはいきませんでせいた。\n勉強になりました。\n\n実行時間は2043 msで余裕でクリア。\n\n# おまけ　dict/defultdict/Counterの比較\n\n辞書の参照回数を減らす。分かってしまえば当たり前の結果でしたが、これにたどり着く前に、defultdictが遅いのではないか？とおもい、このあたりも試行錯誤しました。\n\n同じ条件で、dict/defultdict/Counterを変えてみて測定した結果です。\n\n|変更点| 実行時間|\n|------|--------|\n|dict|2105ms|\n|defultdict|2043ms|\n|Counterに変更|2520ms|\n\n上記の結果では、defultdictの方が速い結果になっていますが、ジャッジ毎のばらつきがあり、dictとdefultdictでは、有意な違いはなさそうです。\ndefultdictは無罪でした。Counterは20%程度遅いようでした。\n\ndictに比べて、defultdictが速度的に不利になる事はなさそうなので、今後も気にせず使っていこうと思います。\n\n# まとめ\n\nTLEになった時は、計算量を見積もって、アルゴリズムに問題ないか確認するのが基本ですが\nPythonの場合、実行回数が多い（10^7くらいでしょうか)部分は次の点に注意\n\n- 関数を呼び出さない\n- 辞書の参照などO(logN)を不要に行わない。 %=　等の記述に注意\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T13:41:32+09:00",
      "group": null,
      "id": "5cf9a87b0fcbfce7a9a7",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Python",
              "versions": []
          },
          {
              "name": "AtCoder",
              "versions": []
          },
          {
              "name": "Pypy",
              "versions": []
          },
          {
              "name": "計算量",
              "versions": []
          }
      ],
      "title": "PythonでTLEした時に、Pythonだから無理と諦める前に試す事",
      "updated_at": "2023-10-28T13:41:32+09:00",
      "url": "https://qiita.com/GeekMasahiro/items/5cf9a87b0fcbfce7a9a7",
      "user": {
          "description": "コンピュータの性能が向上し、クラウド化し、ソフトだけでいろいろそうな時代ですが、新しいものを作るには、ハードとソフトのバランスのとれた設計が必要と思っています。\r\nハードウエア、ソフトウエア、趣味の電子工作のネタをつぶやく予定です。\r\n電源回路を作るのも、PythonでAIを実現するのも好き。新しいものを作っていきたい！",
          "facebook_id": "",
          "followees_count": 3,
          "followers_count": 23,
          "github_login_name": "masahiro-999",
          "id": "GeekMasahiro",
          "items_count": 96,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 532235,
          "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/532235/4e80b97bb4c6fae16213999542aaa9214ef1ada1/x_large.png?1687065823",
          "team_only": false,
          "twitter_screen_name": "GeekMasahiro",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"2:1-2:42\"\u003e　どうも、カーブミラーです。\u003c/p\u003e\n\u003cp data-sourcepos=\"4:1-4:93\"\u003e　今回は、イメージからプロンプト作成できるサイトのご紹介です。\u003c/p\u003e\n\u003cdiv data-sourcepos=\"6:1-10:3\" class=\"note info\"\u003e\n\u003cspan class=\"fa fa-fw fa-check-circle\"\u003e\u003c/span\u003e\u003cdiv\u003e\n\u003cp data-sourcepos=\"7:1-9:48\"\u003e本記事は、ChatGPT（無料版）で\u003cbr\u003e\n行なっております。GPT4での確認\u003cbr\u003e\nはできておりません。あしからず。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"12:1-14:30\"\u003e　ChatGPT＋DALL-E3の\u003cbr\u003e\n　　組み合わせは、\u003cbr\u003e\n　　　羨ましいです。\u003c/p\u003e\n\u003cp data-sourcepos=\"16:1-20:51\"\u003e　私は、\u003cbr\u003e\n　　無料版なので、\u003cbr\u003e\n　　　人が使っているのを\u003cbr\u003e\n　　　　指を咥えて、\u003cbr\u003e\n　　　　　見ているしかありません。\u003c/p\u003e\n\u003cp data-sourcepos=\"22:1-25:51\"\u003e　とはいえ、\u003cbr\u003e\n　　MicrosoftBing＋ImageCreatorも\u003cbr\u003e\n　　　そこそこに使える、と\u003cbr\u003e\n　　　　言えたら、いいのですが……\u003c/p\u003e\n\u003cp data-sourcepos=\"27:1-29:30\"\u003e　画像解析は、\u003cbr\u003e\n　　いろんな理由から\u003cbr\u003e\n　　　負けています。\u003c/p\u003e\n\u003cp data-sourcepos=\"31:1-32:30\"\u003e　まぁ、理由は、\u003cbr\u003e\n　　押して図るべし。\u003c/p\u003e\n\u003cp data-sourcepos=\"34:1-37:51\"\u003e　また、\u003cbr\u003e\n　　GoogleBardも\u003cbr\u003e\n　　　画像を取り込めますが、\u003cbr\u003e\n　　　　人物画像は、削除されます。\u003c/p\u003e\n\u003cp data-sourcepos=\"39:1-40:30\"\u003e　そんなこんなで、\u003cbr\u003e\n　　困っていました。\u003c/p\u003e\n\u003chr data-sourcepos=\"41:1-41:3\"\u003e\n\u003cp data-sourcepos=\"42:1-46:59\"\u003e　ネットで\u003cbr\u003e\n　　探して、\u003cbr\u003e\n　　　見つけたのが\u003cbr\u003e\n　　　　今回のサイトです。\u003cbr\u003e\n\u003ca href=\"https://replicate.com/methexis-inc/img2prompt\" rel=\"nofollow noopener\" target=\"_blank\"\u003eimg2prompt\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"48:1-49:30\"\u003e　これは、\u003cbr\u003e\n　　無料で使えます。\u003c/p\u003e\n\u003cp data-sourcepos=\"51:1-55:45\"\u003e　カメラ画像や\u003cbr\u003e\n　　画像ファイルを\u003cbr\u003e\n　　　アップして、\u003cbr\u003e\n　　　　Submitするだけで、\u003cbr\u003e\n　　　　　Promptが作成されます。\u003c/p\u003e\n\u003cp data-sourcepos=\"57:1-61:39\"\u003e　そのPromptを\u003cbr\u003e\n　　画像生成AIに\u003cbr\u003e\n　　　食わせれば、\u003cbr\u003e\n　　　　元画像に似た画像が\u003cbr\u003e\n　　　　　生成されるはず。\u003c/p\u003e\n\u003cp data-sourcepos=\"63:1-64:33\"\u003e　では、\u003cbr\u003e\n　　やってみましょう。\u003c/p\u003e\n\u003chr data-sourcepos=\"65:1-65:3\"\u003e\n\u003cp data-sourcepos=\"66:1-69:156\"\u003e　まずは、\u003cbr\u003e\n　　こちらの画像を\u003cbr\u003e\n　　　アップします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e1225beb3936ae4f04c041963f3faa6aa04c5af7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f333435373233382f31393232613530342d373436302d623136312d346132332d6261666461613735653263372e6a706567\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F3457238%2F1922a504-7460-b161-4a23-bafdaa75e2c7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=833533ab677b19ca9e03d44ea0d459a9\" alt=\"_89d165f4-225b-4a37-83b9-392523432792.jpeg\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3457238/1922a504-7460-b161-4a23-bafdaa75e2c7.jpeg\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F3457238%2F1922a504-7460-b161-4a23-bafdaa75e2c7.jpeg?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d66ca2bfa97b3ab18450eb5a94fe3269 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"71:1-72:27\"\u003e　で、作成されたPromptは\u003cbr\u003e\n　　以下のとおり。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Text\" data-sourcepos=\"73:1-75:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e生成されたPrompt\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003ea girl wearing headphones and a t - shirt, cyberpunk art by Wang Yuanqi, cgsociety, futurism, anime aesthetic, future tech, anime\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"77:1-78:172\"\u003e　翻訳すると\u003cbr\u003e\n「ヘッドホンとTシャツを着た少女、王元基によるサイバーパンク・アート、CGS社会、未来派、アニメ美学、未来技術、アニメ」\u003c/p\u003e\n\u003cp data-sourcepos=\"80:1-80:45\"\u003e　ううむ、なんか違う気が……。\u003c/p\u003e\n\u003cp data-sourcepos=\"82:1-84:39\"\u003e　まぁ、\u003cbr\u003e\n　　ImageCreatorに\u003cbr\u003e\n　　　食べさせてみますか。\u003c/p\u003e\n\u003chr data-sourcepos=\"85:1-85:3\"\u003e\n\u003cp data-sourcepos=\"86:1-88:145\"\u003e　で、出来上がったのが\u003cbr\u003e\n　　こちら。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/b41b24eb1bdd0c70012a1395bfec39c7e45a7747/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f333435373233382f65373463316664302d343361382d353963662d336566352d3631393333613033303061382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F3457238%2Fe74c1fd0-43a8-59cf-3ef5-61933a0300a8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1ee76f16315c77e9a9487a4e59af7353\" alt=\"Screenshot_20231028-124739~2.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3457238/e74c1fd0-43a8-59cf-3ef5-61933a0300a8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F3457238%2Fe74c1fd0-43a8-59cf-3ef5-61933a0300a8.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=39310f60df5adf354b8d56aa603ef42e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"91:1-92:36\"\u003e　まぁ、\u003cbr\u003e\n　　こうなるでしょうね。\u003c/p\u003e\n\u003cp data-sourcepos=\"94:1-96:36\"\u003e　自分としては\u003cbr\u003e\n　　不満足ですか、\u003cbr\u003e\n　　　今回は、ここまで。\u003c/p\u003e\n",
      "body": "\n　どうも、カーブミラーです。\n\n　今回は、イメージからプロンプト作成できるサイトのご紹介です。\n\n:::note info\n本記事は、ChatGPT（無料版）で\n行なっております。GPT4での確認\nはできておりません。あしからず。\n:::\n\n　ChatGPT＋DALL-E3の\n　　組み合わせは、\n　　　羨ましいです。\n\n　私は、\n　　無料版なので、\n　　　人が使っているのを\n　　　　指を咥えて、\n　　　　　見ているしかありません。\n\n　とはいえ、\n　　MicrosoftBing＋ImageCreatorも\n　　　そこそこに使える、と\n　　　　言えたら、いいのですが……\n\n　画像解析は、\n　　いろんな理由から\n　　　負けています。\n\n　まぁ、理由は、\n　　押して図るべし。\n\n　また、\n　　GoogleBardも\n　　　画像を取り込めますが、\n　　　　人物画像は、削除されます。\n\n　そんなこんなで、\n　　困っていました。\n***\n　ネットで\n　　探して、\n　　　見つけたのが\n　　　　今回のサイトです。\n[img2prompt](https://replicate.com/methexis-inc/img2prompt)\n\n　これは、\n　　無料で使えます。\n\n　カメラ画像や\n　　画像ファイルを\n　　　アップして、\n　　　　Submitするだけで、\n　　　　　Promptが作成されます。\n\n　そのPromptを\n　　画像生成AIに\n　　　食わせれば、\n　　　　元画像に似た画像が\n　　　　　生成されるはず。\n\n　では、\n　　やってみましょう。\n***\n　まずは、\n　　こちらの画像を\n　　　アップします。\n![_89d165f4-225b-4a37-83b9-392523432792.jpeg](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3457238/1922a504-7460-b161-4a23-bafdaa75e2c7.jpeg)\n\n　で、作成されたPromptは\n　　以下のとおり。\n```Text:生成されたPrompt\na girl wearing headphones and a t - shirt, cyberpunk art by Wang Yuanqi, cgsociety, futurism, anime aesthetic, future tech, anime\n```\n\n　翻訳すると\n「ヘッドホンとTシャツを着た少女、王元基によるサイバーパンク・アート、CGS社会、未来派、アニメ美学、未来技術、アニメ」\n\n　ううむ、なんか違う気が……。\n\n　まぁ、\n　　ImageCreatorに\n　　　食べさせてみますか。\n***\n　で、出来上がったのが\n　　こちら。\n![Screenshot_20231028-124739~2.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/3457238/e74c1fd0-43a8-59cf-3ef5-61933a0300a8.png)\n\n\n　まぁ、\n　　こうなるでしょうね。\n\n　自分としては\n　　不満足ですか、\n　　　今回は、ここまで。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T13:15:58+09:00",
      "group": null,
      "id": "4ea80ff2f42ca1cdd66c",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "プロンプト",
              "versions": []
          },
          {
              "name": "ImageCreator",
              "versions": []
          },
          {
              "name": "img2prompt",
              "versions": []
          }
      ],
      "title": "【img2prompt＋Bing ImageCreator】イメージからプロンプト作成できる。",
      "updated_at": "2023-10-28T13:15:58+09:00",
      "url": "https://qiita.com/kabumira/items/4ea80ff2f42ca1cdd66c",
      "user": {
          "description": "カーブミラーです。東京在住。\r\n技術者ではありませんが、日曜プログラマぽいことをやったりしてます。\r\n最近は、ChatGPT（無料版を2023/02/11から）で、プロンプトの反応を楽しんでいます。\r\n名前の由来は、ひねくれ者なので、視点が人と違うことが多々あるようで、そこから来ています。やはりスマホでの記事書きは大変。PC欲しい。よろしく。",
          "facebook_id": "",
          "followees_count": 2,
          "followers_count": 6,
          "github_login_name": null,
          "id": "kabumira",
          "items_count": 157,
          "linkedin_id": "",
          "location": "東京都",
          "name": "カーブ ミラー",
          "organization": "",
          "permanent_id": 3457238,
          "profile_image_url": "https://lh3.googleusercontent.com/a/AAcHTtfJULBKsCQ3Q8nECE3t-nl7GIa3M3oY2veBa4Ujhg=s96-c",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"2:1-3:48\"\u003e軽い気持ちからOpenPoseに沼ってしまったのでその記録を残します。\u003cbr\u003e\n少しでもお役に立てれば幸いです。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"5:1-5:21\"\u003e\n\u003cspan id=\"私の作業環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%A7%81%E3%81%AE%E4%BD%9C%E6%A5%AD%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e私の作業環境\u003c/h2\u003e\n\u003cp data-sourcepos=\"7:1-8:41\"\u003eM1 macbook Air Sonoma14で\u003cbr\u003e\nUbuntu22.04にssh接続しています。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"10:1-10:9\"\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e準備\u003c/h2\u003e\n\u003cp data-sourcepos=\"11:1-14:48\"\u003e\u003cstrong\u003eUbuntu desktopで作業してる方はパス\u003c/strong\u003e\u003cbr\u003e\nリモートデスクトップをセットアップします。\u003cbr\u003e\n（のちにcmake-GUIを使う工程があるためです）\u003cbr\u003e\n自分はこの記事通りに進めました。\u003c/p\u003e\n\u003cp data-sourcepos=\"16:1-16:54\"\u003e\u003ciframe id=\"qiita-embed-content__e4632e2426bb4f593c8181ebfdc0cac9\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__e4632e2426bb4f593c8181ebfdc0cac9\" data-content=\"https%3A%2F%2Fqiita.com%2Fhoto17296%2Fitems%2F0e3e5bd407351fd2e6ca\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003ch2 data-sourcepos=\"18:1-18:19\"\u003e\n\u003cspan id=\"openpose-install\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#openpose-install\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eOpenPose install\u003c/h2\u003e\n\u003cp data-sourcepos=\"19:1-19:39\"\u003eまずは普通にgit cloneします。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"20:1-22:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003egit clone https://github.com/CMU-Perceptual-Computing-Lab/openpose.git\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"23:1-23:69\"\u003eそしたら移動してサブモジュールのupdateをします。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"24:1-27:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003ecd \u003c/span\u003eopenpose/\ngit submodule update \u003cspan class=\"nt\"\u003e--init\u003c/span\u003e \u003cspan class=\"nt\"\u003e--recursive\u003c/span\u003e \u003cspan class=\"nt\"\u003e--remote\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"28:1-30:122\"\u003eこんな感じになるかなと思います。\u003cbr\u003e\n(リモートデスクトップで作業しています)\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6d58ba0277334c59ba88c6beb534babaa32b170d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f33666664386434662d666638622d393531312d633633352d6265353433653962316334372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F3ffd8d4f-ff8b-9511-c635-be543e9b1c47.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=a1d1d9609713172281f60aacbab567f1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/3ffd8d4f-ff8b-9511-c635-be543e9b1c47.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F3ffd8d4f-ff8b-9511-c635-be543e9b1c47.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bafd3df4c14e02193f9679edd19b9daf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 data-sourcepos=\"32:1-32:16\"\u003e\n\u003cspan id=\"model-install\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model-install\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003emodel install\u003c/h2\u003e\n\u003cp data-sourcepos=\"33:1-34:134\"\u003e次にモデルのダウンロードを行います。\u003cbr\u003e\n本来ならbuildの時に自動でダウンロードされるのですが、今はサーバーが止まっているみたいです。\u003c/p\u003e\n\u003cp data-sourcepos=\"36:1-37:96\"\u003eオリジナルとサードパティ製のリンクがありました。\u003cbr\u003e\n今回は一番上のオリジナルモデルたちを使いました。お好みでどうぞ。\u003c/p\u003e\n\u003cp data-sourcepos=\"39:1-41:70\"\u003e\u003ca href=\"https://drive.google.com/file/d/1QCSxJZpnWvM00hx49CJ2zky7PWGzpcEh/edit\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://drive.google.com/file/d/1QCSxJZpnWvM00hx49CJ2zky7PWGzpcEh/edit\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://drive.google.com/file/d/1mqPEnqCk5bLMZ3XnfvxA4Dao7pj0TErr/edit\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://drive.google.com/file/d/1mqPEnqCk5bLMZ3XnfvxA4Dao7pj0TErr/edit\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://drive.google.com/file/d/1WvftDLLEwAxeO2A-n12g5IFtfLbMY9mG/edit\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://drive.google.com/file/d/1WvftDLLEwAxeO2A-n12g5IFtfLbMY9mG/edit\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"44:1-44:122\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/c03e8730ca2bd5e9e5130ab62c0375fff5db817d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f33316538653434382d623831322d313731372d343339362d3135396437336632643633362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F31e8e448-b812-1717-4396-159d73f2d636.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=68ce775b43148a59fbac43d9255884ec\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/31e8e448-b812-1717-4396-159d73f2d636.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F31e8e448-b812-1717-4396-159d73f2d636.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=bbd5738311ed6c5e45813740da1a130c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"46:1-47:122\"\u003eいろいろと警告が出てきますが、無視してzipをインストールします。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/d124e2b183eb82648c3bf79d2a680363adeebb5a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f31396135663834382d396630362d653963632d326531662d3030363732346463643139322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F19a5f848-9f06-e9cc-2e1f-006724dcd192.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=3ac06c54a54552eaf63f0aec4aecc694\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/19a5f848-9f06-e9cc-2e1f-006724dcd192.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F19a5f848-9f06-e9cc-2e1f-006724dcd192.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7b9c0365d4af9e09ced18bfe0ac5f0d2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"49:1-49:63\"\u003e解凍するとこんな感じになっているはずです。\u003c/p\u003e\n\u003cp data-sourcepos=\"51:1-51:122\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/6324ccd45b808ab1398eb3c196075279d8c71932/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f39643864623834632d653765332d643131382d323062352d6333643763366233666439312e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F9d8db84c-e7e3-d118-20b5-c3d7c6b3fd91.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=6696ea7d8137a6868f5d9f8a1d4388a9\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/9d8db84c-e7e3-d118-20b5-c3d7c6b3fd91.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F9d8db84c-e7e3-d118-20b5-c3d7c6b3fd91.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9ef3a4c3b86923c37b8e1fa2b49bbcaf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"53:1-54:122\"\u003eこれをOpenPose/modelsに入れていきます。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/c533bf6737d12cfe8fd8451d07af8b9fc3147a67/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f63663466363564332d396533392d376263622d393431342d3632626631386137636533392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fcf4f65d3-9e39-7bcb-9414-62bf18a7ce39.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9d58635de62784af562a0abe6baefc30\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/cf4f65d3-9e39-7bcb-9414-62bf18a7ce39.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fcf4f65d3-9e39-7bcb-9414-62bf18a7ce39.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=2562a7a49e66d70323addb8a324f1776 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"56:1-56:213\"\u003e次に、\u003ca href=\"https://github.com/CMU-Perceptual-Computing-Lab/openpose/blob/master/models/face/pose_deploy.prototxt\" rel=\"nofollow noopener\" target=\"_blank\"\u003egithub\u003c/a\u003e から各部位に対応するprototxtをダウンロードして配置していきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"58:1-58:122\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/5e947bc97f615e31085c63fd407d20df4de27287/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f62306165393232362d613835612d366438372d323361392d3539383834663639643738382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fb0ae9226-a85a-6d87-23a9-59884f69d788.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f9e95d10c1d4864fcd57e055c7c2e07b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/b0ae9226-a85a-6d87-23a9-59884f69d788.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fb0ae9226-a85a-6d87-23a9-59884f69d788.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=730aa5d24afd53cff1260606e59ebc54 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"60:1-61:122\"\u003e配置後のubuntuはこんな感じになるはず\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/70e6c365430bf9ff4b56ebb5a632217cb257178f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f31323333396465642d306161372d373535662d386164372d6563343365613836353331652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F12339ded-0aa7-755f-8ad7-ec43ea86531e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4c3c20b5227d037d86d0ed5cee765ebd\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/12339ded-0aa7-755f-8ad7-ec43ea86531e.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F12339ded-0aa7-755f-8ad7-ec43ea86531e.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7c6e3ea6f2d1b8b12c9f2cd2d0a054e7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 data-sourcepos=\"63:1-63:8\"\u003e\n\u003cspan id=\"build\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#build\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ebuild\u003c/h2\u003e\n\u003cp data-sourcepos=\"65:1-65:85\"\u003eここまでできたらOpenPose直下に、build用のフォルダを作ります。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"66:1-69:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003emkdir \u003c/span\u003ebuild/\n\u003cspan class=\"nb\"\u003ecd \u003c/span\u003ebuild/\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"70:1-71:36\"\u003eここからはGUI環境で実行します。\u003cbr\u003e\nまずはcmake-guiの起動です。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"72:1-74:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003ecmake-gui ..\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"75:1-76:122\"\u003e以下のような画面が立ち上がります。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/917b74e667338233b101beb26b2bf3926fffb1c5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f31363936636332302d326261302d663736302d336233382d3138653039343832666331632e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F1696cc20-2ba0-f760-3b38-18e09482fc1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=77c4eea2f1cc77d2a150907a16a69a66\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/1696cc20-2ba0-f760-3b38-18e09482fc1c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F1696cc20-2ba0-f760-3b38-18e09482fc1c.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0c015882b781825347feed3a3ce1d9d3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"78:1-79:122\"\u003e画面上部のところにopenposeのフォルダと、先ほど作ったbuildフォルダを入れます\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/154662737a6a6cb489fa21f7eef57cf5ac424c95/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f32333361363236352d613638302d643665342d383333642d6336303530346339633934662e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F233a6265-a680-d6e4-833d-c60504c9c94f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=1b597094cf95de6815f02e2e04284db1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/233a6265-a680-d6e4-833d-c60504c9c94f.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F233a6265-a680-d6e4-833d-c60504c9c94f.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a09fbb64a22c604af0ab84f786791f47 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"81:1-82:122\"\u003eフォルダを入れたら、画面下部のConfigureをポチ\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/8a8089a304668240521dcd8d2193cc71aa7a73a7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f63613663323364662d346363642d633738632d656535382d3830383162663331386265342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fca6c23df-4ccd-c78c-ee58-8081bf318be4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=188a50207c73758518fe4a4f91783388\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/ca6c23df-4ccd-c78c-ee58-8081bf318be4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2Fca6c23df-4ccd-c78c-ee58-8081bf318be4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=45797399652413146439891f5f41e87e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"84:1-85:122\"\u003eUnix Makefilesを選択してfinishをポチ\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/1c6e3a2794d456f05f9b182c0a11366bc9568212/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f30646337633830652d663562332d316633342d366462662d3331313435313166396631322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F0dc7c80e-f5b3-1f34-6dbf-3114511f9f12.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=cd287c76dcb157eb2891951f9420f92d\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/0dc7c80e-f5b3-1f34-6dbf-3114511f9f12.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F0dc7c80e-f5b3-1f34-6dbf-3114511f9f12.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=5f86a6149960dda8ebcf4fe6a41b4ab3 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"87:1-90:192\"\u003eそうすると、画面下部にこんな感じの案内が出てdoneとなるはずです。\u003cbr\u003e\nちなみに、先ほどGoogle Driveからモデルをダウンロード済みなので、\u003cbr\u003e\nalready existsになっています。\u003cbr\u003e\nどうやらmodelダウンロード用のサーバーが死んでいるみたいで、先ほどの手順を踏まないとmodelがダウンロードされず、OpenPoseが機能しません。\u003c/p\u003e\n\u003cp data-sourcepos=\"92:1-92:122\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/000cb9bd620f71fefa6c7c03016cf42dee8d11b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f313435353133342f35363365666162362d636231312d616435362d653535362d3231373437313235333337362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F563efab6-cb11-ad56-e556-217471253376.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=53e766e112b4e89445924479b4b4d1a7\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/563efab6-cb11-ad56-e556-217471253376.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F1455134%2F563efab6-cb11-ad56-e556-217471253376.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=697c59fed3f2258e323893d1f3fecbc5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"94:1-96:62\"\u003eこの時、画面上部で詳細が設定できますが、項目が多いので公式ページで確認しながら進めてください。デフォルトのままでも動きます。\u003cbr\u003e\n\u003ca href=\"https://github.com/CMU-Perceptual-Computing-Lab/openpose/blob/master/doc/installation/0_index.md\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/CMU-Perceptual-Computing-Lab/openpose/blob/master/doc/installation/0_index.md\u003c/a\u003e\u003cbr\u003e\nそしたらGenerateボタンを押してGUIを閉じます。\u003c/p\u003e\n\u003cp data-sourcepos=\"98:1-99:63\"\u003e最後にbuildディレクトリで以下のコマンドを実行してbuildは終了です\u003cbr\u003e\nちょっと時間かかりますんでお待ちください。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"100:1-102:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003emake \u003cspan class=\"nt\"\u003e-j\u003c/span\u003e\u003cspan class=\"sb\"\u003e`\u003c/span\u003e\u003cspan class=\"nb\"\u003enproc\u003c/span\u003e\u003cspan class=\"sb\"\u003e`\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch2 data-sourcepos=\"103:1-103:15\"\u003e\n\u003cspan id=\"動作確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e動作確認\u003c/h2\u003e\n\u003cp data-sourcepos=\"105:1-105:41\"\u003eopenpose直下で以下を実行します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"106:1-107:71\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e./build/examples/openpose/openpose.bin --video examples/media/video.avi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n",
      "body": "\n軽い気持ちからOpenPoseに沼ってしまったのでその記録を残します。\n少しでもお役に立てれば幸いです。\n\n## 私の作業環境\n\nM1 macbook Air Sonoma14で\nUbuntu22.04にssh接続しています。\n\n## 準備\n**Ubuntu desktopで作業してる方はパス**\nリモートデスクトップをセットアップします。\n（のちにcmake-GUIを使う工程があるためです）\n自分はこの記事通りに進めました。\n\nhttps://qiita.com/hoto17296/items/0e3e5bd407351fd2e6ca\n\n## OpenPose install\nまずは普通にgit cloneします。\n```bash\ngit clone https://github.com/CMU-Perceptual-Computing-Lab/openpose.git\n```\nそしたら移動してサブモジュールのupdateをします。\n```bash\ncd openpose/\ngit submodule update --init --recursive --remote\n```\nこんな感じになるかなと思います。\n(リモートデスクトップで作業しています)\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/3ffd8d4f-ff8b-9511-c635-be543e9b1c47.png)\n\n## model install \n次にモデルのダウンロードを行います。\n本来ならbuildの時に自動でダウンロードされるのですが、今はサーバーが止まっているみたいです。\n\nオリジナルとサードパティ製のリンクがありました。\n今回は一番上のオリジナルモデルたちを使いました。お好みでどうぞ。\n\nhttps://drive.google.com/file/d/1QCSxJZpnWvM00hx49CJ2zky7PWGzpcEh/edit\nhttps://drive.google.com/file/d/1mqPEnqCk5bLMZ3XnfvxA4Dao7pj0TErr/edit\nhttps://drive.google.com/file/d/1WvftDLLEwAxeO2A-n12g5IFtfLbMY9mG/edit\n\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/31e8e448-b812-1717-4396-159d73f2d636.png)\n\nいろいろと警告が出てきますが、無視してzipをインストールします。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/19a5f848-9f06-e9cc-2e1f-006724dcd192.png)\n\n解凍するとこんな感じになっているはずです。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/9d8db84c-e7e3-d118-20b5-c3d7c6b3fd91.png)\n\nこれをOpenPose/modelsに入れていきます。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/cf4f65d3-9e39-7bcb-9414-62bf18a7ce39.png)\n\n次に、[github](https://github.com/CMU-Perceptual-Computing-Lab/openpose/blob/master/models/face/pose_deploy.prototxt) から各部位に対応するprototxtをダウンロードして配置していきます。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/b0ae9226-a85a-6d87-23a9-59884f69d788.png)\n\n配置後のubuntuはこんな感じになるはず\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/12339ded-0aa7-755f-8ad7-ec43ea86531e.png)\n\n## build\n\nここまでできたらOpenPose直下に、build用のフォルダを作ります。\n```bash\nmkdir build/\ncd build/\n```\nここからはGUI環境で実行します。\nまずはcmake-guiの起動です。\n```\ncmake-gui ..\n```\n以下のような画面が立ち上がります。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/1696cc20-2ba0-f760-3b38-18e09482fc1c.png)\n\n画面上部のところにopenposeのフォルダと、先ほど作ったbuildフォルダを入れます\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/233a6265-a680-d6e4-833d-c60504c9c94f.png)\n\nフォルダを入れたら、画面下部のConfigureをポチ\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/ca6c23df-4ccd-c78c-ee58-8081bf318be4.png)\n\nUnix Makefilesを選択してfinishをポチ\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/0dc7c80e-f5b3-1f34-6dbf-3114511f9f12.png)\n\nそうすると、画面下部にこんな感じの案内が出てdoneとなるはずです。\nちなみに、先ほどGoogle Driveからモデルをダウンロード済みなので、\nalready existsになっています。\nどうやらmodelダウンロード用のサーバーが死んでいるみたいで、先ほどの手順を踏まないとmodelがダウンロードされず、OpenPoseが機能しません。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1455134/563efab6-cb11-ad56-e556-217471253376.png)\n\nこの時、画面上部で詳細が設定できますが、項目が多いので公式ページで確認しながら進めてください。デフォルトのままでも動きます。\nhttps://github.com/CMU-Perceptual-Computing-Lab/openpose/blob/master/doc/installation/0_index.md\nそしたらGenerateボタンを押してGUIを閉じます。\n\n最後にbuildディレクトリで以下のコマンドを実行してbuildは終了です\nちょっと時間かかりますんでお待ちください。\n```bash\nmake -j`nproc`\n```\n## 動作確認\n\nopenpose直下で以下を実行します\n```\n./build/examples/openpose/openpose.bin --video examples/media/video.avi\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T12:44:27+09:00",
      "group": null,
      "id": "ad67aadad9b698570287",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 1,
      "tags": [
          {
              "name": "環境構築",
              "versions": []
          },
          {
              "name": "初心者",
              "versions": []
          },
          {
              "name": "OpenPose",
              "versions": []
          },
          {
              "name": "Ubuntu22.04",
              "versions": []
          }
      ],
      "title": "OpenPoseセットアップUbuntu22.04",
      "updated_at": "2023-10-28T12:44:27+09:00",
      "url": "https://qiita.com/ikrfun/items/ad67aadad9b698570287",
      "user": {
          "description": null,
          "facebook_id": null,
          "followees_count": 0,
          "followers_count": 0,
          "github_login_name": "ikrfun",
          "id": "ikrfun",
          "items_count": 1,
          "linkedin_id": null,
          "location": null,
          "name": "",
          "organization": null,
          "permanent_id": 1455134,
          "profile_image_url": "https://avatars.githubusercontent.com/u/74894884?v=4",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": null
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-1:27\"\u003eタイトル通りです。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"3:1-3:25\"\u003e\n\u003cspan id=\"implicit-valとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#implicit-val%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eimplicit val\u003c/code\u003eとは？\u003c/h1\u003e\n\u003cp data-sourcepos=\"5:1-5:116\"\u003escalaには、単に変数宣言するだけではなく、「暗黙の値」を定義することができます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"scala\" data-sourcepos=\"7:1-9:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eimplicit\u003c/span\u003e \u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"nv\"\u003ea\u003c/span\u003e\u003cspan class=\"k\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"a\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"11:1-11:193\"\u003eこのように宣言すると、これが宣言されたスコープにいたり、この宣言をインポートした時、aの値を明示せず、暗黙的に使うことができます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"scala\" data-sourcepos=\"13:1-23:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003em\u003c/span\u003e\u003cspan class=\"o\"\u003e()(\u003c/span\u003e\u003cspan class=\"k\"\u003eimplicit\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"k\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\u003cspan class=\"k\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eString\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"s\"\u003e\"implicit a = $a\"\u003c/span\u003e\n\u003cspan class=\"o\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ea\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ここで暗黙の値をインポート\u003c/span\u003e\n\n\u003cspan class=\"nf\"\u003em\u003c/span\u003e\u003cspan class=\"o\"\u003e()(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 通常はメソッドを呼ぶためには引数をすべて設定する必要があるが、\u003c/span\u003e\n\n\u003cspan class=\"nf\"\u003em\u003c/span\u003e\u003cspan class=\"o\"\u003e()\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 暗黙の引数は、そのスコープにある暗黙の値を探そうとする。\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch1 data-sourcepos=\"25:1-25:55\"\u003e\n\u003cspan id=\"implicit-valの型を省略すると警告が出る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#implicit-val%E3%81%AE%E5%9E%8B%E3%82%92%E7%9C%81%E7%95%A5%E3%81%99%E3%82%8B%E3%81%A8%E8%AD%A6%E5%91%8A%E3%81%8C%E5%87%BA%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e\u003ccode\u003eimplicit val\u003c/code\u003eの型を省略すると警告が出る\u003c/h1\u003e\n\u003cp data-sourcepos=\"27:1-27:93\"\u003e暗黙の値は通常の変数宣言と同様に、型を省略することも可能です。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"scala\" data-sourcepos=\"29:1-31:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eimplicit\u003c/span\u003e \u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"nv\"\u003ea\u003c/span\u003e \u003cspan class=\"k\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"a\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"33:1-33:100\"\u003escala 2.13.11から、暗黙の値の型を省略すると警告が出るようになりました。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"35:1-37:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eImplicit definition should have explicit type (inferred String)\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"39:1-39:41\"\u003e\u003ciframe id=\"qiita-embed-content__e17fd6477ba1f93eb9b270b13960cde0\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__e17fd6477ba1f93eb9b270b13960cde0\" data-content=\"https%3A%2F%2Fgithub.com%2Fscala%2Fscala%2Fpull%2F10083\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cp data-sourcepos=\"41:1-41:258\"\u003e暗黙の値を生成する時に、複雑な関数の戻り値だったりした場合、意図しない型に推論されて、暗黙の引数の解決ができなくなることがあるので、型を明示することは良いことだと思います。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"43:1-43:23\"\u003e\n\u003cspan id=\"今週あったこと\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%8A%E9%80%B1%E3%81%82%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e今週あったこと\u003c/h1\u003e\n\u003cp data-sourcepos=\"45:1-45:329\"\u003e10/25にplay2.9が出ました。play2.9はscala xml2系に依存するようになったため、scoverageも最新バージョンを使えるようになって、scalaも最新バージョンを使えるようになりました。今まではscala 2.13.8でしたが、これでscala 2.13.12にアップデートできます。\u003c/p\u003e\n\u003cp data-sourcepos=\"47:1-47:117\"\u003e対象のプロジェクトでは、play jsonのFormatを定義する際に、型定義を省略していました。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"scala\" data-sourcepos=\"49:1-51:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eimplicit\u003c/span\u003e \u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"nv\"\u003eformat\u003c/span\u003e \u003cspan class=\"k\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003eJson\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"py\"\u003eformat\u003c/span\u003e\u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003eACaseClass\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"53:1-53:225\"\u003eこれは警告対象です。なお、対象のプロジェクトでは\u003ccode\u003e-Werror\u003c/code\u003eでコンパイルしていたため、警告はコンパイルエラーとして報告されます。直すには下記のようにします。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"scala\" data-sourcepos=\"55:1-57:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eimplicit\u003c/span\u003e \u003cspan class=\"k\"\u003eval\u003c/span\u003e \u003cspan class=\"nv\"\u003eformat\u003c/span\u003e\u003cspan class=\"k\"\u003e:\u003c/span\u003e \u003cspan class=\"kt\"\u003eFormat\u003c/span\u003e\u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"kt\"\u003eACaseClass\u003c/span\u003e\u003cspan class=\"o\"\u003e]\u003c/span\u003e \u003cspan class=\"k\"\u003e=\u003c/span\u003e \u003cspan class=\"nv\"\u003eJson\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"py\"\u003eformat\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"59:1-59:163\"\u003eいろんなjsonを扱うプロジェクトだったので、この書き換えが400ファイルくらいありました。しんどかったです。褒めて。\u003c/p\u003e\n\u003cp data-sourcepos=\"61:1-61:141\"\u003e(quickfixも使えるらしいですが、quickfixだとFormatじゃなくてOFormatになりそうだったので、試してません...）\u003c/p\u003e\n\u003ch1 data-sourcepos=\"63:1-63:11\"\u003e\n\u003cspan id=\"まとめ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ\u003c/h1\u003e\n\u003cul data-sourcepos=\"65:1-67:152\"\u003e\n\u003cli data-sourcepos=\"65:1-65:158\"\u003eimplicit valには戻り型を明示しましょう。これにより暗黙の値の型が確定するので、暗黙の引数の解決が安定します。\u003c/li\u003e\n\u003cli data-sourcepos=\"66:1-66:172\"\u003eimplicitに限らず、特に公開変数には可能な限り戻り型を明示しましょう。型が確定することで公開変数を扱いやすくなります。\u003c/li\u003e\n\u003cli data-sourcepos=\"67:1-67:152\"\u003escala 2.13.xの警告はscala 3.xではエラーになることがあります。scala 2.13.xの警告はできる限り潰しておきましょう。\u003c/li\u003e\n\u003c/ul\u003e\n",
      "body": "タイトル通りです。\n\n# `implicit val`とは？\n\nscalaには、単に変数宣言するだけではなく、「暗黙の値」を定義することができます。\n\n```scala\nimplicit val a: String = \"a\"\n```\n\nこのように宣言すると、これが宣言されたスコープにいたり、この宣言をインポートした時、aの値を明示せず、暗黙的に使うことができます。\n\n```scala\ndef m()(implicit a: String): String = {\n  s\"implicit a = $a\"\n}\n\nimport a // ここで暗黙の値をインポート\n\nm()(a) // 通常はメソッドを呼ぶためには引数をすべて設定する必要があるが、\n\nm() // 暗黙の引数は、そのスコープにある暗黙の値を探そうとする。\n```\n\n# `implicit val`の型を省略すると警告が出る\n\n暗黙の値は通常の変数宣言と同様に、型を省略することも可能です。\n\n```scala\nimplicit val a = \"a\"\n```\n\nscala 2.13.11から、暗黙の値の型を省略すると警告が出るようになりました。\n\n```\nImplicit definition should have explicit type (inferred String)\n```\n\nhttps://github.com/scala/scala/pull/10083\n\n暗黙の値を生成する時に、複雑な関数の戻り値だったりした場合、意図しない型に推論されて、暗黙の引数の解決ができなくなることがあるので、型を明示することは良いことだと思います。\n\n# 今週あったこと\n\n10/25にplay2.9が出ました。play2.9はscala xml2系に依存するようになったため、scoverageも最新バージョンを使えるようになって、scalaも最新バージョンを使えるようになりました。今まではscala 2.13.8でしたが、これでscala 2.13.12にアップデートできます。\n\n対象のプロジェクトでは、play jsonのFormatを定義する際に、型定義を省略していました。\n\n```scala\nimplicit val format = Json.format[ACaseClass]\n```\n\nこれは警告対象です。なお、対象のプロジェクトでは`-Werror`でコンパイルしていたため、警告はコンパイルエラーとして報告されます。直すには下記のようにします。\n\n```scala\nimplicit val format: Format[ACaseClass] = Json.format\n```\n\nいろんなjsonを扱うプロジェクトだったので、この書き換えが400ファイルくらいありました。しんどかったです。褒めて。\n\n(quickfixも使えるらしいですが、quickfixだとFormatじゃなくてOFormatになりそうだったので、試してません...）\n\n# まとめ\n\n- implicit valには戻り型を明示しましょう。これにより暗黙の値の型が確定するので、暗黙の引数の解決が安定します。\n- implicitに限らず、特に公開変数には可能な限り戻り型を明示しましょう。型が確定することで公開変数を扱いやすくなります。\n- scala 2.13.xの警告はscala 3.xではエラーになることがあります。scala 2.13.xの警告はできる限り潰しておきましょう。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T12:28:34+09:00",
      "group": null,
      "id": "6670041649cb1adcb34a",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Scala",
              "versions": []
          }
      ],
      "title": "Scalaのimplicit valは戻り型を明示しよう",
      "updated_at": "2023-10-28T12:28:34+09:00",
      "url": "https://qiita.com/kijuky/items/6670041649cb1adcb34a",
      "user": {
          "description": "",
          "facebook_id": "",
          "followees_count": 1,
          "followers_count": 2,
          "github_login_name": "kijuky",
          "id": "kijuky",
          "items_count": 62,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 59468,
          "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/59468/profile-images/1473694939",
          "team_only": false,
          "twitter_screen_name": "kijuky",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-1:350\"\u003eVisual Studio 2022 を使用して C++ のプロジェクトを CMake で作成する方法を紹介しています。今回は find_package() によって pybind11 (\u003ca href=\"https://pybind11.readthedocs.io/en/stable/index.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://pybind11.readthedocs.io/en/stable/index.html\u003c/a\u003e) を利用するやり方を報告します。CMake で作成した C++ の関数やクラスが python から利用できます。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"3:1-3:8\"\u003e\n\u003cspan id=\"環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e環境\u003c/h1\u003e\n\u003cul data-sourcepos=\"4:1-8:111\"\u003e\n\u003cli data-sourcepos=\"4:1-4:140\"\u003e開発環境として、Visual Studio 2022（Community）の「C++デスクトップ環境」がインストールされていること。\u003c/li\u003e\n\u003cli data-sourcepos=\"5:1-5:211\"\u003epython がインストールされ、コマンドラインから \u003ccode\u003e\u0026gt; python\u003c/code\u003e もしくは \u003ccode\u003e\u0026gt; py\u003c/code\u003e で実行できること。複数のバージョンがインストールされていても構わない。\u003c/li\u003e\n\u003cli data-sourcepos=\"6:1-6:125\"\u003eCMake (最新版を推奨）がインストールされ、コマンドラインから cmake が実行できること。\u003csup\u003e\u003ca href=\"#fn-2\" id=\"fnref-2\"\u003e1\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"7:1-7:48\"\u003e環境変数の設定ができること。\u003csup\u003e\u003ca href=\"#fn-3\" id=\"fnref-3\"\u003e2\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"8:1-8:111\"\u003eコマンドラインでの作業には「Developer Command Prompt for VS 2022」を使用すること。\u003csup\u003e\u003ca href=\"#fn-4\" id=\"fnref-4\"\u003e3\u003c/a\u003e\u003c/sup\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 data-sourcepos=\"14:1-14:32\"\u003e\n\u003cspan id=\"pybind11-のインストール\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#pybind11-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003epybind11 のインストール\u003c/h1\u003e\n\u003cp data-sourcepos=\"15:1-19:87\"\u003eコマンドラインから\u003cbr\u003e\n\u003ccode\u003e\u0026gt; pip install pybind11\u003c/code\u003e\u003cbr\u003e\nでインストールできる。複数のバージョンの python がある場合には\u003cbr\u003e\n\u003ccode\u003e\u0026gt; py -3.8 -m pip install pybind11\u003c/code\u003e\u003cbr\u003e\nのようにして、使用する全てのバージョンにインストールする。\u003c/p\u003e\n\u003cp data-sourcepos=\"21:1-21:109\"\u003eインストールが終わったら、python でモジュールのインストール場所を確認する。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"22:1-30:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u0026gt; python\nPython 3.10.8 (tags/v3.10.8:aaaf517, Oct 11 2022, 16:50:30) [MSC v.1933 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\u0026gt;\u0026gt;\u0026gt; import pybind11\n\u0026gt;\u0026gt;\u0026gt; pybind11.__path__\n['C:\\\\Users\\\\*****\\\\AppData\\\\Roaming\\\\Python\\\\Python310\\\\site-packages\\\\pybind11']\n\u0026gt;\u0026gt;\u0026gt; quit()\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"31:1-31:99\"\u003eバージョンを指定する場合には \u003ccode\u003e\u0026gt; py -3.8 \u003c/code\u003e などで起動して同様にする。\u003c/p\u003e\n\u003cp data-sourcepos=\"33:1-33:478\"\u003e表示された場所をエクスプローラーで開き（\u003ccode\u003eAppData\u003c/code\u003e は隠しフォルダなので、隠しファイルが表示されるように設定を変更する）、その下にあるフォルダで pybind11Config.cmake を含むものを見つける。（上の例では \u003ccode\u003eC:\\Users\\*****\\AppData\\Roaming\\Python\\Python310\\site-packages\\pybind11\\share\\cmake\\pybind11\u003c/code\u003e）見つかったフォルダを環境変数 \u003ccode\u003epybind11_DIR\u003c/code\u003e の値として設定する。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"35:1-35:29\"\u003e\n\u003cspan id=\"プロジェクトの作成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクトの作成\u003c/h1\u003e\n\u003cp data-sourcepos=\"36:1-36:39\"\u003e公式ドキュメントの関数の例\u003c/p\u003e\n\u003cp data-sourcepos=\"38:1-38:53\"\u003e\u003ciframe id=\"qiita-embed-content__69785caace9c8c1ef5c9446f6d4a1684\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__69785caace9c8c1ef5c9446f6d4a1684\" data-content=\"https%3A%2F%2Fpybind11.readthedocs.io%2Fen%2Fstable%2Fbasics.html\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cp data-sourcepos=\"40:1-40:57\"\u003eで説明する。適当な作業用ディレクトリに\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"c++\" data-sourcepos=\"41:1-62:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eexample.cpp\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e#include\u003c/span\u003e \u003cspan class=\"cpf\"\u003e\u0026lt;pybind11/pybind11.h\u0026gt;\u003c/span\u003e\u003cspan class=\"cp\"\u003e\n\u003c/span\u003e\u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003epy\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epybind11\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ej\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ej\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ePYBIND11_MODULE\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eexample\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edoc\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\"pybind11 example plugin\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// optional module docstring\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edef\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"add\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"A function that adds two numbers\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edef\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"add1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"A function that adds two numbers\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003epy\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"i\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003epy\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003earg\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"j\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \n    \u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"k\"\u003enamespace\u003c/span\u003e \u003cspan class=\"n\"\u003epy\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eliterals\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edef\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"add2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"i\"\u003c/span\u003e\u003cspan class=\"n\"\u003e_a\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"j\"\u003c/span\u003e\u003cspan class=\"n\"\u003e_a\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eattr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"the_answer\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003eworld\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epy\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecast\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"World\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eattr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"what\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eworld\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"63:1-63:3\"\u003eと\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"cmake\" data-sourcepos=\"64:1-79:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eCMakeLists.txt\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nb\"\u003ecmake_minimum_required\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eVERSION 3.20\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eproject\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003etest_cmake CXX\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003eset\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eCMAKE_CXX_STANDARD 14\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n\n\u003cspan class=\"nb\"\u003efind_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003ePython COMPONENTS Interpreter Development\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"nb\"\u003efind_package\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003epybind11 REQUIRED\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# pybind11 method:\u003c/span\u003e\n\u003cspan class=\"nf\"\u003epybind11_add_module\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eexample example.cpp\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# auto copy\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eadd_custom_command\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003eTARGET example POST_BUILD \n    COMMAND \u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCMAKE_COMMAND\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e -E copy  $\u0026lt;TARGET_FILE:example\u0026gt; \u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCMAKE_SOURCE_DIR\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"80:1-84:166\"\u003eを作成する。\u003cbr\u003e\n・python 3.8 用のターゲットを作成するには \u003ccode\u003efind_package(Python EXACT 3.8 COMPONENTS Interpreter Development)\u003c/code\u003e と変更する。\u003cbr\u003e\n・python のバージョンを指定した場合には、環境変数 \u003ccode\u003epybind11_DIR\u003c/code\u003e に対応するバージョンのフォルダを設定する。（pybind11 はヘッダオンリライブラリなので、別バージョンのままで大丈夫かも。保証はないので自己責任で。）\u003cbr\u003e\n・\u003ccode\u003eadd_custom_command\u003c/code\u003e は利便性のためのもの。無くても良い。\u003cbr\u003e\n・\u003ccode\u003epybind11_add_module(example example.cpp)\u003c/code\u003e は \u003ccode\u003epybind11_add_module(example)\u003c/code\u003e と \u003ccode\u003etarget_sources(example PUBLIC example.cpp)\u003c/code\u003e に分けても良い。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"86:1-86:8\"\u003e\n\u003cspan id=\"実行\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行\u003c/h1\u003e\n\u003cp data-sourcepos=\"87:1-87:104\"\u003eDeveloper Command Prompt for VS 2022 で、ソースファイルを用意したディレクトリから\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"88:1-93:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u0026gt; md build\n\u0026gt; cd build\n\u0026gt; cmake ..\n\u0026gt; cmake --build . --config Release\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"94:1-94:315\"\u003eとする。成功すれば \u003ccode\u003eRelease\u003c/code\u003e ディレクトリに作成された \u003ccode\u003eexample.cp310-win_amd64.pyd\u003c/code\u003e が作業用ディレクトリにコピーされる。（310 の部分は対応する python のバージョンを表している。）\u003ccode\u003eexample.cp310-win_amd64.pyd\u003c/code\u003e があるディレクトリから\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"95:1-102:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u0026gt; python\nPython 3.10.8 (tags/v3.10.8:aaaf517, Oct 11 2022, 16:50:30) [MSC v.1933 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\u0026gt;\u0026gt;\u0026gt; import example\n\u0026gt;\u0026gt;\u0026gt; example.add(2,43)\n45\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"103:1-103:230\"\u003eとすれば動作を確認できる。なお、デバッグ中にソースを変更してビルドをし直す場合には、python を一旦終了しないと \u003ccode\u003eadd_custom_command()\u003c/code\u003e が上書きに失敗するので注意。\u003c/p\u003e\n\u003csection class=\"footnotes\"\u003e\n\u003col\u003e\n\u003cli id=\"fn-2\"\u003e\n\u003cp data-sourcepos=\"10:7-10:217\"\u003e\u003ca href=\"https://cmake.org/\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://cmake.org/\u003c/a\u003e  にある Latest Release の Windows x64 Installer を実行して 「Add CMake to the system PATH for all users」にチェックを入れてインストールする。 \u003ca href=\"#fnref-2\" class=\"\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn-3\"\u003e\n\u003cp data-sourcepos=\"11:7-11:333\"\u003e環境変数は、設定の「システム」＞「バージョン情報」＞「システムの詳細設定」から変更できます。\u003ccode\u003e\u0026gt; set\u003c/code\u003e で環境変数の一覧が見れるので、設定が反映されていない場合には一旦 Windows からサインアウトしてサインインし直してください。 \u003ca href=\"#fnref-3\" class=\"\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"fn-4\"\u003e\n\u003cp data-sourcepos=\"12:7-12:432\"\u003eスタートメニューの「Visual Studio 2022」フォルダ内にショートカットがあります。「ターミナル」の設定を変更し、「既定のプロファイル」に「Developer Command Prompt for VS 2022」を登録しておくと、エクスプローラーで作業するディレクトリを開き、コンテキストメニューから「ターミナルで開く」ことができて便利です。 \u003ca href=\"#fnref-4\" class=\"\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n",
      "body": "Visual Studio 2022 を使用して C++ のプロジェクトを CMake で作成する方法を紹介しています。今回は find_package() によって pybind11 (https://pybind11.readthedocs.io/en/stable/index.html) を利用するやり方を報告します。CMake で作成した C++ の関数やクラスが python から利用できます。\n\n# 環境\n* 開発環境として、Visual Studio 2022（Community）の「C++デスクトップ環境」がインストールされていること。\n* python がインストールされ、コマンドラインから ```\u003e python``` もしくは ```\u003e py``` で実行できること。複数のバージョンがインストールされていても構わない。\n* CMake (最新版を推奨）がインストールされ、コマンドラインから cmake が実行できること。[^2]\n* 環境変数の設定ができること。[^3]\n* コマンドラインでの作業には「Developer Command Prompt for VS 2022」を使用すること。[^4]\n[^1]: Git from the command line and also from 3rd-party software にチェックを入れてインストールする。\n[^2]: [https://cmake.org/](https://cmake.org/)  にある Latest Release の Windows x64 Installer を実行して 「Add CMake to the system PATH for all users」にチェックを入れてインストールする。\n[^3]: 環境変数は、設定の「システム」＞「バージョン情報」＞「システムの詳細設定」から変更できます。```\u003e set``` で環境変数の一覧が見れるので、設定が反映されていない場合には一旦 Windows からサインアウトしてサインインし直してください。\n[^4]: スタートメニューの「Visual Studio 2022」フォルダ内にショートカットがあります。「ターミナル」の設定を変更し、「既定のプロファイル」に「Developer Command Prompt for VS 2022」を登録しておくと、エクスプローラーで作業するディレクトリを開き、コンテキストメニューから「ターミナルで開く」ことができて便利です。\n\n# pybind11 のインストール\nコマンドラインから\n```\u003e pip install pybind11```\nでインストールできる。複数のバージョンの python がある場合には\n```\u003e py -3.8 -m pip install pybind11```\nのようにして、使用する全てのバージョンにインストールする。\n\nインストールが終わったら、python でモジュールのインストール場所を確認する。\n```\n\u003e python\nPython 3.10.8 (tags/v3.10.8:aaaf517, Oct 11 2022, 16:50:30) [MSC v.1933 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\u003e\u003e\u003e import pybind11\n\u003e\u003e\u003e pybind11.__path__\n['C:\\\\Users\\\\*****\\\\AppData\\\\Roaming\\\\Python\\\\Python310\\\\site-packages\\\\pybind11']\n\u003e\u003e\u003e quit()\n```\nバージョンを指定する場合には ```\u003e py -3.8 ``` などで起動して同様にする。\n\n表示された場所をエクスプローラーで開き（```AppData``` は隠しフォルダなので、隠しファイルが表示されるように設定を変更する）、その下にあるフォルダで pybind11Config.cmake を含むものを見つける。（上の例では ```C:\\Users\\*****\\AppData\\Roaming\\Python\\Python310\\site-packages\\pybind11\\share\\cmake\\pybind11```）見つかったフォルダを環境変数 ```pybind11_DIR``` の値として設定する。\n\n# プロジェクトの作成\n公式ドキュメントの関数の例\n\nhttps://pybind11.readthedocs.io/en/stable/basics.html\n\nで説明する。適当な作業用ディレクトリに\n```example.cpp\n#include \u003cpybind11/pybind11.h\u003e\nnamespace py = pybind11;\n\nint add(int i, int j) {\n    return i + j ;\n}\n\nPYBIND11_MODULE(example, m) {\n    m.doc() = \"pybind11 example plugin\"; // optional module docstring\n    m.def(\"add\", \u0026add, \"A function that adds two numbers\");\n    m.def(\"add1\", \u0026add, \"A function that adds two numbers\",\n        py::arg(\"i\")=1, py::arg(\"j\")=2);\n    \n    using namespace py::literals; \n    m.def(\"add2\", \u0026add, \"i\"_a=1, \"j\"_a=2);\n\n    m.attr(\"the_answer\") = 42;\n    auto world = py::cast(\"World\");\n    m.attr(\"what\") = world;\n}\n```\nと\n```CMakeLists.txt\ncmake_minimum_required(VERSION 3.20)\nproject(test_cmake CXX)\n\nset(CMAKE_CXX_STANDARD 14) \n\nfind_package(Python COMPONENTS Interpreter Development)\nfind_package(pybind11 REQUIRED)\n\n# pybind11 method:\npybind11_add_module(example example.cpp)\n\n# auto copy\nadd_custom_command(TARGET example POST_BUILD \n    COMMAND ${CMAKE_COMMAND} -E copy  $\u003cTARGET_FILE:example\u003e ${CMAKE_SOURCE_DIR})\n```\nを作成する。\n・python 3.8 用のターゲットを作成するには ```find_package(Python EXACT 3.8 COMPONENTS Interpreter Development)``` と変更する。\n・python のバージョンを指定した場合には、環境変数 ```pybind11_DIR``` に対応するバージョンのフォルダを設定する。（pybind11 はヘッダオンリライブラリなので、別バージョンのままで大丈夫かも。保証はないので自己責任で。）\n・```add_custom_command``` は利便性のためのもの。無くても良い。\n・```pybind11_add_module(example example.cpp)``` は ```pybind11_add_module(example)``` と ```target_sources(example PUBLIC example.cpp)``` に分けても良い。\n\n# 実行\nDeveloper Command Prompt for VS 2022 で、ソースファイルを用意したディレクトリから \n```\n\u003e md build\n\u003e cd build\n\u003e cmake ..\n\u003e cmake --build . --config Release\n```\nとする。成功すれば ```Release``` ディレクトリに作成された ```example.cp310-win_amd64.pyd``` が作業用ディレクトリにコピーされる。（310 の部分は対応する python のバージョンを表している。）```example.cp310-win_amd64.pyd``` があるディレクトリから\n```\n\u003e python\nPython 3.10.8 (tags/v3.10.8:aaaf517, Oct 11 2022, 16:50:30) [MSC v.1933 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\u003e\u003e\u003e import example\n\u003e\u003e\u003e example.add(2,43)\n45\n```\nとすれば動作を確認できる。なお、デバッグ中にソースを変更してビルドをし直す場合には、python を一旦終了しないと ```add_custom_command()``` が上書きに失敗するので注意。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T12:24:08+09:00",
      "group": null,
      "id": "e8a815a1e496c4f3c458",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Python",
              "versions": []
          },
          {
              "name": "Windows",
              "versions": []
          },
          {
              "name": "CMake",
              "versions": []
          },
          {
              "name": "VisualStudio",
              "versions": []
          },
          {
              "name": "pybind11",
              "versions": []
          }
      ],
      "title": "Visual Studio 2022 を用いて CMake プロジェクトから pybind11 を利用",
      "updated_at": "2023-10-28T12:39:37+09:00",
      "url": "https://qiita.com/kkoba775/items/e8a815a1e496c4f3c458",
      "user": {
          "description": "",
          "facebook_id": "",
          "followees_count": 1,
          "followers_count": 0,
          "github_login_name": null,
          "id": "kkoba775",
          "items_count": 8,
          "linkedin_id": "",
          "location": "",
          "name": "KOBAYASHI KEIGO",
          "organization": "",
          "permanent_id": 3290608,
          "profile_image_url": "https://secure.gravatar.com/avatar/7b94ca1d67f1c230bb80449fe60ccd89",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch2 data-sourcepos=\"1:1-1:49\"\u003e\n\u003cspan id=\"jestを使った関数のテストについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#jest%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E9%96%A2%E6%95%B0%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eJestを使った関数のテストについて\u003c/h2\u003e\n\u003cp data-sourcepos=\"3:1-3:142\"\u003e今回は、Jestを使用して関数をテストするサンプルプログラムについて、わかりやすく解説していきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"5:1-5:66\"\u003e下記はテスト元のサンプルプログラムになります\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"6:1-69:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e(testes.js)\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\n\u003cspan class=\"cm\"\u003e/**\n * 指定された郵便番号から住所を取得するためにAPIを呼び出します。\n * @param {string} zipcode - 検索する郵便番号（ハイフンなしの7桁）。\n * @returns {Promise} - APIからのレスポンスを含むPromiseオブジェクト。\n * @throws {Error} - 引数が空の文字列であるか、7桁の数字でない場合にエラーをスローします。\n */\u003c/span\u003e\n\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ezipcode\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003ezipcode\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereject\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e郵便番号を入力してください。\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"sr\"\u003e/^\u003c/span\u003e\u003cspan class=\"se\"\u003e\\d{7}\u003c/span\u003e\u003cspan class=\"sr\"\u003e$/\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ezipcode\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003ePromise\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereject\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e郵便番号は7桁の数字である必要があります。\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"cm\"\u003e/**\n     * 指定された郵便番号から住所を取得するためにAPIを呼び出すURL。\n     * @type {string}\n     */\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e`http://zipcloud.ibsnet.co.jp/api/search?zipcode=\u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"nx\"\u003ezipcode\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"cm\"\u003e/**\n     * fetch関数を使用してAPIを呼び出します。\n     * @returns {Promise} - APIからのレスポンスを含むPromiseオブジェクト。\n     * @throws {Error} - HTTPレスポンスがOKでない場合、またはJSONレスポンスの解析中にエラーが発生した場合にエラーをスローします。\n     */\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ethen\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eok\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e`HTTPエラー：\u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ethen\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"k\"\u003ecatch\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"cm\"\u003e/**\n * getZipCloud関数を呼び出して、結果をコンソールにログ出力します。\n */\u003c/span\u003e\n\u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1000001\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ethen\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddress1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"k\"\u003ecatch\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003econsole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emessage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003cspan class=\"cm\"\u003e/**\n * getZipCloud関数をエクスポートします。\n */\u003c/span\u003e\n\u003cspan class=\"nx\"\u003emodule\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexports\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003chr data-sourcepos=\"74:1-75:0\"\u003e\n\u003ch2 data-sourcepos=\"76:1-76:62\"\u003e\n\u003cspan id=\"jestを使ったgetzipcloud関数のテストについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#jest%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9Fgetzipcloud%E9%96%A2%E6%95%B0%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eJestを使った\u003ccode\u003egetZipCloud\u003c/code\u003e関数のテストについて\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"78:1-78:10\"\u003e\n\u003cspan id=\"前提\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E6%8F%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前提\u003c/h3\u003e\n\u003cp data-sourcepos=\"80:1-80:224\"\u003e以下のコードは、\u003ccode\u003egetZipCloud\u003c/code\u003e関数をテストするためのJestのサンプルプログラムです。この関数は、郵便番号を引数として受け取り、何らかの処理を行うものとします。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"82:1-84:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003egetZipCloud\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e./testes\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch3 data-sourcepos=\"86:1-86:22\"\u003e\n\u003cspan id=\"テストの概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eテストの概要\u003c/h3\u003e\n\u003cul data-sourcepos=\"88:1-158:0\"\u003e\n\u003cli data-sourcepos=\"88:1-89:67\"\u003e\n\u003cp data-sourcepos=\"88:3-89:67\"\u003e\u003cstrong\u003eHTTPモジュールのモック化\u003c/strong\u003e\u003cbr\u003e\nJestを使用してHTTPモジュールをモック化します。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"90:1-96:0\"\u003e\n\u003cp data-sourcepos=\"90:3-91:1\"\u003e\u003ca href=\"#%E8%A3%9C%E8%B6%B3%E3%83%A2%E3%83%83%E3%82%AF%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E9%83%A8%E5%88%86%E3%82%92%E8%A9%B3%E3%81%97%E3%81%8F%E8%A7%A3%E8%AA%AC\"\u003eモックについての詳しい解説はこちら\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"93:3-95:5\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ehttp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"97:1-158:0\"\u003e\n\u003cp data-sourcepos=\"97:3-97:55\"\u003e\u003cstrong\u003e\u003ccode\u003egetZipCloud\u003c/code\u003e関数のテストケースの記述\u003c/strong\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"99:3-99:106\"\u003e\u003ccode\u003edescribe\u003c/code\u003e関数を使用して、\u003ccode\u003egetZipCloud\u003c/code\u003e関数のテストケースをグループ化します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"101:3-103:5\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nf\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003col data-sourcepos=\"105:3-158:0\"\u003e\n\u003cli data-sourcepos=\"105:3-114:0\"\u003e\n\u003cp data-sourcepos=\"105:6-105:66\"\u003e\u003cstrong\u003e郵便番号が提供されなかった場合のテスト\u003c/strong\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"107:6-107:170\"\u003e関数に何も引数を渡さなかった場合、エラーメッセージ「郵便番号を入力してください。」が返されることを確認します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"109:6-113:8\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nf\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eshould reject with an error if no zipcode is provided\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e()).\u003c/span\u003e\u003cspan class=\"nx\"\u003erejects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoThrow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e郵便番号を入力してください。\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"115:3-124:0\"\u003e\n\u003cp data-sourcepos=\"115:6-115:66\"\u003e\u003cstrong\u003e無効な郵便番号が提供された場合のテスト\u003c/strong\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"117:6-117:208\"\u003e無効な郵便番号（例: \"123456\"）を関数に渡した場合、エラーメッセージ「郵便番号は7桁の数字である必要があります。」が返されることを確認します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"119:6-123:8\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nf\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eshould reject with an error if an invalid zipcode is provided\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e123456\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003erejects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoThrow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e郵便番号は7桁の数字である必要があります。\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"125:3-142:0\"\u003e\n\u003cp data-sourcepos=\"125:6-125:66\"\u003e\u003cstrong\u003e有効な郵便番号が提供された場合のテスト\u003c/strong\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"127:6-127:177\"\u003e有効な郵便番号（例: \"1000000\"）を関数に渡した場合、期待されるデータ（この場合は\"ああああ\"）が返されることを確認します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"129:6-140:8\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nf\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eshould resolve with the data from the API if a valid zipcode is provided\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emockData\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eresults\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e[{\u003c/span\u003e \u003cspan class=\"na\"\u003eaddress1\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eああああ\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}]\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eok\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"na\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efn\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003emockResolvedValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emockData\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efetch\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efn\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003emockResolvedValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1000000\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nf\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003etoEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eああああ\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"143:3-158:0\"\u003e\n\u003cp data-sourcepos=\"143:6-143:54\"\u003e\u003cstrong\u003eAPIがエラーを返した場合のテスト\u003c/strong\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"145:6-145:160\"\u003eAPIからエラーが返された場合（例: ステータスコード500）、関数がそのエラーを正しく処理することを確認します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"147:6-157:8\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nf\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eshould reject with an error if the API returns an error\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emockError\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eAPI error\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eok\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"na\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e500\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"nb\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efetch\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efn\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003emockResolvedValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003egetZipCloud\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e1234567\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003erejects\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etoThrow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e`HTTP error: \u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr data-sourcepos=\"159:1-160:0\"\u003e\n\u003cp data-sourcepos=\"161:1-161:245\"\u003e以上が、Jestを使用して\u003ccode\u003egetZipCloud\u003c/code\u003e関数をテストするサンプルプログラムのマークダウン形式での説明でした。このサンプルを参考に、自身のコードのテストも行ってみてくださいね！\u003c/p\u003e\n\u003chr data-sourcepos=\"164:1-164:3\"\u003e\n\u003ch3 data-sourcepos=\"165:1-165:55\"\u003e\n\u003cspan id=\"補足モックに関する部分を詳しく解説\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A3%9C%E8%B6%B3%E3%83%A2%E3%83%83%E3%82%AF%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E9%83%A8%E5%88%86%E3%82%92%E8%A9%B3%E3%81%97%E3%81%8F%E8%A7%A3%E8%AA%AC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e補足モックに関する部分を詳しく解説\u003c/h3\u003e\n\u003chr data-sourcepos=\"166:1-167:0\"\u003e\n\u003ch3 data-sourcepos=\"168:1-168:30\"\u003e\n\u003cspan id=\"モック-mocking-とは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%A2%E3%83%83%E3%82%AF-mocking-%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eモック (Mocking) とは\u003c/h3\u003e\n\u003cp data-sourcepos=\"170:1-170:174\"\u003eモックはテストの際に実際のオブジェクトや関数の代わりに使用されるものです。モックを使用する主な理由は以下の通りです：\u003c/p\u003e\n\u003col data-sourcepos=\"172:1-177:0\"\u003e\n\u003cli data-sourcepos=\"172:1-173:0\"\u003e\n\u003cp data-sourcepos=\"172:4-172:388\"\u003e\u003cstrong\u003e外部の依存関係を排除する\u003c/strong\u003e：例えば、外部APIやデータベースへのアクセスを伴う関数をテストする場合、そのAPIやデータベースが常に利用可能であるとは限りません。モックを使用することで、これらの外部依存関係を模倣（モック化）して、テストを安定的に行うことができます。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"174:1-175:0\"\u003e\n\u003cp data-sourcepos=\"174:4-174:283\"\u003e\u003cstrong\u003eテストの速度を向上させる\u003c/strong\u003e：外部サービスへの実際のリクエストは時間がかかることがあります。モックを使用することで、リアルタイムの待機時間を排除し、テストの速度を向上させることができます。\u003c/p\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"176:1-177:0\"\u003e\n\u003cp data-sourcepos=\"176:4-176:271\"\u003e\u003cstrong\u003e特定のシナリオをシミュレートする\u003c/strong\u003e：例えば、エラーシナリオや特定のレスポンスを返すシナリオなど、実際の環境では再現が難しいケースをモックを使用してシミュレートすることができます。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr data-sourcepos=\"178:1-179:0\"\u003e\n\u003ch3 data-sourcepos=\"180:1-180:58\"\u003e\n\u003cspan id=\"サンプルプログラム内のモックについて\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E5%86%85%E3%81%AE%E3%83%A2%E3%83%83%E3%82%AF%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eサンプルプログラム内のモックについて\u003c/h3\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"182:1-185:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// Mocks the http module\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ehttp\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"187:1-187:268\"\u003e上記のコードでは、\u003ccode\u003ehttp\u003c/code\u003eモジュールがモック化されています。これにより、\u003ccode\u003ehttp\u003c/code\u003eモジュールの実際の動作を行わず、Jestが提供するモック関数やオブジェクトを使用してテストを行うことができます。\u003c/p\u003e\n\u003cp data-sourcepos=\"189:1-189:130\"\u003eまた、以下の部分では\u003ccode\u003efetch\u003c/code\u003e関数（外部APIへのリクエストを行う関数）がモック化されています。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"javascript\" data-sourcepos=\"191:1-197:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"na\"\u003eok\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"na\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efn\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003emockResolvedValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emockData\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eglobal\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efetch\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ejest\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efn\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nf\"\u003emockResolvedValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emockResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"199:1-199:308\"\u003eこのモックにより、\u003ccode\u003egetZipCloud\u003c/code\u003e関数が\u003ccode\u003efetch\u003c/code\u003e関数を呼び出す際、実際のAPIリクエストを行う代わりにモックデータを返すようになります。これにより、APIの実際のレスポンスに依存せずに、関数の動作をテストすることができます。\u003c/p\u003e\n\u003chr data-sourcepos=\"201:1-202:0\"\u003e\n\u003cp data-sourcepos=\"203:1-203:276\"\u003eモックは、テストの際に非常に有用なツールとなります。特に外部サービスやモジュールに依存する関数のテストを行う際には、モックを使用してテストの安定性や再現性を確保することが推奨されます。\u003c/p\u003e\n",
      "body": "## Jestを使った関数のテストについて\n\n今回は、Jestを使用して関数をテストするサンプルプログラムについて、わかりやすく解説していきます。\n\n下記はテスト元のサンプルプログラムになります\n```javascript:(testes.js)\n\n/**\n * 指定された郵便番号から住所を取得するためにAPIを呼び出します。\n * @param {string} zipcode - 検索する郵便番号（ハイフンなしの7桁）。\n * @returns {Promise} - APIからのレスポンスを含むPromiseオブジェクト。\n * @throws {Error} - 引数が空の文字列であるか、7桁の数字でない場合にエラーをスローします。\n */\nfunction getZipCloud(zipcode) {\n  if (!zipcode) {\n    return Promise.reject(new Error(\"郵便番号を入力してください。\"));\n  } else if (!/^\\d{7}$/.test(zipcode)) {\n    return Promise.reject(\n      new Error(\"郵便番号は7桁の数字である必要があります。\")\n    );\n  } else {\n    /**\n     * 指定された郵便番号から住所を取得するためにAPIを呼び出すURL。\n     * @type {string}\n     */\n    const url = `http://zipcloud.ibsnet.co.jp/api/search?zipcode=${zipcode}`;\n\n    /**\n     * fetch関数を使用してAPIを呼び出します。\n     * @returns {Promise} - APIからのレスポンスを含むPromiseオブジェクト。\n     * @throws {Error} - HTTPレスポンスがOKでない場合、またはJSONレスポンスの解析中にエラーが発生した場合にエラーをスローします。\n     */\n    return fetch(url)\n      .then((res) =\u003e {\n        if (!res.ok) {\n          throw new Error(`HTTPエラー：${res.status}`);\n        }\n        return res.json();\n      })\n      .then((data) =\u003e {\n        console.log(data);\n        return data;\n      })\n      .catch((err) =\u003e {\n        throw err;\n      });\n  }\n}\n\n/**\n * getZipCloud関数を呼び出して、結果をコンソールにログ出力します。\n */\ngetZipCloud(\"1000001\")\n  .then((result) =\u003e {\n    console.log(result);\n    console.log(result.results[0].address1);\n  })\n  .catch((err) =\u003e {\n    console.error(err.message);\n  });\n\n/**\n * getZipCloud関数をエクスポートします。\n */\nmodule.exports = {\n  getZipCloud,\n};\n\n```\n\n\n\n\n---\n\n## Jestを使った`getZipCloud`関数のテストについて\n\n### 前提\n\n以下のコードは、`getZipCloud`関数をテストするためのJestのサンプルプログラムです。この関数は、郵便番号を引数として受け取り、何らかの処理を行うものとします。\n\n```javascript\nconst { getZipCloud } = require(\"./testes\");\n```\n\n### テストの概要\n\n- **HTTPモジュールのモック化**\n  Jestを使用してHTTPモジュールをモック化します。\n- [モックについての詳しい解説はこちら](#補足モックに関する部分を詳しく解説\n)\n\n  ```javascript\n  jest.mock(\"http\");\n  ```\n\n- **`getZipCloud`関数のテストケースの記述**\n\n  `describe`関数を使用して、`getZipCloud`関数のテストケースをグループ化します。\n\n  ```javascript\n  describe(\"getZipCloud\", () =\u003e {\n  ```\n\n  1. **郵便番号が提供されなかった場合のテスト**\n\n     関数に何も引数を渡さなかった場合、エラーメッセージ「郵便番号を入力してください。」が返されることを確認します。\n\n     ```javascript\n     it(\"should reject with an error if no zipcode is provided\", async () =\u003e {\n         await expect(getZipCloud()).rejects.toThrow(\"郵便番号を入力してください。\");\n     });\n     ```\n\n  2. **無効な郵便番号が提供された場合のテスト**\n\n     無効な郵便番号（例: \"123456\"）を関数に渡した場合、エラーメッセージ「郵便番号は7桁の数字である必要があります。」が返されることを確認します。\n\n     ```javascript\n     it(\"should reject with an error if an invalid zipcode is provided\", async () =\u003e {\n         await expect(getZipCloud(\"123456\")).rejects.toThrow(\"郵便番号は7桁の数字である必要があります。\");\n     });\n     ```\n\n  3. **有効な郵便番号が提供された場合のテスト**\n\n     有効な郵便番号（例: \"1000000\"）を関数に渡した場合、期待されるデータ（この場合は\"ああああ\"）が返されることを確認します。\n\n     ```javascript\n     it(\"should resolve with the data from the API if a valid zipcode is provided\", async () =\u003e {\n         const mockData = { results: [{ address1: \"ああああ\" }] };\n         const mockResponse = {\n           ok: true,\n           json: jest.fn().mockResolvedValue(mockData),\n         };\n         global.fetch = jest.fn().mockResolvedValue(mockResponse);\n         const result = await getZipCloud(\"1000000\");\n         expect(result).toEqual(\"ああああ\");\n     });\n     ```\n\n\n  4. **APIがエラーを返した場合のテスト**\n\n     APIからエラーが返された場合（例: ステータスコード500）、関数がそのエラーを正しく処理することを確認します。\n\n     ```javascript\n     it(\"should reject with an error if the API returns an error\", async () =\u003e {\n         const mockError = new Error(\"API error\");\n         const mockResponse = {\n           ok: false,\n           status: 500,\n         };\n         global.fetch = jest.fn().mockResolvedValue(mockResponse);\n         await expect(getZipCloud(\"1234567\")).rejects.toThrow(`HTTP error: ${mockResponse.status}`);\n     });\n     ```\n\n---\n\n以上が、Jestを使用して`getZipCloud`関数をテストするサンプルプログラムのマークダウン形式での説明でした。このサンプルを参考に、自身のコードのテストも行ってみてくださいね！\n\n   \n---\n### 補足モックに関する部分を詳しく解説\n---\n\n### モック (Mocking) とは\n\nモックはテストの際に実際のオブジェクトや関数の代わりに使用されるものです。モックを使用する主な理由は以下の通りです：\n\n1. **外部の依存関係を排除する**：例えば、外部APIやデータベースへのアクセスを伴う関数をテストする場合、そのAPIやデータベースが常に利用可能であるとは限りません。モックを使用することで、これらの外部依存関係を模倣（モック化）して、テストを安定的に行うことができます。\n\n2. **テストの速度を向上させる**：外部サービスへの実際のリクエストは時間がかかることがあります。モックを使用することで、リアルタイムの待機時間を排除し、テストの速度を向上させることができます。\n\n3. **特定のシナリオをシミュレートする**：例えば、エラーシナリオや特定のレスポンスを返すシナリオなど、実際の環境では再現が難しいケースをモックを使用してシミュレートすることができます。\n\n---\n\n### サンプルプログラム内のモックについて\n\n```javascript\n// Mocks the http module\njest.mock(\"http\");\n```\n\n上記のコードでは、`http`モジュールがモック化されています。これにより、`http`モジュールの実際の動作を行わず、Jestが提供するモック関数やオブジェクトを使用してテストを行うことができます。\n\nまた、以下の部分では`fetch`関数（外部APIへのリクエストを行う関数）がモック化されています。\n\n```javascript\nconst mockResponse = {\n  ok: true,\n  json: jest.fn().mockResolvedValue(mockData),\n};\nglobal.fetch = jest.fn().mockResolvedValue(mockResponse);\n```\n\nこのモックにより、`getZipCloud`関数が`fetch`関数を呼び出す際、実際のAPIリクエストを行う代わりにモックデータを返すようになります。これにより、APIの実際のレスポンスに依存せずに、関数の動作をテストすることができます。\n\n---\n\nモックは、テストの際に非常に有用なツールとなります。特に外部サービスやモジュールに依存する関数のテストを行う際には、モックを使用してテストの安定性や再現性を確保することが推奨されます。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T12:20:46+09:00",
      "group": null,
      "id": "f950a2f7d2778576b7b1",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "JavaScript",
              "versions": []
          },
          {
              "name": "Jest",
              "versions": []
          }
      ],
      "title": "Jestを使った関数のテストについて",
      "updated_at": "2023-10-28T12:20:46+09:00",
      "url": "https://qiita.com/jtths474/items/f950a2f7d2778576b7b1",
      "user": {
          "description": "",
          "facebook_id": "",
          "followees_count": 2,
          "followers_count": 0,
          "github_login_name": null,
          "id": "jtths474",
          "items_count": 61,
          "linkedin_id": "",
          "location": "",
          "name": "碌 備忘",
          "organization": "",
          "permanent_id": 576094,
          "profile_image_url": "https://lh3.googleusercontent.com/-no3sxjSOmPQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3remRTK7H3j5bIv_mJScXy040j91fg/s50/photo.jpg",
          "team_only": false,
          "twitter_screen_name": "mi05012",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-2:142\"\u003e近世における対数関数や指数関数の発見は人類の計算能力を飛躍的に向上させました(乗除算を加減算に置き換える魔法)。それがそれ以上のものだと知るまでにはそれほどの時間は要さなかったのです。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/ochimusha01/items/b7ce3c7d86ab39263c68\" id=\"reference-239731486d33a31acc3c\"\u003e【数理考古学】常用対数表(Table of Common Logarithms)を使った計算\u003c/a\u003e\u003c/p\u003e\n\u003ch1 data-sourcepos=\"4:1-4:32\"\u003e\n\u003cspan id=\"２と３の挟間\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%EF%BC%92%E3%81%A8%EF%BC%93%E3%81%AE%E6%8C%9F%E9%96%93\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e「２」と「３」の挟間\u003c/h1\u003e\n\u003cp data-sourcepos=\"6:1-9:130\"\u003e使い勝手を考えると「xy直交座標系においてxの増分が1の時にyの増分も1となる(傾きが1となる)根」を見定めたい。とりあえずざっくりとした目安として物理学で等加速運動の時間あたりの平均速度を計算する式$\\frac{b-a}{2}$を用いると$\\frac{α^{+1}-α^{-1}}{2}$となり、2を根とした冪算$2^n$の結果が$\\frac{2^{+1}-2^{-1}}{2}=\\frac{2-\\frac{1}{2}}{2}=\\frac{3}{4}$となって$2^0=1$を下回り、3を根とした冪算$3^n$の結果が$\\frac{3^{+1}-3^{-1}}{2}=\\frac{3-\\frac{1}{3}}{2}=\\frac{4}{3}$となって$3^0=1$を上回る事から探してる根αの値が2より大きく3より小さい事が明らかとなる(逆数関係にあって掛け合わせると1になるのが興味深い)。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/6d6452250a7a553d3edca222b8f070afd8623e26/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539373737322f61393031333766362d633535362d646535362d646365392d6237376237623530323436642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F597772%2Fa90137f6-c556-de56-dce9-b77b7b50246d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d716924027fc2279042251a8d803494a\" alt=\"スクリーンショット 2023-10-20 9.56.17.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/a90137f6-c556-de56-dce9-b77b7b50246d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F597772%2Fa90137f6-c556-de56-dce9-b77b7b50246d.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4baa59c02589dec4d62bc9b5b42034cc 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n実はこの式自体はハイパボリックサインSinhのものなので1でなくSinh(1)=1.17520119に収束。正しい答えはヤコブ・ベルヌーイ（Jakob Bernoulli,1654年~1705年)が会計学の複利計算式より導入した$(1-\\frac{1}{n})^n$によって得られ、その値2.718281828をネイピア数という。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/e62ac178643fc7c8c451fcf25277576cd32d7546/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539373737322f35363830353235352d626535312d353831382d663432322d3732643238326535633063362e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/56805255-be51-5818-f422-72d282e5c0c6.gif\" alt=\"20211001213633.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/56805255-be51-5818-f422-72d282e5c0c6.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"11:1-78:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e%\u003c/span\u003e\u003cspan class=\"n\"\u003ematplotlib\u003c/span\u003e \u003cspan class=\"n\"\u003enbagg\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003emath\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003em\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ecmath\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ematplotlib.pyplot\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ematplotlib.animation\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eanimation\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 等差数列を生成\n\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elinspace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e101\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eendpoint\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eY0\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eexp\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003euse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003edefault\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003efig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efigure\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elinspace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e40\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eendpoint\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eexponential\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecla\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#値域の決定\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eY1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\u003cspan class=\"nf\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eY2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# 可視化\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eex01\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"nf\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e^x\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eex02\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=log(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"nf\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e)x+1\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003egreen\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=x+1\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003egreen\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=-x+1\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epurple\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=exp(x)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epurple\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey=exp(-x)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ered\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eex01\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eex02\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eslopeX1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eslopeY1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efill\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eslopeX1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eslopeY1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ealpha\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eslopeX2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eslopeY2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efill\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eslopeX2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eslopeY2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ey\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ealpha\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#頂点\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emarker\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eo\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emarker\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eo\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emarker\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eo\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emarker\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eo\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emarker\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eo\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#座標\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehlines\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehlines\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elw\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehlines\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elw\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003evlines\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eylim\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003exlim\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003exlabel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eX\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eylabel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eY\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eVariation of Exponentiation Root\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eadd_subplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e111\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eset_aspect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eequal\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e (0,1)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e (1,1)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e (-1,1)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etan1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e(1,\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"nf\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003etan1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003etan2\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e(-1,\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"nf\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eround\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e)\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003etangent\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"n\"\u003etan1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elegend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003elower center\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#plt.show()\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eani\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eanimation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eFuncAnimation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efig\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eexponential\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003einterval\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e50\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eframes\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTcode\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003cspan class=\"n\"\u003eani\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003enap012.gif\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewriter\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epillow\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch1 data-sourcepos=\"80:1-80:26\"\u003e\n\u003cspan id=\"この考え方の効用\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%93%E3%81%AE%E8%80%83%E3%81%88%E6%96%B9%E3%81%AE%E5%8A%B9%E7%94%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eこの考え方の効用\u003c/h1\u003e\n\u003cp data-sourcepos=\"82:1-83:292\"\u003eリー群と縁深い指数写像や対数写像でガンガン使うやつですね。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/4cc8c61f7b3270e4a5eb31498cfcdbf3c00754e6/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539373737322f66623866656661652d366636642d313536342d383664342d6364623364613065383733642e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/fb8fefae-6f6d-1564-86d4-cdb3da0e873d.gif\" alt=\"68747470733a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f6f2f6f6368696d7573686130312f32303231303432392f32303231303432393132333834352e676966.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/fb8fefae-6f6d-1564-86d4-cdb3da0e873d.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"85:1-151:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e%\u003c/span\u003e\u003cspan class=\"n\"\u003ematplotlib\u003c/span\u003e \u003cspan class=\"n\"\u003enbagg\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003emath\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003em\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ecmath\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ec\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ematplotlib.pyplot\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003efunctools\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nb\"\u003ereduce\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eitertools\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eaccumulate\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ematplotlib.animation\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eanimation\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eNapier_culc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eRIM\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mf\"\u003e1j\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eTarm0\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003erepeat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRIM\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eTarm\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003econcatenate\u003c/span\u003e\u003cspan class=\"p\"\u003e([[(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mf\"\u003e0j\u003c/span\u003e\u003cspan class=\"p\"\u003e)],\u003c/span\u003e \u003cspan class=\"n\"\u003eTarm0\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nf\"\u003eaccumulate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTarm\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#単位円データ作成\n\u003c/span\u003e\u003cspan class=\"n\"\u003ec0\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elinspace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e61\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eendpoint\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003es0\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003enm\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ec0\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003es0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003ecomplex\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecos\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ec0\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enm\u003c/span\u003e\u003cspan class=\"p\"\u003e]),\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ec0\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enm\u003c/span\u003e\u003cspan class=\"p\"\u003e])))\u003c/span\u003e\n\u003cspan class=\"n\"\u003es1\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003euse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003edefault\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003efig\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efigure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e111\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#関数定義\n\u003c/span\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eEulerien_Identity\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecla\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#ネイピア数算出\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eei01\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nc\"\u003eNapier_culc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eTime_Code\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003en\u003c/span\u003e\u003cspan class=\"p\"\u003e])))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eEI0\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003enm\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eei01\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eEI0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eei01\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003enm\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003econjugate\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eei02\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEI0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#円周描画\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003es1\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimag\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003egreen\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eCircle\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eei01\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eei01\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimag\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e(1+1/n)^n\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eei02\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereal\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eei02\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimag\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ered\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e(1-1/n)^n\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003exlim\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eylim\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003em\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eEulerean Identity\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003exlabel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eReal\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eylabel\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eImaginal\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eadd_subplot\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eset_aspect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eequal\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eadjustable\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003ebox\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#補助線描画\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eaxvline\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eaxhline\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ered\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elw\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e],[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003elw\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e0\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblack\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e1\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eblue\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e-1\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003ered\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eπ\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003egreen\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003e-π\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ecolor\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003egreen\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e#凡例描画\n\u003c/span\u003e    \u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elegend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eloc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003elower right\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003cspan class=\"n\"\u003eTime_Code\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e16\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e128\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#Eulerien_Identity(0)\n#plt.show()\n\u003c/span\u003e\n\u003cspan class=\"n\"\u003eani\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eanimation\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eFuncAnimation\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efig\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eEulerien_Identity\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003einterval\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eframes\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTime_Code\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003cspan class=\"n\"\u003eani\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003eEI01.gif\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewriter\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"s\"\u003epillow\u003c/span\u003e\u003cspan class=\"sh\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"152:1-153:292\"\u003e問題は計算精度で、どんなに高性能のコンピューターを使って無限に周回運動を続ける事は出来ません。そこで全体を半周(πラジアン)なり１周(2πラジアン)なりを無限に繰り返してると考え、誤差を最小限に抑え込もうとするオイラーの定理$e^{θi}=Cos(θ)+Sin(θ)i$の出番となるという…\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/400cf2ef2f0f075ac3b4f89c9b5c108a4fe69cea/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539373737322f39353963343437382d396136382d636233622d343161642d3233373731333735656539382e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/959c4478-9a68-cb3b-41ad-23771375ee98.gif\" alt=\"68747470733a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f6f2f6f6368696d7573686130312f32303231303432392f32303231303432393133313434352e676966.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/959c4478-9a68-cb3b-41ad-23771375ee98.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"python\" data-sourcepos=\"155:1-158:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003eABS\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\n\u003cspan class=\"n\"\u003eTime_Code\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e16\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e32\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e64\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e128\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e256\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e512\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e1024\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e2048\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"159:1-160:106\"\u003eちなみに複素関数論ではこの様に「１を保守する」作業を「正規化」ないしは「規格化」と呼ぶ様です。\u003cbr\u003e\n\u003ca href=\"https://toy1972.hatenablog.com/entry/2021/07/20/060618\" rel=\"nofollow noopener\" target=\"_blank\"\u003e複素数値関数の正規化または規格化\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"162:1-163:130\"\u003eそれにつけても冪算は「幾何級数(Geometric-series)的に増える」なる表現の由来となってるくらいだから増率が尋常じゃありません。例えばある生物の大きさが昨年${\\frac{1}{2}}$で来年2倍になる見込みなら${2^n}$のオーダーで、昨年${\\frac{1}{3}}$で来年3倍になる見込みなら${3^n}$のオーダーで成長してると推察されます。計算上、比較年次を「前年(-1)」「当年(0)」「来年(+1)」としたかったのでこの設定。まぁネイピア数はこの挟間で見つかった訳ですが…\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/09f311adf704e7336dd3aa5a84c9fbaea092e3cc/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3539373737322f39613633663034662d373264342d386131612d396634662d3361656536636563376263302e676966\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/9a63f04f-72d4-8a1a-9f4f-3aee6cec7bc0.gif\" alt=\"20190509065008.gif\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/9a63f04f-72d4-8a1a-9f4f-3aee6cec7bc0.gif\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"165:1-166:111\"\u003eその概念の登場こそがマルサス「人口論(An Essay on the Principle of Population,1978年)」）を生み、そのあまりに悲観的な人口爆発予測を覆す為にロジスティック方程式が開発されたという次第。\u003cbr\u003e\n\u003ca href=\"https://qiita.com/ochimusha01/items/2f0118ecda2e17d366ba\" id=\"reference-40cbfa5da4f62ce04414\"\u003eロジスティック方程式とその関連範囲\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"168:1-171:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eN=\\frac{K}{1+(\\frac{K}{N_0}-1)e^{-rt}}\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"172:1-172:9\"\u003eなお…\u003c/p\u003e\n\u003cul data-sourcepos=\"174:1-178:0\"\u003e\n\u003cli data-sourcepos=\"174:1-174:89\"\u003eN=観測終了時間$t_x$時点での生物個体数(マルサス式だと人口爆発)\u003c/li\u003e\n\u003cli data-sourcepos=\"175:1-175:58\"\u003e$N_0$=観測開始時間$t_0$時点での生物個体数\u003c/li\u003e\n\u003cli data-sourcepos=\"176:1-176:84\"\u003eK=環境収容力(その環境が維持できる個体数)。ほぼ定数扱い。\u003c/li\u003e\n\u003cli data-sourcepos=\"177:1-178:0\"\u003er=内的自然増加率(一個体当たりの増加率=その生物が実現する可能性のある最大増加率)。ほぼ定数扱い。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"179:1-179:78\"\u003eおや、ここにもネイピア数が？　そんな感じで以下続報…\u003c/p\u003e\n",
      "body": "近世における対数関数や指数関数の発見は人類の計算能力を飛躍的に向上させました(乗除算を加減算に置き換える魔法)。それがそれ以上のものだと知るまでにはそれほどの時間は要さなかったのです。\n[【数理考古学】常用対数表(Table of Common Logarithms)を使った計算](https://qiita.com/ochimusha01/items/b7ce3c7d86ab39263c68)\n\n# 「２」と「３」の挟間\n\n使い勝手を考えると「xy直交座標系においてxの増分が1の時にyの増分も1となる(傾きが1となる)根」を見定めたい。とりあえずざっくりとした目安として物理学で等加速運動の時間あたりの平均速度を計算する式$\\frac{b-a}{2}$を用いると$\\frac{α^{+1}-α^{-1}}{2}$となり、2を根とした冪算$2^n$の結果が$\\frac{2^{+1}-2^{-1}}{2}=\\frac{2-\\frac{1}{2}}{2}=\\frac{3}{4}$となって$2^0=1$を下回り、3を根とした冪算$3^n$の結果が$\\frac{3^{+1}-3^{-1}}{2}=\\frac{3-\\frac{1}{3}}{2}=\\frac{4}{3}$となって$3^0=1$を上回る事から探してる根αの値が2より大きく3より小さい事が明らかとなる(逆数関係にあって掛け合わせると1になるのが興味深い)。\n![スクリーンショット 2023-10-20 9.56.17.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/a90137f6-c556-de56-dce9-b77b7b50246d.png)\n実はこの式自体はハイパボリックサインSinhのものなので1でなくSinh(1)=1.17520119に収束。正しい答えはヤコブ・ベルヌーイ（Jakob Bernoulli,1654年~1705年)が会計学の複利計算式より導入した$(1-\\frac{1}{n})^n$によって得られ、その値2.718281828をネイピア数という。\n![20211001213633.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/56805255-be51-5818-f422-72d282e5c0c6.gif)\n\n```python\n%matplotlib nbagg\nimport math as m\nimport cmath as c\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\n# 等差数列を生成\nX = np.linspace(-10,10,101,endpoint =True)\nY0=np.exp(X)\n\nplt.style.use('default')\nfig = plt.figure()\nTcode=np.linspace(0.1,4,40,endpoint =True)\n\ndef exponential(n):\n    plt.cla()\n    #値域の決定\n    Y1=Tcode[n]**X\n    def tangent(x):return(np.log(Tcode[n])*x+1)\n    Y2=tangent(X)\n    # 可視化\n    ex01=\"y=\"+str(round(Tcode[n],3))+\"^x\"\n    ex02=\"y=log(\"+str(round(Tcode[n],3))+\")x+1\"\n    plt.plot(X, X+1,color=\"green\", label=\"y=x+1\")\n    plt.plot(-X, X+1,color=\"green\", label=\"y=-x+1\")\n    plt.plot(X, Y0,color=\"purple\", label=\"y=exp(x)\")\n    plt.plot(-X, Y0,color=\"purple\", label=\"y=exp(-x)\")\n    plt.plot(X, Y1,color=\"red\", label=ex01)\n    plt.plot(X, Y2,color=\"blue\", label=ex02)\n    slopeX1=[0,1,1,0]\n    slopeY1=[1,1,tangent(1),1]\n    plt.fill(slopeX1,slopeY1,color=\"y\",alpha=0.5)\n    slopeX2=[0,-1,-1,0]\n    slopeY2=[1,1,tangent(-1),1]\n    plt.fill(slopeX2,slopeY2,color=\"y\",alpha=0.5)\n    #頂点\n    plt.plot(0, 1,color=\"black\", marker=\"o\")\n    plt.plot(1, 1,color=\"black\", marker=\"o\")\n    plt.plot(-1, 1,color=\"black\", marker=\"o\")\n    plt.plot(1, tangent(1),color=\"blue\", marker=\"o\")\n    plt.plot(-1, tangent(-1),color=\"blue\", marker=\"o\")\n    #座標\n    plt.hlines(0,-10,10,color=\"black\")\n    plt.hlines(1,-10,10,color=\"black\",lw=0.5)\n    plt.hlines(-1,-10,10,color=\"black\",lw=0.5)\n    plt.vlines(0,-10,10,color=\"black\")\n    plt.ylim([-4,4])\n    plt.xlim([-4,4])\n    plt.xlabel(\"X\")\n    plt.ylabel(\"Y\")\n    plt.title(\"Variation of Exponentiation Root\")\n    ax = fig.add_subplot(111)\n    ax.set_aspect('equal')\n    ax.text(0, 1,\" (0,1)\",color=\"black\", size=9)\n    ax.text(1, 1,\" (1,1)\",color=\"black\", size=9)\n    ax.text(-1, 1,\" (-1,1)\",color=\"black\", size=9)\n    tan1=\"(1,\"+str(round(tangent(1),3))+\")\"\n    ax.text(1, tangent(1),tan1,color=\"blue\", size=9)\n    tan2=\"(-1,\"+str(round(tangent(-1),3))+\")\"\n    ax.text(-1, tangent(-1),tan1,color=\"blue\", size=9)\n    ax.legend(loc='lower center')\n    #plt.show()\n\nani = animation.FuncAnimation(fig, exponential, interval=50,frames=len(Tcode))\nani.save(\"nap012.gif\", writer=\"pillow\")\n```\n\n# この考え方の効用\n\nリー群と縁深い指数写像や対数写像でガンガン使うやつですね。\n![68747470733a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f6f2f6f6368696d7573686130312f32303231303432392f32303231303432393132333834352e676966.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/fb8fefae-6f6d-1564-86d4-cdb3da0e873d.gif)\n\n```python\n%matplotlib nbagg\nimport math as m\nimport cmath as c\nimport numpy as num\nimport matplotlib.pyplot as plt\nfrom functools import reduce\nfrom itertools import accumulate\nimport matplotlib.animation as animation\n\ndef Napier_culc(ABS,n):\n    RIM=ABS*m.pi*(0+1j)\n    Tarm0=num.repeat(RIM/n,n)\n    Tarm=num.concatenate([[(1+0j)], Tarm0])\n    return accumulate(Tarm,lambda x,y:x+x*y)\n\n#単位円データ作成\nc0=num.linspace(0,2*m.pi,61,endpoint = True)\ns0=[]\nfor nm in range(len(c0)):\n    s0.append(complex(m.cos(c0[nm]),m.sin(c0[nm])))\ns1=num.array(s0)\nplt.style.use('default')\nfig = plt.figure(111)\n\n#関数定義\ndef Eulerien_Identity(n):\n    plt.cla()\n    #ネイピア数算出\n    ei01=num.array(list(Napier_culc(ABS,Time_Code[n])))\n    EI0=[]\n    for nm in range(len(ei01)):\n        EI0.append(ei01[nm].conjugate())\n    ei02=num.array(EI0)\n    #円周描画\n    plt.plot(s1.real,s1.imag,color=\"green\", label=\"Circle\")\n    plt.plot(ei01.real,ei01.imag,color=\"blue\", label=\"(1+1/n)^n\")\n    plt.plot(ei02.real,ei02.imag,color=\"red\", label=\"(1-1/n)^n\")\n    plt.xlim([-m.pi,m.pi])\n    plt.ylim([-m.pi,m.pi])\n    plt.title(\"Eulerean Identity\")\n    plt.xlabel(\"Real\")\n    plt.ylabel(\"Imaginal\")\n    ax = fig.add_subplot()\n    ax.set_aspect('equal', adjustable='box')\n    #補助線描画\n    plt.axvline(0, 0, 1,color=\"black\")\n    plt.axhline(0, 0, 1,color=\"black\")\n    plt.plot([-1,0],[0,0],color=\"red\",lw=1)\n    plt.plot([0,1],[0,0],color=\"blue\",lw=1)\n    ax.text(0, 0, \"0\",color=\"black\",size=13)\n    ax.text(1, 0, \"1\",color=\"blue\",size=13)\n    ax.text(-1, 0, \"-1\",color=\"red\",size=13)\n    ax.text(0, 1, \"π\",color=\"green\",size=13)\n    ax.text(0, -1, \"-π\",color=\"green\",size=13)\n    #凡例描画\n    ax.legend(loc='lower right')\n\nABS=1\nTime_Code=[1,2,4,8,16,32,64,128]\n\n#Eulerien_Identity(0)\n#plt.show()\n\nani = animation.FuncAnimation(fig, Eulerien_Identity, interval=100,frames=len(Time_Code))\nani.save(\"EI01.gif\", writer=\"pillow\")\n```\n問題は計算精度で、どんなに高性能のコンピューターを使って無限に周回運動を続ける事は出来ません。そこで全体を半周(πラジアン)なり１周(2πラジアン)なりを無限に繰り返してると考え、誤差を最小限に抑え込もうとするオイラーの定理$e^{θi}=Cos(θ)+Sin(θ)i$の出番となるという…\n![68747470733a2f2f63646e2d616b2e662e73742d686174656e612e636f6d2f696d616765732f666f746f6c6966652f6f2f6f6368696d7573686130312f32303231303432392f32303231303432393133313434352e676966.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/959c4478-9a68-cb3b-41ad-23771375ee98.gif)\n\n```python\nABS=6\nTime_Code=[1,2,4,8,16,32,64,128,256,512,1024,2048]\n```\nちなみに複素関数論ではこの様に「１を保守する」作業を「正規化」ないしは「規格化」と呼ぶ様です。\n[複素数値関数の正規化または規格化](https://toy1972.hatenablog.com/entry/2021/07/20/060618)\n\nそれにつけても冪算は「幾何級数(Geometric-series)的に増える」なる表現の由来となってるくらいだから増率が尋常じゃありません。例えばある生物の大きさが昨年${\\frac{1}{2}}$で来年2倍になる見込みなら${2^n}$のオーダーで、昨年${\\frac{1}{3}}$で来年3倍になる見込みなら${3^n}$のオーダーで成長してると推察されます。計算上、比較年次を「前年(-1)」「当年(0)」「来年(+1)」としたかったのでこの設定。まぁネイピア数はこの挟間で見つかった訳ですが…\n![20190509065008.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/9a63f04f-72d4-8a1a-9f4f-3aee6cec7bc0.gif)\n\nその概念の登場こそがマルサス「人口論(An Essay on the Principle of Population,1978年)」）を生み、そのあまりに悲観的な人口爆発予測を覆す為にロジスティック方程式が開発されたという次第。\n[ロジスティック方程式とその関連範囲](https://qiita.com/ochimusha01/items/2f0118ecda2e17d366ba)\n\n```math\nN=\\frac{K}{1+(\\frac{K}{N_0}-1)e^{-rt}}\n\n```\nなお…\n\n* N=観測終了時間$t_x$時点での生物個体数(マルサス式だと人口爆発)\n* $N_0$=観測開始時間$t_0$時点での生物個体数\n* K=環境収容力(その環境が維持できる個体数)。ほぼ定数扱い。\n* r=内的自然増加率(一個体当たりの増加率=その生物が実現する可能性のある最大増加率)。ほぼ定数扱い。\n\nおや、ここにもネイピア数が？　そんな感じで以下続報…\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T12:09:55+09:00",
      "group": null,
      "id": "b666a635e6ac2add6a1c",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Python",
              "versions": []
          },
          {
              "name": "ネイピア数",
              "versions": []
          },
          {
              "name": "ロジスティック方程式",
              "versions": []
          },
          {
              "name": "文文文プロジェクト",
              "versions": []
          }
      ],
      "title": "【数学溢れ話】【Token】ネイピア数",
      "updated_at": "2023-10-28T12:09:55+09:00",
      "url": "https://qiita.com/ochimusha01/items/b666a635e6ac2add6a1c",
      "user": {
          "description": "数理初学者の自習用サイトです。",
          "facebook_id": "",
          "followees_count": 265,
          "followers_count": 44,
          "github_login_name": null,
          "id": "ochimusha01",
          "items_count": 177,
          "linkedin_id": "",
          "location": "東京都内",
          "name": "yasunori matuki",
          "organization": "",
          "permanent_id": 597772,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/597772/profile-images/1583542365",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": "http://ochimusha01.hatenablog.com/"
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch2 data-sourcepos=\"1:1-1:15\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"3:1-3:13\"\u003e\n\u003cspan id=\"前回は\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%89%8D%E5%9B%9E%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e前回は\u003c/h3\u003e\n\u003cp data-sourcepos=\"5:1-5:59\"\u003e\u003ciframe id=\"qiita-embed-content__f9322e77c877fd008b28f133947c4794\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__f9322e77c877fd008b28f133947c4794\" data-content=\"https%3A%2F%2Fqiita.com%2Ftomoaki-kimura%2Fitems%2F60da37868ad0c8afaa9e\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003ch4 data-sourcepos=\"7:1-7:41\"\u003e\n\u003cspan id=\"プロジェクトの作成として\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90%E3%81%A8%E3%81%97%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロジェクトの作成として\u003c/h4\u003e\n\u003cul data-sourcepos=\"9:1-11:0\"\u003e\n\u003cli data-sourcepos=\"9:1-9:6\"\u003easdf\u003c/li\u003e\n\u003cli data-sourcepos=\"10:1-11:0\"\u003erailsコマンド\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"12:1-12:30\"\u003eについて学びました。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"14:1-14:13\"\u003e\n\u003cspan id=\"今回は\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%8A%E5%9B%9E%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e今回は\u003c/h3\u003e\n\u003ch4 data-sourcepos=\"16:1-16:54\"\u003e\n\u003cspan id=\"scaffoldでtaskを作成rootを設定として\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#scaffold%E3%81%A7task%E3%82%92%E4%BD%9C%E6%88%90root%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%A8%E3%81%97%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eScaffoldでTaskを作成・rootを設定として\u003c/h4\u003e\n\u003cul data-sourcepos=\"18:1-22:0\"\u003e\n\u003cli data-sourcepos=\"18:1-18:10\"\u003escaffold\u003c/li\u003e\n\u003cli data-sourcepos=\"19:1-19:5\"\u003eMVC\u003c/li\u003e\n\u003cli data-sourcepos=\"20:1-20:26\"\u003eマイグレーション\u003c/li\u003e\n\u003cli data-sourcepos=\"21:1-22:0\"\u003eルーティング\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"23:1-23:27\"\u003eについて学びます。\u003c/p\u003e\n\u003cp data-sourcepos=\"25:1-25:42\"\u003eでは、はじめていきましょう。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"27:1-27:45\"\u003e\n\u003cspan id=\"1-scaffoldでcrud操作の土台を作る\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-scaffold%E3%81%A7crud%E6%93%8D%E4%BD%9C%E3%81%AE%E5%9C%9F%E5%8F%B0%E3%82%92%E4%BD%9C%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. ScaffoldでCRUD操作の土台を作る\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"29:1-29:8\"\u003e\n\u003cspan id=\"crud\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#crud\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCRUD\u003c/h3\u003e\n\u003cp data-sourcepos=\"31:1-32:76\"\u003e\u003ccode\u003eCRUD\u003c/code\u003e とは \u003ccode\u003eCreate(作成)\u003c/code\u003e \u003ccode\u003eRead(参照)\u003c/code\u003e \u003ccode\u003eUpdate(編集)\u003c/code\u003e \u003ccode\u003eDelete(削除)\u003c/code\u003e の頭文字をとったもので、\u003cbr\u003e\nデーター操作に欠かせない、4つの操作を表しています。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"34:1-34:12\"\u003e\n\u003cspan id=\"scaffold\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#scaffold\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eScaffold\u003c/h3\u003e\n\u003cp data-sourcepos=\"36:1-36:47\"\u003e\u003ccode\u003eScaffold\u003c/code\u003e とは足場という意味です。\u003c/p\u003e\n\u003cp data-sourcepos=\"38:1-39:136\"\u003eRails には非常に協力な実装コマンドがいくつも存在しますが、\u003cbr\u003e\nその中でもこの \u003ccode\u003escaffold\u003c/code\u003e は有名で、CRUD操作に必要なものを、コマンド一つで全て用意してくれます。\u003c/p\u003e\n\u003cp data-sourcepos=\"41:1-41:45\"\u003eでは、実際にやってみましょう。\u003c/p\u003e\n\u003cp data-sourcepos=\"43:1-43:69\"\u003eプロジェクトフォルダよりコマンドを実行します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"45:1-47:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails g scaffold Task title description:text start_time:datetime end_time:datetime status:integer\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"49:1-49:36\"\u003eここのコマンドの意味は、\u003c/p\u003e\n\u003cp data-sourcepos=\"51:1-51:182\"\u003e\u003ccode\u003eTask\u003c/code\u003e という名前で \u003ccode\u003etitle\u003c/code\u003e \u003ccode\u003edescription\u003c/code\u003e \u003ccode\u003estatus\u003c/code\u003e という項目を持った　\u003ccode\u003eモデル\u003c/code\u003e を作成して、 \u003ccode\u003eCRUD\u003c/code\u003e 操作に必要なものを全て作ってください。\u003c/p\u003e\n\u003cp data-sourcepos=\"53:1-53:15\"\u003eその際に、\u003c/p\u003e\n\u003cul data-sourcepos=\"55:1-60:0\"\u003e\n\u003cli data-sourcepos=\"55:1-55:44\"\u003e\n\u003ccode\u003etitle\u003c/code\u003e はデフォルトの \u003ccode\u003estring\u003c/code\u003e 型\u003c/li\u003e\n\u003cli data-sourcepos=\"56:1-56:30\"\u003e\n\u003ccode\u003edescription\u003c/code\u003e は \u003ccode\u003etext\u003c/code\u003e 型\u003c/li\u003e\n\u003cli data-sourcepos=\"57:1-57:33\"\u003e\n\u003ccode\u003estart_time\u003c/code\u003e は \u003ccode\u003edatetime\u003c/code\u003e 型\u003c/li\u003e\n\u003cli data-sourcepos=\"58:1-58:31\"\u003e\n\u003ccode\u003eend_time\u003c/code\u003e は \u003ccode\u003edatetime\u003c/code\u003e 型\u003c/li\u003e\n\u003cli data-sourcepos=\"59:1-60:0\"\u003e\n\u003ccode\u003estatus\u003c/code\u003e は \u003ccode\u003einteger\u003c/code\u003e 型\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"61:1-61:70\"\u003eとしてください。という命令になります。 すると、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"63:1-94:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e todo_app % rails g scaffold Task title description:text start_time:datetime end_time:datetime status:integer\n      invoke  active_record\n      create    db/migrate/20231027033159_create_tasks.rb\n      create    app/models/task.rb\n      invoke    test_unit\n      create      \u003cspan class=\"nb\"\u003etest\u003c/span\u003e/models/task_test.rb\n      create      \u003cspan class=\"nb\"\u003etest\u003c/span\u003e/fixtures/tasks.yml\n      invoke  resource_route\n       route    resources :tasks\n      invoke  scaffold_controller\n      create    app/controllers/tasks_controller.rb\n      invoke    erb\n      create      app/views/tasks\n      create      app/views/tasks/index.html.erb\n      create      app/views/tasks/edit.html.erb\n      create      app/views/tasks/show.html.erb\n      create      app/views/tasks/new.html.erb\n      create      app/views/tasks/_form.html.erb\n      create      app/views/tasks/_task.html.erb\n      invoke    resource_route\n      invoke    test_unit\n      create      \u003cspan class=\"nb\"\u003etest\u003c/span\u003e/controllers/tasks_controller_test.rb\n      create      \u003cspan class=\"nb\"\u003etest\u003c/span\u003e/system/tasks_test.rb\n      invoke    helper\n      create      app/helpers/tasks_helper.rb\n      invoke      test_unit\n      invoke    jbuilder\n      create      app/views/tasks/index.json.jbuilder\n      create      app/views/tasks/show.json.jbuilder\n      create      app/views/tasks/_task.json.jbuilder\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"96:1-97:102\"\u003eこのような沢山のファイルが作られたというログが流れてきます。\u003cbr\u003e\nもちろん最初から全てはつかいませんが、主要なものを見ていきましょう。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"99:1-99:37\"\u003e\n\u003cspan id=\"2-model-view-controller-の確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-model-view-controller-%E3%81%AE%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. Model View Controller の確認\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"101:1-101:7\"\u003e\n\u003cspan id=\"mvc\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#mvc\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eMVC\u003c/h3\u003e\n\u003cp data-sourcepos=\"103:1-103:12\"\u003eMVCとは、\u003c/p\u003e\n\u003cul data-sourcepos=\"105:1-108:0\"\u003e\n\u003cli data-sourcepos=\"105:1-105:36\"\u003eモデル ( \u003ccode\u003eapp/models/task.rb\u003c/code\u003e )\u003c/li\u003e\n\u003cli data-sourcepos=\"106:1-106:65\"\u003eコントローラー ( \u003ccode\u003eapp/controllers/tasks_controller.rb\u003c/code\u003e )\u003c/li\u003e\n\u003cli data-sourcepos=\"107:1-108:0\"\u003eビュー ( \u003ccode\u003eapp/views/tasks\u003c/code\u003e )\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"109:1-109:123\"\u003e辺りは、頻繁に参照するはずです。では、ひとつずつファイルの確認をしておきましょう。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"111:1-111:9\"\u003e\n\u003cspan id=\"model\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#model\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eModel\u003c/h3\u003e\n\u003cp data-sourcepos=\"113:1-113:96\"\u003eモデルは、テーブル操作をするためのロジックを書く場所となります。\u003c/p\u003e\n\u003cp data-sourcepos=\"115:1-115:84\"\u003e現状は、何もありませんので、このように空になっています。\u003c/p\u003e\n\u003cp data-sourcepos=\"117:1-117:18\"\u003eapp/models/task.rb\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"118:1-121:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTask\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationRecord\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch3 data-sourcepos=\"123:1-123:14\"\u003e\n\u003cspan id=\"controller\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#controller\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eController\u003c/h3\u003e\n\u003cp data-sourcepos=\"125:1-125:123\"\u003eコントローラーは、リクエストされたURLに対応した動かすメソッドを書く場所となります。\u003c/p\u003e\n\u003cp data-sourcepos=\"127:1-127:141\"\u003eリクエストがあって動き、レコードの操作を命令したり、次の画面に遷移したりという命令を下します。\u003c/p\u003e\n\u003cp data-sourcepos=\"129:1-129:47\"\u003eapp/controllers/tasks_controller.rb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"130:1-201:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTasksController\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eApplicationController\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ebefore_action\u003c/span\u003e \u003cspan class=\"ss\"\u003e:set_task\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eonly: \u003c/span\u003e\u003cspan class=\"sx\"\u003e%i[ show edit update destroy ]\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# GET /tasks or /tasks.json\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eindex\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@tasks\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eall\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# GET /tasks/1 or /tasks/1.json\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eshow\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# GET /tasks/new\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# GET /tasks/1/edit\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eedit\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# POST /tasks or /tasks.json\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreate\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etask_params\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003erespond_to\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esave\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003etask_url\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"ss\"\u003enotice: \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Task was successfully created.\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:show\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :created\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003elocation: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:new\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :unprocessable_entity\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003ejson: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :unprocessable_entity\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# PATCH/PUT /tasks/1 or /tasks/1.json\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\n    \u003cspan class=\"n\"\u003erespond_to\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etask_params\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003etask_url\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"ss\"\u003enotice: \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Task was successfully updated.\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:show\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :ok\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003elocation: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003e:edit\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :unprocessable_entity\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"ss\"\u003ejson: \u003c/span\u003e\u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eerrors\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003estatus: :unprocessable_entity\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# DELETE /tasks/1 or /tasks/1.json\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edestroy\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edestroy!\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003erespond_to\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ehtml\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eredirect_to\u003c/span\u003e \u003cspan class=\"n\"\u003etasks_url\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enotice: \u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Task was successfully destroyed.\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n      \u003cspan class=\"nb\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ejson\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003ehead\u003c/span\u003e \u003cspan class=\"ss\"\u003e:no_content\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# Use callbacks to share common setup or constraints between actions.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eset_task\u003c/span\u003e\n      \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:id\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# Only allow a list of trusted parameters through.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003etask_params\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:task\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003epermit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:title\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:description\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:start_time\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:end_time\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:status\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"203:1-203:33\"\u003eメソッドを見てみると、\u003c/p\u003e\n\u003cp data-sourcepos=\"205:1-205:55\"\u003e\u003ccode\u003eindex\u003c/code\u003e \u003ccode\u003eshow\u003c/code\u003e \u003ccode\u003enew\u003c/code\u003e \u003ccode\u003eedit\u003c/code\u003e \u003ccode\u003ecreate\u003c/code\u003e \u003ccode\u003eupdate\u003c/code\u003e \u003ccode\u003edestroy\u003c/code\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"207:1-207:178\"\u003eというメソッドが存在しますが、これらのメソッドは \u003ccode\u003eアクション\u003c/code\u003e と呼ばれており、これらがリクエスト毎の命令を持っています。\u003c/p\u003e\n\u003cp data-sourcepos=\"209:1-209:63\"\u003e概ねの使い方は、以下のようになっています。\u003c/p\u003e\n\u003ctable data-sourcepos=\"211:1-219:59\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"211:1-211:49\"\u003e\n\u003cth data-sourcepos=\"211:2-211:22\"\u003eアクション名\u003c/th\u003e\n\u003cth data-sourcepos=\"211:24-211:48\"\u003e役割\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"213:1-213:63\"\u003e\n\u003ctd data-sourcepos=\"213:2-213:10\"\u003eindex\u003c/td\u003e\n\u003ctd data-sourcepos=\"213:12-213:62\"\u003e登録済みレコードの一覧表示画面\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"214:1-214:63\"\u003e\n\u003ctd data-sourcepos=\"214:2-214:10\"\u003eshow\u003c/td\u003e\n\u003ctd data-sourcepos=\"214:12-214:62\"\u003e登録済みレコードの個別表示画面\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"215:1-215:69\"\u003e\n\u003ctd data-sourcepos=\"215:2-215:10\"\u003enew\u003c/td\u003e\n\u003ctd data-sourcepos=\"215:12-215:68\"\u003e新しいレコードの作成のための入力画面\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"216:1-216:75\"\u003e\n\u003ctd data-sourcepos=\"216:2-216:10\"\u003eedit\u003c/td\u003e\n\u003ctd data-sourcepos=\"216:12-216:70\"\u003e登録済みレコードの編集のための入力画面\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"217:1-217:57\"\u003e\n\u003ctd data-sourcepos=\"217:2-217:10\"\u003ecreate\u003c/td\u003e\n\u003ctd data-sourcepos=\"217:12-217:56\"\u003e新しいレコードを登録する\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"218:1-218:59\"\u003e\n\u003ctd data-sourcepos=\"218:2-218:10\"\u003eupdate\u003c/td\u003e\n\u003ctd data-sourcepos=\"218:12-218:58\"\u003e登録済みレコードを編集する\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"219:1-219:59\"\u003e\n\u003ctd data-sourcepos=\"219:2-219:10\"\u003edestroy\u003c/td\u003e\n\u003ctd data-sourcepos=\"219:12-219:58\"\u003e登録済みレコードを削除する\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp data-sourcepos=\"221:1-221:74\"\u003e一方で、 \u003ccode\u003eprivate\u003c/code\u003e 以下に書かれたプライベートメソッド\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"223:1-234:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# Use callbacks to share common setup or constraints between actions.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eset_task\u003c/span\u003e\n      \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"no\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"ss\"\u003e:id\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e# Only allow a list of trusted parameters through.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003etask_params\u003c/span\u003e\n      \u003cspan class=\"n\"\u003eparams\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:task\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003epermit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003e:title\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:description\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:status\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"236:1-236:66\"\u003eこれらに関しては、アクションとは呼びません。\u003c/p\u003e\n\u003cp data-sourcepos=\"238:1-238:126\"\u003eこのコントローラー内の重複するような記述をすっきりさせる為に補助的に書かれています。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"240:1-240:8\"\u003e\n\u003cspan id=\"view\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#view\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eView\u003c/h3\u003e\n\u003cp data-sourcepos=\"242:1-243:180\"\u003eビューは \u003ccode\u003ehtml\u003c/code\u003e に当たるファイルを管理する場所となります。\u003cbr\u003e\nアクションで言うところの、 \u003ccode\u003eindex\u003c/code\u003e \u003ccode\u003eshow\u003c/code\u003e \u003ccode\u003enew\u003c/code\u003e \u003ccode\u003eedit\u003c/code\u003e の表示部分のコードが書かれています。拡張子に \u003ccode\u003eerb\u003c/code\u003e が付いているのが特徴です。\u003c/p\u003e\n\u003cp data-sourcepos=\"245:1-245:45\"\u003eそれぞれ確認しておきましょう。\u003c/p\u003e\n\u003ch4 data-sourcepos=\"247:1-247:10\"\u003e\n\u003cspan id=\"index\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#index\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eindex\u003c/h4\u003e\n\u003cp data-sourcepos=\"249:1-249:42\"\u003eapp/views/tasks/index.html.erb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"250:1-265:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nb\"\u003ep\u003c/span\u003e \u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"color: green\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= notice %\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;h1\u0026gt;Tasks\u0026lt;/h1\u0026gt;\n\n\u0026lt;div id=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"tasks\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e% @tasks.each \u003c/span\u003e\u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003etask\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"sx\"\u003e%\u0026gt;\n    \u0026lt;%= render task %\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nb\"\u003ep\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= link_to \"Show this task\", task %\u0026gt;\n    \u0026lt;/p\u0026gt;\n  \u0026lt;% end %\u0026gt;\n\u0026lt;/div\u0026gt;\n\n\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003elink_to\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"New task\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enew_task_path\u003c/span\u003e \u003cspan class=\"sx\"\u003e%\u0026gt;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch4 data-sourcepos=\"267:1-267:9\"\u003e\n\u003cspan id=\"show\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#show\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eshow\u003c/h4\u003e\n\u003cp data-sourcepos=\"269:1-269:41\"\u003eapp/views/tasks/show.html.erb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"270:1-281:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nb\"\u003ep\u003c/span\u003e \u003cspan class=\"n\"\u003estyle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"color: green\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= notice %\u0026gt;\u0026lt;/p\u0026gt;\n\n\u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003erender\u003c/span\u003e \u003cspan class=\"vi\"\u003e@task\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u0026gt;\u003c/span\u003e\n\n\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sx\"\u003e%= link_to \"Edit this task\", edit_task_path(@task) %\u0026gt; |\n  \u0026lt;%=\u003c/span\u003e \u003cspan class=\"n\"\u003elink_to\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Back to tasks\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etasks_path\u003c/span\u003e \u003cspan class=\"sx\"\u003e%\u0026gt;\n\n  \u0026lt;%= button_to \"Destroy this task\", @task, method: :delete %\u0026gt;\u003c/span\u003e\n\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/div\u0026gt;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch4 data-sourcepos=\"282:1-282:8\"\u003e\n\u003cspan id=\"new\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#new\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003enew\u003c/h4\u003e\n\u003cp data-sourcepos=\"284:1-284:40\"\u003eapp/views/tasks/new.html.erb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"285:1-295:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eh1\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"no\"\u003eNew\u003c/span\u003e \u003cspan class=\"n\"\u003etask\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/h1\u0026gt;\n\n\u0026lt;%= render \"form\", task: @task %\u0026gt;\n\n\u0026lt;br\u0026gt;\n\n\u0026lt;div\u0026gt;\n  \u0026lt;%= link_to \"Back to tasks\", tasks_path %\u0026gt;\n\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch4 data-sourcepos=\"297:1-297:9\"\u003e\n\u003cspan id=\"edit\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#edit\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eedit\u003c/h4\u003e\n\u003cp data-sourcepos=\"299:1-299:41\"\u003eapp/views/tasks/edit.html.erb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"300:1-311:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eh1\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"no\"\u003eEditing\u003c/span\u003e \u003cspan class=\"n\"\u003etask\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/h1\u0026gt;\n\n\u0026lt;%= render \"form\", task: @task %\u0026gt;\n\n\u0026lt;br\u0026gt;\n\n\u0026lt;div\u0026gt;\n  \u0026lt;%= link_to \"Show this task\", @task %\u0026gt; |\n  \u0026lt;%= link_to \"Back to tasks\", tasks_path %\u0026gt;\n\u0026lt;/\u003c/span\u003e\u003cspan class=\"n\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"313:1-313:62\"\u003eあとは、ファイル名が \u003ccode\u003e_\u003c/code\u003e から始まっている、\u003c/p\u003e\n\u003cp data-sourcepos=\"315:1-315:32\"\u003e\u003ccode\u003eapp/views/tasks/_form.html.erb\u003c/code\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"317:1-317:32\"\u003e\u003ccode\u003eapp/views/tasks/_task.html.erb\u003c/code\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"319:1-319:231\"\u003eこれらのファイルがありますが、これは上で紹介した \u003ccode\u003eindex\u003c/code\u003e \u003ccode\u003eshow\u003c/code\u003e \u003ccode\u003enew\u003c/code\u003e \u003ccode\u003eedit\u003c/code\u003e の中で、 \u003ccode\u003erender\u003c/code\u003e メソッドで呼び出されて使っていますが、これらはまた後ほど触れていきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"321:1-321:140\"\u003eこれらMVC用のファイルを書き換える事によってUIやデーターベース操作に関する事を賄う事ができます。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"323:1-323:63\"\u003e\n\u003cspan id=\"3-migration-を実行しdbとモデルを連携させる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-migration-%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%97db%E3%81%A8%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E9%80%A3%E6%90%BA%E3%81%95%E3%81%9B%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. migration を実行し、DBとモデルを連携させる\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"325:1-325:40\"\u003e\n\u003cspan id=\"マイグレーションファイル\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eマイグレーションファイル\u003c/h3\u003e\n\u003cp data-sourcepos=\"327:1-327:200\"\u003eCRUD操作可能という事は、データーの保存にはDB(データーベース)を使う訳ですが、DBとアプリケーションを結ぶ為の機能として \u003ccode\u003emigration\u003c/code\u003e があります。\u003c/p\u003e\n\u003cp data-sourcepos=\"329:1-329:153\"\u003eその設定は、今回のような \u003ccode\u003eScaffold\u003c/code\u003e でも生成されますし、 \u003ccode\u003eModel\u003c/code\u003e 単体で作ったり、変更を行う際に生成されます。\u003c/p\u003e\n\u003cp data-sourcepos=\"331:1-331:69\"\u003eこれを \u003ccode\u003eマイグレーションファイル\u003c/code\u003e　と言います。\u003c/p\u003e\n\u003cp data-sourcepos=\"333:1-333:216\"\u003e今回は \u003ccode\u003eScaffold\u003c/code\u003e によって、 \u003ccode\u003edb/migrate/20231027033159_create_tasks.rb\u003c/code\u003e (数字の部分は作成の日時が入るのでそれぞれ別の数値です) のようなファイルが作成されています。\u003c/p\u003e\n\u003cp data-sourcepos=\"335:1-335:41\"\u003edb/migrate/20231027033159_create_tasks.rb\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"336:1-350:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCreateTasks\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eMigration\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mf\"\u003e7.1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003echange\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecreate_table\u003c/span\u003e \u003cspan class=\"ss\"\u003e:tasks\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003estring\u003c/span\u003e \u003cspan class=\"ss\"\u003e:title\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e \u003cspan class=\"ss\"\u003e:description\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"ss\"\u003e:start_time\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"ss\"\u003e:end_time\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einteger\u003c/span\u003e \u003cspan class=\"ss\"\u003e:status\u003c/span\u003e\n\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etimestamps\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"352:1-352:74\"\u003eこれらがDBにテーブルとして設定する内容となります。\u003c/p\u003e\n\u003cp data-sourcepos=\"354:1-354:110\"\u003e現在は、まだDBにこれらの情報が登録されていません。少し確認してみましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"356:1-358:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails s\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"360:1-360:111\"\u003eと打ってみると、サーバーが起動し、 \u003ccode\u003elocalhost:3000\u003c/code\u003e でアクセスが可能となります。\u003c/p\u003e\n\u003cp data-sourcepos=\"362:1-362:6\"\u003eが、\u003c/p\u003e\n\u003cp data-sourcepos=\"364:1-364:131\"\u003e\u003ca href=\"https://gyazo.com/133f11216ec32dfd0e80df874036a3cb\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F133f11216ec32dfd0e80df874036a3cb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=20bff606b49bf3091afcceaf9bb990fe\" alt=\"Image from Gyazo\" data-canonical-src=\"https://i.gyazo.com/133f11216ec32dfd0e80df874036a3cb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F133f11216ec32dfd0e80df874036a3cb.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=0b5909ca03c387a5df8eabff7cca4e9a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"366:1-367:110\"\u003eこのようなエラーとなります。これは、 \u003ccode\u003eMigration are pending\u003c/code\u003e と書かれているように、\u003cbr\u003e\nマイグレーションファイルとDBががまだ連携出来ていないという状況になります。\u003c/p\u003e\n\u003cp data-sourcepos=\"369:1-369:117\"\u003eでは、一旦サーバーを落として、マイグレーションファイルの状況も確認しましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"371:1-373:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails db:migrate status\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"375:1-375:93\"\u003eというコマンドを打ってみると、以下のような結果が返ってきます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"377:1-385:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails db:migrate:status\n\ndatabase: storage/development.sqlite3\n\nStatus   Migration ID    Migration Name\n\u003cspan class=\"nt\"\u003e--------------------------------------------------\u003c/span\u003e\ndown    20231027033159  Create tasks\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"387:1-387:42\"\u003e現在、新しく作ったファイルは\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"389:1-391:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003edown    20231027033159  Create tasks\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"393:1-393:165\"\u003e\u003ccode\u003edown\u003c/code\u003e となっており、この状態であれば、ファイルの内容を書き換える事で、書き換えた内容をDBに書き込む事が出来ます。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"395:1-395:15\"\u003e\n\u003cspan id=\"dbの制約\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#db%E3%81%AE%E5%88%B6%E7%B4%84\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eDBの制約\u003c/h3\u003e\n\u003cp data-sourcepos=\"397:1-397:131\"\u003eDBに反映させる前に、少し設定を足しておきたいので、早速ファイルの編集をしておきましょう。\u003c/p\u003e\n\u003cp data-sourcepos=\"399:1-399:63\"\u003e同ファイルを下記のように追記してください。\u003c/p\u003e\n\u003cp data-sourcepos=\"401:1-401:53\"\u003edb/migrate/20231027033159_create_tasks.rb【追記】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"402:1-416:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCreateTasks\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eMigration\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mf\"\u003e7.1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003echange\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecreate_table\u003c/span\u003e \u003cspan class=\"ss\"\u003e:tasks\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003estring\u003c/span\u003e \u003cspan class=\"ss\"\u003e:title\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e \u003cspan class=\"ss\"\u003e:description\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"ss\"\u003e:start_time\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e \u003cspan class=\"c1\"\u003e#追加部分\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"ss\"\u003e:end_time\u003c/span\u003e\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einteger\u003c/span\u003e \u003cspan class=\"ss\"\u003e:status\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003edefault: \u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e \u003cspan class=\"c1\"\u003e#追加部分\u003c/span\u003e\n\n      \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etimestamps\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"418:1-418:48\"\u003e書き加えたコードは、該当カラムに\u003c/p\u003e\n\u003cp data-sourcepos=\"420:1-420:66\"\u003e\u003ccode\u003enull: false\u003c/code\u003e という \u003ccode\u003e絶対に入力が必要な制限\u003c/code\u003e と、\u003c/p\u003e\n\u003cp data-sourcepos=\"422:1-422:84\"\u003e\u003ccode\u003edefault: 0\u003c/code\u003e という \u003ccode\u003e何も入力がない場合、初期値を0とする制限\u003c/code\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"424:1-424:42\"\u003eという設定を追加しています。\u003c/p\u003e\n\u003cp data-sourcepos=\"426:1-426:176\"\u003e実際には、\u003ccode\u003etitle\u003c/code\u003e などにも制約の設定しても良いのですが、一旦この通りに進めていただくと後々の相違点が出なくなっています。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"428:1-428:28\"\u003e\n\u003cspan id=\"マイグレーション\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eマイグレーション\u003c/h3\u003e\n\u003cp data-sourcepos=\"430:1-430:59\"\u003eでは、DBとの同期を行います。ターミナルに\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"432:1-434:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails db:migrate\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"436:1-436:25\"\u003eと打ってみます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"438:1-444:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e todo_app % rails db:migrate\n\u003cspan class=\"o\"\u003e==\u003c/span\u003e 20231027073408 CreateTasks: migrating \u003cspan class=\"o\"\u003e======================================\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e--\u003c/span\u003e create_table\u003cspan class=\"o\"\u003e(\u003c/span\u003e:tasks\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n   -\u0026gt; 0.0010s\n\u003cspan class=\"o\"\u003e==\u003c/span\u003e 20231027073408 CreateTasks: migrated \u003cspan class=\"o\"\u003e(\u003c/span\u003e0.0010s\u003cspan class=\"o\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=============================\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"446:1-446:44\"\u003eこのように返ってくればOKです。\u003c/p\u003e\n\u003cp data-sourcepos=\"448:1-448:113\"\u003e\u003ccode\u003e-- create_table(:tasks)\u003c/code\u003e と表示されていますね。 \u003ccode\u003etasks\u003c/code\u003e というテーブルが作られました。\u003c/p\u003e\n\u003cp data-sourcepos=\"450:1-450:97\"\u003e現在のDBの状況は、\u003ccode\u003emigrate\u003c/code\u003e を行うと \u003ccode\u003edb/schema.rb\u003c/code\u003e に自動で記載されます。\u003c/p\u003e\n\u003cp data-sourcepos=\"452:1-452:24\"\u003edb/schema.rb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"453:1-478:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e# This file is auto-generated from the current state of the database. Instead\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# of editing this file, please use the migrations feature of Active Record to\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# incrementally modify your database, and then regenerate this schema definition.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# This file is the source Rails uses to define your schema when running `bin/rails\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# db:schema:load`. When creating a new database, `bin/rails db:schema:load` tends to\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# be faster and is potentially less error prone than running all of your\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# migrations from scratch. Old migrations may fail to apply correctly if those\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# migrations use external dependencies or application code.\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# It's strongly recommended that you check this file into your version control system.\u003c/span\u003e\n\n\u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eSchema\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mf\"\u003e7.1\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nf\"\u003edefine\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"ss\"\u003eversion: \u003c/span\u003e\u003cspan class=\"mi\"\u003e2023_10_27_073408\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003ecreate_table\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"tasks\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eforce: :cascade\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003estring\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"title\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etext\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"description\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"start_time\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"end_time\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einteger\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"status\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003edefault: \u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"created_at\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edatetime\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"updated_at\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"480:1-480:117\"\u003e自動で書き込みがされますので、基本的このファイルを私達が触ることはありません。\u003c/p\u003e\n\u003cp data-sourcepos=\"482:1-482:60\"\u003eまた、マイグレーションが通った事で、再び\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"484:1-486:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % rails db:migrate:status\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"488:1-488:39\"\u003eを実行してみます。すると、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"490:1-498:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e todo_app % rails db:migrate:status\n\ndatabase: storage/development.sqlite3\n\n Status   Migration ID    Migration Name\n\u003cspan class=\"nt\"\u003e--------------------------------------------------\u003c/span\u003e\n   up     20231027073408  Create tasks\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"500:1-500:111\"\u003eマイグレーションファイルのステータスが、 \u003ccode\u003eup\u003c/code\u003e になっているのが確認できます。\u003c/p\u003e\n\u003cp data-sourcepos=\"502:1-502:136\"\u003e\u003ccode\u003eup\u003c/code\u003e　になっている状態のマイグレーションファイルは編集できないので、気を付けておきましょう。\u003c/p\u003e\n\u003cp data-sourcepos=\"504:1-506:50\"\u003e間違った場合は、 \u003ccode\u003erails db:rollback\u003c/code\u003e で、\u003cbr\u003e\nマイグレーションファイルの新しい順から、\u003cbr\u003e\n一つずつ \u003ccode\u003edown\u003c/code\u003e に戻す事が可能です。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"508:1-508:46\"\u003e\n\u003cspan id=\"4ルーティングとトップページ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#4%E3%83%AB%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e4．ルーティングとトップページ\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"510:1-510:28\"\u003e\n\u003cspan id=\"ルーティングとは\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%AB%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%E3%81%A8%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eルーティングとは\u003c/h3\u003e\n\u003cp data-sourcepos=\"512:1-512:166\"\u003eルーティングとは リクエストされるURLに対して、どの \u003ccode\u003econtroller\u003c/code\u003e の、どの \u003ccode\u003eaction\u003c/code\u003e を実行するかの割り振りを行う場所です。\u003c/p\u003e\n\u003cp data-sourcepos=\"514:1-515:171\"\u003eURLを通していないアクションは使用できない事になりますので、\u003cbr\u003e\n極論を言えば、開発途中のコードが混入していてもルーティングさえ管理出来ていれば、実行されないので安心という事です。\u003c/p\u003e\n\u003cp data-sourcepos=\"517:1-517:86\"\u003eでは、ファイルを見てみましょう。 \u003ccode\u003econfig/routes.rb\u003c/code\u003e を開きます。\u003c/p\u003e\n\u003cp data-sourcepos=\"519:1-519:28\"\u003econfig/routes.rb【確認】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"520:1-532:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"no\"\u003eRails\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eroutes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edraw\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eresources\u003c/span\u003e \u003cspan class=\"ss\"\u003e:tasks\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# Define your application routes per the DSL in https://guides.rubyonrails.org/routing.html\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# Reveal health status on /up that returns 200 if the app boots with no exceptions, otherwise 500.\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# Can be used by load balancers and uptime monitors to verify that the app is live.\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eget\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"up\"\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"rails/health#show\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eas: :rails_health_check\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e# Defines the root path route (\"/\")\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# root \"posts#index\"\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"534:1-534:75\"\u003e実はすでに \u003ccode\u003escaffold\u003c/code\u003e によって書き込みが行われており、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"536:1-538:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eresources :tasks\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"540:1-540:111\"\u003eの部分がこれに当たります。たった一行ですが、ルーティングを確認するコマンド\u003c/p\u003e\n\u003cp data-sourcepos=\"542:1-542:84\"\u003e\u003ccode\u003erails routes\u003c/code\u003e でどういった結果を産んでいるかを確認できます。\u003c/p\u003e\n\u003cp data-sourcepos=\"544:1-544:36\"\u003eでは、調べてみましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"546:1-548:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e todo_app % rails routes \u003cspan class=\"nt\"\u003e-c\u003c/span\u003e tasks\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"550:1-550:42\"\u003eターミナルこのように打つと、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"552:1-562:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e   Prefix Verb   URI Pattern               Controller#Action\n    tasks GET    /tasks\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e          tasks#index\n          POST   /tasks\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e          tasks#create\n new_task GET    /tasks/new\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e      tasks#new\nedit_task GET    /tasks/:id/edit\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e tasks#edit\n     task GET    /tasks/:id\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e      tasks#show\n          PATCH  /tasks/:id\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e      tasks#update\n          PUT    /tasks/:id\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e      tasks#update\n          DELETE /tasks/:id\u003cspan class=\"o\"\u003e(\u003c/span\u003e.:format\u003cspan class=\"o\"\u003e)\u003c/span\u003e      tasks#destroy\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"564:1-564:45\"\u003eこのような結果が返ってきます。\u003c/p\u003e\n\u003cp data-sourcepos=\"566:1-566:99\"\u003eこれは、どのURLとアクションが繋がっているかを表示した表になります。\u003c/p\u003e\n\u003cp data-sourcepos=\"568:1-568:112\"\u003eたったの一行の結果がCRUD操作に必要なルーティング全てを決定しているようです。\u003c/p\u003e\n\u003cp data-sourcepos=\"570:1-570:117\"\u003e各ルートに関しては、後ほど改めて触れますので、一旦ここまでにしておきましょう。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"572:1-572:22\"\u003e\n\u003cspan id=\"トップページ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%88%E3%83%83%E3%83%97%E3%83%9A%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eトップページ\u003c/h3\u003e\n\u003cp data-sourcepos=\"574:1-574:106\"\u003eただし、この状態にはトップページがありません。 \u003ccode\u003eroutes.rb\u003c/code\u003e 内のコメントにも\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"576:1-579:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e  # Defines the root path route (\"/\")\n  # root \"posts#index\"\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"581:1-581:93\"\u003eこのような記載があり、\u003ccode\u003eroot path\u003c/code\u003e を定義する記述が書いてあります。\u003c/p\u003e\n\u003cp data-sourcepos=\"583:1-583:64\"\u003eですので、これに従い \u003ccode\u003eroutes.rb\u003c/code\u003e を編集します。\u003c/p\u003e\n\u003cp data-sourcepos=\"585:1-585:28\"\u003econfig/routes.rb【編集】\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"586:1-594:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"no\"\u003eRails\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eapplication\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eroutes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edraw\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eroot\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"tasks#index\"\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eresources\u003c/span\u003e \u003cspan class=\"ss\"\u003e:tasks\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# Reveal health status on /up that returns 200 if the app boots with no exceptions, otherwise 500.\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e# Can be used by load balancers and uptime monitors to verify that the app is live.\u003c/span\u003e\n  \u003cspan class=\"n\"\u003eget\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"up\"\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"rails/health#show\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003eas: :rails_health_check\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"596:1-596:66\"\u003e\u003ccode\u003eroot \"tasks#index\"\u003c/code\u003e というコードが足されています。\u003c/p\u003e\n\u003cp data-sourcepos=\"598:1-598:12\"\u003eこれは、\u003c/p\u003e\n\u003cp data-sourcepos=\"600:1-600:133\"\u003eトップページ(root) にアクセスすると、 \u003ccode\u003etasks\u003c/code\u003e コントローラーの \u003ccode\u003eindex\u003c/code\u003e アクションを実行しますよ。\u003c/p\u003e\n\u003cp data-sourcepos=\"602:1-602:126\"\u003eという意味になります。これでトップページがデフォルト画面から変更されているはずです。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"604:1-604:25\"\u003e\n\u003cspan id=\"単数形-複数形\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8D%98%E6%95%B0%E5%BD%A2-%E8%A4%87%E6%95%B0%E5%BD%A2\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e単数形? 複数形?\u003c/h3\u003e\n\u003cp data-sourcepos=\"606:1-606:205\"\u003eちょっと不思議なのが、\u003ccode\u003etask\u003c/code\u003e なのか \u003ccode\u003etasks\u003c/code\u003e なのか・・・モデル名は単数でしたが、単数と複数の名称が混在していてちょっと分からなくなりそうです。\u003c/p\u003e\n\u003cp data-sourcepos=\"608:1-608:169\"\u003e簡単な覚え方として \u003ccode\u003eモデル名\u003c/code\u003e は \u003ccode\u003e単数形\u003c/code\u003e で、 \u003ccode\u003eコントローラー名\u003c/code\u003e は \u003ccode\u003e複数形\u003c/code\u003e、 DBの\u003ccode\u003eテーブル名\u003c/code\u003e も \u003ccode\u003e複数形\u003c/code\u003e となります。\u003c/p\u003e\n\u003cp data-sourcepos=\"610:1-610:125\"\u003eまた、度々Railsでは厳密に単複を使い分ける場面がありますので、都度覚えていきましょう。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"612:1-612:23\"\u003e\n\u003cspan id=\"crud操作の確認\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#crud%E6%93%8D%E4%BD%9C%E3%81%AE%E7%A2%BA%E8%AA%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eCRUD操作の確認\u003c/h3\u003e\n\u003cp data-sourcepos=\"614:1-614:47\"\u003eでは、再び \u003ccode\u003erails s\u003c/code\u003e で起動します。\u003c/p\u003e\n\u003cp data-sourcepos=\"616:1-616:84\"\u003e今度はエラーとならず、このような画面が出てくるはずです。\u003c/p\u003e\n\u003cp data-sourcepos=\"618:1-618:131\"\u003e\u003ca href=\"https://gyazo.com/1c5454cfbb37f648aaa7f0bb15ac4122\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F1c5454cfbb37f648aaa7f0bb15ac4122.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0780d0bdb72ff57608ebb7b5325fa1ac\" alt=\"Image from Gyazo\" data-canonical-src=\"https://i.gyazo.com/1c5454cfbb37f648aaa7f0bb15ac4122.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F1c5454cfbb37f648aaa7f0bb15ac4122.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ebd813433b63a431a7945007de905f59 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"620:1-620:36\"\u003eもう操作も出来ますので、\u003c/p\u003e\n\u003cp data-sourcepos=\"622:1-622:131\"\u003e\u003ca href=\"https://gyazo.com/1ded815683103db5ff27bdfd658e948b\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F1ded815683103db5ff27bdfd658e948b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9c528993a415ac34978bf4bfd89b3004\" alt=\"Image from Gyazo\" data-canonical-src=\"https://i.gyazo.com/1ded815683103db5ff27bdfd658e948b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F1ded815683103db5ff27bdfd658e948b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=10f187a077ce2d42978f17a292316ea2 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"624:1-624:48\"\u003eリンクから、新規作成を行ったり、\u003c/p\u003e\n\u003cp data-sourcepos=\"626:1-626:131\"\u003e\u003ca href=\"https://gyazo.com/65d8b10d6808dfbd386519dedc04270b\" rel=\"nofollow noopener\" target=\"_blank\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F65d8b10d6808dfbd386519dedc04270b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4623bf9d7530e8446ed225cf76c9c6c8\" alt=\"Image from Gyazo\" data-canonical-src=\"https://i.gyazo.com/65d8b10d6808dfbd386519dedc04270b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fi.gyazo.com%2F65d8b10d6808dfbd386519dedc04270b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=31fbd226db4de3f9bc4e469fb3c8fbd4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"628:1-628:57\"\u003e表示をしたり出来るようになっています。\u003c/p\u003e\n\u003cp data-sourcepos=\"630:1-630:38\"\u003eこの動作ができればOKです。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"632:1-632:9\"\u003e\n\u003cspan id=\"3-git\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-git\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. git\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"634:1-634:7\"\u003e\n\u003cspan id=\"git\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#git\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003egit\u003c/h3\u003e\n\u003cp data-sourcepos=\"636:1-636:48\"\u003eここまでを保存しておきましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"638:1-642:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003etodo_app % git init\ntodo_app % git add \u003cspan class=\"nb\"\u003e.\u003c/span\u003e\ntodo_app % git commit \u003cspan class=\"nt\"\u003e-m\u003c/span\u003e \u003cspan class=\"s2\"\u003e\" ScaffoldでTaskを作成・rootを設定\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003ch3 data-sourcepos=\"644:1-644:10\"\u003e\n\u003cspan id=\"github\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#github\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eGitHub\u003c/h3\u003e\n\u003cp data-sourcepos=\"646:1-646:121\"\u003eGithubの設定ができているのであれば、同名のリポジトリを作成し、pushしておきましょう。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"648:1-648:15\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h2\u003e\n\u003cp data-sourcepos=\"650:1-650:51\"\u003e本チャプターはここまでとなります。\u003c/p\u003e\n\u003ch3 data-sourcepos=\"652:1-652:13\"\u003e\n\u003cspan id=\"次回は\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%AC%A1%E5%9B%9E%E3%81%AF\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e次回は\u003c/h3\u003e\n\u003cul data-sourcepos=\"654:1-657:0\"\u003e\n\u003cli data-sourcepos=\"654:1-654:11\"\u003eBootstrap\u003c/li\u003e\n\u003cli data-sourcepos=\"655:1-655:8\"\u003eassets\u003c/li\u003e\n\u003cli data-sourcepos=\"656:1-657:0\"\u003eView\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"658:1-658:18\"\u003eを学びます。\u003c/p\u003e\n\u003cp data-sourcepos=\"660:1-660:36\"\u003eここまでお疲れ様でした。\u003c/p\u003e\n",
      "body": "## はじめに\n\n### 前回は\n\nhttps://qiita.com/tomoaki-kimura/items/60da37868ad0c8afaa9e\n\n#### プロジェクトの作成として\n\n- asdf\n- railsコマンド\n\nについて学びました。\n\n### 今回は\n\n#### ScaffoldでTaskを作成・rootを設定として\n\n- scaffold\n- MVC\n- マイグレーション\n- ルーティング\n\nについて学びます。\n\nでは、はじめていきましょう。\n\n## 1. ScaffoldでCRUD操作の土台を作る\n\n### CRUD\n\n`CRUD` とは `Create(作成)` `Read(参照)` `Update(編集)` `Delete(削除)` の頭文字をとったもので、 \nデーター操作に欠かせない、4つの操作を表しています。\n\n### Scaffold\n\n`Scaffold` とは足場という意味です。\n\nRails には非常に協力な実装コマンドがいくつも存在しますが、\nその中でもこの `scaffold` は有名で、CRUD操作に必要なものを、コマンド一つで全て用意してくれます。\n\nでは、実際にやってみましょう。\n\nプロジェクトフォルダよりコマンドを実行します。\n\n```zsh\ntodo_app % rails g scaffold Task title description:text start_time:datetime end_time:datetime status:integer\n```\n\nここのコマンドの意味は、\n\n`Task` という名前で `title` `description` `status` という項目を持った　`モデル` を作成して、 `CRUD` 操作に必要なものを全て作ってください。\n\nその際に、\n\n- `title` はデフォルトの `string` 型\n- `description` は `text` 型\n- `start_time` は `datetime` 型\n- `end_time` は `datetime` 型\n- `status` は `integer` 型\n\nとしてください。という命令になります。 すると、\n\n```zsh\n todo_app % rails g scaffold Task title description:text start_time:datetime end_time:datetime status:integer\n      invoke  active_record\n      create    db/migrate/20231027033159_create_tasks.rb\n      create    app/models/task.rb\n      invoke    test_unit\n      create      test/models/task_test.rb\n      create      test/fixtures/tasks.yml\n      invoke  resource_route\n       route    resources :tasks\n      invoke  scaffold_controller\n      create    app/controllers/tasks_controller.rb\n      invoke    erb\n      create      app/views/tasks\n      create      app/views/tasks/index.html.erb\n      create      app/views/tasks/edit.html.erb\n      create      app/views/tasks/show.html.erb\n      create      app/views/tasks/new.html.erb\n      create      app/views/tasks/_form.html.erb\n      create      app/views/tasks/_task.html.erb\n      invoke    resource_route\n      invoke    test_unit\n      create      test/controllers/tasks_controller_test.rb\n      create      test/system/tasks_test.rb\n      invoke    helper\n      create      app/helpers/tasks_helper.rb\n      invoke      test_unit\n      invoke    jbuilder\n      create      app/views/tasks/index.json.jbuilder\n      create      app/views/tasks/show.json.jbuilder\n      create      app/views/tasks/_task.json.jbuilder\n```\n\nこのような沢山のファイルが作られたというログが流れてきます。\nもちろん最初から全てはつかいませんが、主要なものを見ていきましょう。\n\n## 2. Model View Controller の確認\n\n### MVC\n\nMVCとは、\n\n- モデル ( `app/models/task.rb` )\n- コントローラー ( `app/controllers/tasks_controller.rb` )\n- ビュー ( `app/views/tasks` )\n\n辺りは、頻繁に参照するはずです。では、ひとつずつファイルの確認をしておきましょう。\n\n### Model\n\nモデルは、テーブル操作をするためのロジックを書く場所となります。\n\n現状は、何もありませんので、このように空になっています。\n\napp/models/task.rb\n```ruby\nclass Task \u003c ApplicationRecord\nend\n```\n\n### Controller\n\nコントローラーは、リクエストされたURLに対応した動かすメソッドを書く場所となります。\n\nリクエストがあって動き、レコードの操作を命令したり、次の画面に遷移したりという命令を下します。\n\napp/controllers/tasks_controller.rb【確認】\n```ruby\nclass TasksController \u003c ApplicationController\n  before_action :set_task, only: %i[ show edit update destroy ]\n\n  # GET /tasks or /tasks.json\n  def index\n    @tasks = Task.all\n  end\n\n  # GET /tasks/1 or /tasks/1.json\n  def show\n  end\n\n  # GET /tasks/new\n  def new\n    @task = Task.new\n  end\n\n  # GET /tasks/1/edit\n  def edit\n  end\n\n  # POST /tasks or /tasks.json\n  def create\n    @task = Task.new(task_params)\n\n    respond_to do |format|\n      if @task.save\n        format.html { redirect_to task_url(@task), notice: \"Task was successfully created.\" }\n        format.json { render :show, status: :created, location: @task }\n      else\n        format.html { render :new, status: :unprocessable_entity }\n        format.json { render json: @task.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /tasks/1 or /tasks/1.json\n  def update\n    respond_to do |format|\n      if @task.update(task_params)\n        format.html { redirect_to task_url(@task), notice: \"Task was successfully updated.\" }\n        format.json { render :show, status: :ok, location: @task }\n      else\n        format.html { render :edit, status: :unprocessable_entity }\n        format.json { render json: @task.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /tasks/1 or /tasks/1.json\n  def destroy\n    @task.destroy!\n\n    respond_to do |format|\n      format.html { redirect_to tasks_url, notice: \"Task was successfully destroyed.\" }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_task\n      @task = Task.find(params[:id])\n    end\n\n    # Only allow a list of trusted parameters through.\n    def task_params\n      params.require(:task).permit(:title, :description, :start_time, :end_time, :status)\n    end\nend\n```\n\nメソッドを見てみると、\n\n`index` `show` `new` `edit` `create` `update` `destroy`\n\nというメソッドが存在しますが、これらのメソッドは `アクション` と呼ばれており、これらがリクエスト毎の命令を持っています。\n\n概ねの使い方は、以下のようになっています。\n\n| アクション名  | 役割                  |\n|---------|---------------------|\n| index   | 登録済みレコードの一覧表示画面     |\n| show    | 登録済みレコードの個別表示画面     |\n| new     | 新しいレコードの作成のための入力画面  |\n| edit    | 登録済みレコードの編集のための入力画面 |    \n| create  | 新しいレコードを登録する        |\n| update  | 登録済みレコードを編集する       |\n| destroy | 登録済みレコードを削除する       |\n\n一方で、 `private` 以下に書かれたプライベートメソッド\n\n```ruby\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_task\n      @task = Task.find(params[:id])\n    end\n\n    # Only allow a list of trusted parameters through.\n    def task_params\n      params.require(:task).permit(:title, :description, :status)\n    end\n```\n\nこれらに関しては、アクションとは呼びません。\n\nこのコントローラー内の重複するような記述をすっきりさせる為に補助的に書かれています。\n\n### View\n\nビューは `html` に当たるファイルを管理する場所となります。\nアクションで言うところの、 `index` `show` `new` `edit` の表示部分のコードが書かれています。拡張子に `erb` が付いているのが特徴です。\n\nそれぞれ確認しておきましょう。\n\n#### index\n\napp/views/tasks/index.html.erb【確認】\n```ruby\n\u003cp style=\"color: green\"\u003e\u003c%= notice %\u003e\u003c/p\u003e\n\n\u003ch1\u003eTasks\u003c/h1\u003e\n\n\u003cdiv id=\"tasks\"\u003e\n  \u003c% @tasks.each do |task| %\u003e\n    \u003c%= render task %\u003e\n    \u003cp\u003e\n      \u003c%= link_to \"Show this task\", task %\u003e\n    \u003c/p\u003e\n  \u003c% end %\u003e\n\u003c/div\u003e\n\n\u003c%= link_to \"New task\", new_task_path %\u003e\n```\n\n#### show\n\napp/views/tasks/show.html.erb【確認】\n```ruby\n\u003cp style=\"color: green\"\u003e\u003c%= notice %\u003e\u003c/p\u003e\n\n\u003c%= render @task %\u003e\n\n\u003cdiv\u003e\n  \u003c%= link_to \"Edit this task\", edit_task_path(@task) %\u003e |\n  \u003c%= link_to \"Back to tasks\", tasks_path %\u003e\n\n  \u003c%= button_to \"Destroy this task\", @task, method: :delete %\u003e\n\u003c/div\u003e\n```\n#### new\n\napp/views/tasks/new.html.erb【確認】\n```ruby\n\u003ch1\u003eNew task\u003c/h1\u003e\n\n\u003c%= render \"form\", task: @task %\u003e\n\n\u003cbr\u003e\n\n\u003cdiv\u003e\n  \u003c%= link_to \"Back to tasks\", tasks_path %\u003e\n\u003c/div\u003e\n```\n\n#### edit\n\napp/views/tasks/edit.html.erb【確認】\n```ruby\n\u003ch1\u003eEditing task\u003c/h1\u003e\n\n\u003c%= render \"form\", task: @task %\u003e\n\n\u003cbr\u003e\n\n\u003cdiv\u003e\n  \u003c%= link_to \"Show this task\", @task %\u003e |\n  \u003c%= link_to \"Back to tasks\", tasks_path %\u003e\n\u003c/div\u003e\n```\n\nあとは、ファイル名が `_` から始まっている、\n\n`app/views/tasks/_form.html.erb`\n\n`app/views/tasks/_task.html.erb`\n\nこれらのファイルがありますが、これは上で紹介した `index` `show` `new` `edit` の中で、 `render` メソッドで呼び出されて使っていますが、これらはまた後ほど触れていきます。\n\nこれらMVC用のファイルを書き換える事によってUIやデーターベース操作に関する事を賄う事ができます。\n\n## 3. migration を実行し、DBとモデルを連携させる\n\n### マイグレーションファイル\n\nCRUD操作可能という事は、データーの保存にはDB(データーベース)を使う訳ですが、DBとアプリケーションを結ぶ為の機能として `migration` があります。\n\nその設定は、今回のような `Scaffold` でも生成されますし、 `Model` 単体で作ったり、変更を行う際に生成されます。\n\nこれを `マイグレーションファイル`　と言います。\n\n今回は `Scaffold` によって、 `db/migrate/20231027033159_create_tasks.rb` (数字の部分は作成の日時が入るのでそれぞれ別の数値です) のようなファイルが作成されています。\n\ndb/migrate/20231027033159_create_tasks.rb\n```ruby\nclass CreateTasks \u003c ActiveRecord::Migration[7.1]\n  def change\n    create_table :tasks do |t|\n      t.string :title\n      t.text :description\n      t.datetime :start_time\n      t.datetime :end_time\n      t.integer :status\n\n      t.timestamps\n    end\n  end\nend\n```\n\nこれらがDBにテーブルとして設定する内容となります。\n\n現在は、まだDBにこれらの情報が登録されていません。少し確認してみましょう。\n\n```zsh\ntodo_app % rails s\n```\n\nと打ってみると、サーバーが起動し、 `localhost:3000` でアクセスが可能となります。\n\nが、\n\n[![Image from Gyazo](https://i.gyazo.com/133f11216ec32dfd0e80df874036a3cb.png)](https://gyazo.com/133f11216ec32dfd0e80df874036a3cb)\n\nこのようなエラーとなります。これは、 `Migration are pending` と書かれているように、\nマイグレーションファイルとDBががまだ連携出来ていないという状況になります。\n\nでは、一旦サーバーを落として、マイグレーションファイルの状況も確認しましょう。\n\n```zsh\ntodo_app % rails db:migrate status\n```\n\nというコマンドを打ってみると、以下のような結果が返ってきます。\n\n```zsh\ntodo_app % rails db:migrate:status\n\ndatabase: storage/development.sqlite3\n\nStatus   Migration ID    Migration Name\n--------------------------------------------------\ndown    20231027033159  Create tasks\n```\n\n現在、新しく作ったファイルは\n\n```\ndown    20231027033159  Create tasks\n```\n\n`down` となっており、この状態であれば、ファイルの内容を書き換える事で、書き換えた内容をDBに書き込む事が出来ます。\n\n### DBの制約\n\nDBに反映させる前に、少し設定を足しておきたいので、早速ファイルの編集をしておきましょう。\n\n同ファイルを下記のように追記してください。\n\ndb/migrate/20231027033159_create_tasks.rb【追記】\n```ruby\nclass CreateTasks \u003c ActiveRecord::Migration[7.1]\n  def change\n    create_table :tasks do |t|\n      t.string :title\n      t.text :description\n      t.datetime :start_time, null: false #追加部分\n      t.datetime :end_time\n      t.integer :status, default: 0, null: false #追加部分\n\n      t.timestamps\n    end\n  end\nend\n```\n\n書き加えたコードは、該当カラムに\n\n`null: false` という `絶対に入力が必要な制限` と、\n\n`default: 0` という `何も入力がない場合、初期値を0とする制限` \n\nという設定を追加しています。\n\n実際には、`title` などにも制約の設定しても良いのですが、一旦この通りに進めていただくと後々の相違点が出なくなっています。\n\n### マイグレーション\n\nでは、DBとの同期を行います。ターミナルに\n\n```zsh\ntodo_app % rails db:migrate\n```\n\nと打ってみます。 \n\n```zsh\n todo_app % rails db:migrate\n== 20231027073408 CreateTasks: migrating ======================================\n-- create_table(:tasks)\n   -\u003e 0.0010s\n== 20231027073408 CreateTasks: migrated (0.0010s) =============================\n```\n\nこのように返ってくればOKです。\n\n`-- create_table(:tasks)` と表示されていますね。 `tasks` というテーブルが作られました。\n\n現在のDBの状況は、`migrate` を行うと `db/schema.rb` に自動で記載されます。\n\ndb/schema.rb【確認】\n```ruby\n# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# This file is the source Rails uses to define your schema when running `bin/rails\n# db:schema:load`. When creating a new database, `bin/rails db:schema:load` tends to\n# be faster and is potentially less error prone than running all of your\n# migrations from scratch. Old migrations may fail to apply correctly if those\n# migrations use external dependencies or application code.\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema[7.1].define(version: 2023_10_27_073408) do\n  create_table \"tasks\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.datetime \"start_time\", null: false\n    t.datetime \"end_time\"\n    t.integer \"status\", default: 0, null: false\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\nend\n```\n\n自動で書き込みがされますので、基本的このファイルを私達が触ることはありません。\n\nまた、マイグレーションが通った事で、再び\n\n```zsh\ntodo_app % rails db:migrate:status\n```\n\nを実行してみます。すると、\n\n```zsh\n todo_app % rails db:migrate:status\n\ndatabase: storage/development.sqlite3\n\n Status   Migration ID    Migration Name\n--------------------------------------------------\n   up     20231027073408  Create tasks\n```\n\nマイグレーションファイルのステータスが、 `up` になっているのが確認できます。\n\n`up`　になっている状態のマイグレーションファイルは編集できないので、気を付けておきましょう。\n\n間違った場合は、 `rails db:rollback` で、\nマイグレーションファイルの新しい順から、\n一つずつ `down` に戻す事が可能です。\n\n## 4．ルーティングとトップページ\n\n### ルーティングとは\n\nルーティングとは リクエストされるURLに対して、どの `controller` の、どの `action` を実行するかの割り振りを行う場所です。\n\nURLを通していないアクションは使用できない事になりますので、\n極論を言えば、開発途中のコードが混入していてもルーティングさえ管理出来ていれば、実行されないので安心という事です。\n\nでは、ファイルを見てみましょう。 `config/routes.rb` を開きます。\n\nconfig/routes.rb【確認】\n```ruby\nRails.application.routes.draw do\n  resources :tasks\n  # Define your application routes per the DSL in https://guides.rubyonrails.org/routing.html\n\n  # Reveal health status on /up that returns 200 if the app boots with no exceptions, otherwise 500.\n  # Can be used by load balancers and uptime monitors to verify that the app is live.\n  get \"up\" =\u003e \"rails/health#show\", as: :rails_health_check\n\n  # Defines the root path route (\"/\")\n  # root \"posts#index\"\nend\n```\n\n実はすでに `scaffold` によって書き込みが行われており、\n\n```\nresources :tasks\n```\n\nの部分がこれに当たります。たった一行ですが、ルーティングを確認するコマンド\n\n`rails routes` でどういった結果を産んでいるかを確認できます。\n\nでは、調べてみましょう。\n\n```zsh\n todo_app % rails routes -c tasks\n```\n\nターミナルこのように打つと、\n\n```zsh\n   Prefix Verb   URI Pattern               Controller#Action\n    tasks GET    /tasks(.:format)          tasks#index\n          POST   /tasks(.:format)          tasks#create\n new_task GET    /tasks/new(.:format)      tasks#new\nedit_task GET    /tasks/:id/edit(.:format) tasks#edit\n     task GET    /tasks/:id(.:format)      tasks#show\n          PATCH  /tasks/:id(.:format)      tasks#update\n          PUT    /tasks/:id(.:format)      tasks#update\n          DELETE /tasks/:id(.:format)      tasks#destroy\n```\n\nこのような結果が返ってきます。\n\nこれは、どのURLとアクションが繋がっているかを表示した表になります。\n\nたったの一行の結果がCRUD操作に必要なルーティング全てを決定しているようです。\n\n各ルートに関しては、後ほど改めて触れますので、一旦ここまでにしておきましょう。\n\n### トップページ\n\nただし、この状態にはトップページがありません。 `routes.rb` 内のコメントにも\n\n```\n  # Defines the root path route (\"/\")\n  # root \"posts#index\"\n```\n\nこのような記載があり、`root path` を定義する記述が書いてあります。\n\nですので、これに従い `routes.rb` を編集します。\n\nconfig/routes.rb【編集】\n```ruby\nRails.application.routes.draw do\n  root \"tasks#index\"\n  resources :tasks\n  # Reveal health status on /up that returns 200 if the app boots with no exceptions, otherwise 500.\n  # Can be used by load balancers and uptime monitors to verify that the app is live.\n  get \"up\" =\u003e \"rails/health#show\", as: :rails_health_check\nend\n```\n\n`root \"tasks#index\"` というコードが足されています。\n\nこれは、\n\nトップページ(root) にアクセスすると、 `tasks` コントローラーの `index` アクションを実行しますよ。\n\nという意味になります。これでトップページがデフォルト画面から変更されているはずです。\n\n### 単数形? 複数形?\n\nちょっと不思議なのが、`task` なのか `tasks` なのか・・・モデル名は単数でしたが、単数と複数の名称が混在していてちょっと分からなくなりそうです。\n\n簡単な覚え方として `モデル名` は `単数形` で、 `コントローラー名` は `複数形`、 DBの`テーブル名` も `複数形` となります。\n\nまた、度々Railsでは厳密に単複を使い分ける場面がありますので、都度覚えていきましょう。\n\n### CRUD操作の確認\n\nでは、再び `rails s` で起動します。\n\n今度はエラーとならず、このような画面が出てくるはずです。\n\n[![Image from Gyazo](https://i.gyazo.com/1c5454cfbb37f648aaa7f0bb15ac4122.png)](https://gyazo.com/1c5454cfbb37f648aaa7f0bb15ac4122)\n\nもう操作も出来ますので、\n\n[![Image from Gyazo](https://i.gyazo.com/1ded815683103db5ff27bdfd658e948b.png)](https://gyazo.com/1ded815683103db5ff27bdfd658e948b)\n\nリンクから、新規作成を行ったり、\n\n[![Image from Gyazo](https://i.gyazo.com/65d8b10d6808dfbd386519dedc04270b.png)](https://gyazo.com/65d8b10d6808dfbd386519dedc04270b)\n\n表示をしたり出来るようになっています。\n\nこの動作ができればOKです。\n\n## 3. git\n\n### git\n\nここまでを保存しておきましょう。\n\n```zsh\ntodo_app % git init\ntodo_app % git add .\ntodo_app % git commit -m \" ScaffoldでTaskを作成・rootを設定\"\n```\n\n### GitHub\n\nGithubの設定ができているのであれば、同名のリポジトリを作成し、pushしておきましょう。\n\n## おわりに\n\n本チャプターはここまでとなります。\n\n### 次回は\n\n- Bootstrap\n- assets\n- View\n\nを学びます。\n\nここまでお疲れ様でした。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T11:02:00+09:00",
      "group": null,
      "id": "7936127388d235b72011",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Ruby",
              "versions": []
          },
          {
              "name": "Rails",
              "versions": []
          }
      ],
      "title": "Rails7 で TODOアプリを作ろう ② (ScaffoldでTaskを作成・rootを設定) ",
      "updated_at": "2023-10-28T11:07:40+09:00",
      "url": "https://qiita.com/tomoaki-kimura/items/7936127388d235b72011",
      "user": {
          "description": "",
          "facebook_id": "",
          "followees_count": 5,
          "followers_count": 17,
          "github_login_name": "tomoaki-kimura",
          "id": "tomoaki-kimura",
          "items_count": 14,
          "linkedin_id": "",
          "location": "",
          "name": "木村 友昭",
          "organization": "",
          "permanent_id": 96913,
          "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/96913/profile-images/1473707037",
          "team_only": false,
          "twitter_screen_name": "Lize95445202",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"2:1-2:153\"\u003eScriptで、Userに初期パスワードを設定しつつ、そのパスワードを通知できるようにEventを生成する例を紹介します。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"4:1-4:8\"\u003e\n\u003cspan id=\"script\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#script\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eScript\u003c/h1\u003e\n\u003cp data-sourcepos=\"5:1-5:90\"\u003eあまり出来の良いScriptではありませんが、本質的な事を捉えます。\u003c/p\u003e\n\u003cp data-sourcepos=\"7:1-7:15\"\u003eここでは、\u003c/p\u003e\n\u003col data-sourcepos=\"9:1-11:0\"\u003e\n\u003cli data-sourcepos=\"9:1-9:57\"\u003eabel.tuterに初期パスワード「ServiceNow123!」\u003c/li\u003e\n\u003cli data-sourcepos=\"10:1-11:0\"\u003eabraham.lincolnに初期パスワード「ServiceNow456!」\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp data-sourcepos=\"12:1-12:27\"\u003eを設定しています。\u003c/p\u003e\n\u003cp data-sourcepos=\"14:1-16:190\"\u003eポイントは、passwardフィールドの設定にGlideRecordのsetDisplayValueメソッドを使用することです。\u003cbr\u003e\n初期パスワードという想定なので、password_needs_resetフィールドはtrueに設定します。\u003cbr\u003e\n最後にEvent Queにuser.initialpassword.setというEventを生成します。user.initialpassword.setは事前定義しておきます。ここでは、Eventの処理は割愛します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"JavaScript\" data-sourcepos=\"19:1-40:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eScript\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003earrUser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eabel.tuter\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eabraham.lincoln\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003earrPass\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eServiceNow123!\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eServiceNow456!\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nc\"\u003eGlideRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003esys_user\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003earrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eaddQuery\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003euser_name\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003earrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003equery\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e()){\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Set an initial password to a user.\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003euser_password\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esetDisplayValue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003earrPass\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003epassword_needs_reset\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esetWorkflow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Generate an event with the event registry \"user.initialpassword.set\".\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003egs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eeventQueue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003euser.initialpassword.set\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eemail\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"nx\"\u003earrPass\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e \n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003egrUser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einitialize\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"42:1-42:126\"\u003eUserとPasswordの対を二次元配列にする手もあります。定義の例としては、次のようになります。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"JavaScript\" data-sourcepos=\"44:1-49:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eScript\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003earr2UserPass\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eabel.tuter\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eServiceNow123!\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eabraham.lincoln\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eServiceNow456!\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"51:1-52:221\"\u003eUserとPasswordの組み合わせは事前にExcel等で整備して、Scriptにハードコードするようになっていますが、PasswordをScriptでランダム生成するような関数を作っても良いかもしれません。その場合、ユーザーにどのようなパスワードを通知したか、ログを残す必要があるかもしれません。\u003cbr\u003e\nまた、そのログもそうですし、通知用に生成したEventには、パスワードが平文で記録されているので、セキュリティの観点から手当てが必要になるかもしれません。\u003c/p\u003e\n",
      "body": "# はじめに\nScriptで、Userに初期パスワードを設定しつつ、そのパスワードを通知できるようにEventを生成する例を紹介します。\n\n# Script\nあまり出来の良いScriptではありませんが、本質的な事を捉えます。\n\nここでは、\n\n1. abel.tuterに初期パスワード「ServiceNow123!」\n1. abraham.lincolnに初期パスワード「ServiceNow456!」\n\nを設定しています。\n\nポイントは、passwardフィールドの設定にGlideRecordのsetDisplayValueメソッドを使用することです。\n初期パスワードという想定なので、password_needs_resetフィールドはtrueに設定します。\n最後にEvent Queにuser.initialpassword.setというEventを生成します。user.initialpassword.setは事前定義しておきます。ここでは、Eventの処理は割愛します。\n\n\n```JavaScript:Script\nvar arrUser = [\"abel.tuter\",\"abraham.lincoln\"];\nvar arrPass = [\"ServiceNow123!\",\"ServiceNow456!\"];\n\nvar grUser = new GlideRecord(\"sys_user\");\n\nfor (var i = 0; i \u003c arrUser.length; i++) {\n    grUser.addQuery(\"user_name\", arrUser[i]);\n    grUser.query();\n    if (grUser.next()){\n        // Set an initial password to a user.\n        grUser.user_password.setDisplayValue(arrPass[i]);\n        grUser.password_needs_reset=true;\n        grUser.setWorkflow(false);\n        grUser.update();\n\n        // Generate an event with the event registry \"user.initialpassword.set\".\n        gs.eventQueue(\"user.initialpassword.set\",grUser,grUser.email,arrPass[i]); \n    }\n    grUser.initialize();\n}\n```\n\nUserとPasswordの対を二次元配列にする手もあります。定義の例としては、次のようになります。\n\n```JavaScript:Script\nvar arr2UserPass = [\n    [\"abel.tuter\",\"ServiceNow123!\"],\n    [\"abraham.lincoln\",\"ServiceNow456!\"]\n];\n```\n\nUserとPasswordの組み合わせは事前にExcel等で整備して、Scriptにハードコードするようになっていますが、PasswordをScriptでランダム生成するような関数を作っても良いかもしれません。その場合、ユーザーにどのようなパスワードを通知したか、ログを残す必要があるかもしれません。\nまた、そのログもそうですし、通知用に生成したEventには、パスワードが平文で記録されているので、セキュリティの観点から手当てが必要になるかもしれません。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T10:59:25+09:00",
      "group": null,
      "id": "bd1648da9ef664885e90",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Notification",
              "versions": []
          },
          {
              "name": "ServiceNow",
              "versions": []
          },
          {
              "name": "scripting",
              "versions": []
          },
          {
              "name": "UserPassword",
              "versions": []
          }
      ],
      "title": "[ServiceNow] ScriptでUserの初期Passwordを設定して通知する",
      "updated_at": "2023-10-28T12:53:54+09:00",
      "url": "https://qiita.com/koburn/items/bd1648da9ef664885e90",
      "user": {
          "description": "ServiceNow、中の人",
          "facebook_id": "",
          "followees_count": 1,
          "followers_count": 0,
          "github_login_name": null,
          "id": "koburn",
          "items_count": 10,
          "linkedin_id": "",
          "location": "",
          "name": "Koburn （こばーん）",
          "organization": "",
          "permanent_id": 3490802,
          "profile_image_url": "https://secure.gravatar.com/avatar/d225e08a5e8ad361204b37368ba689d0",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:11\"\u003e\n\u003cspan id=\"やる事\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%84%E3%82%8B%E4%BA%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eやる事\u003c/h1\u003e\n\u003col data-sourcepos=\"3:1-6:0\"\u003e\n\u003cli data-sourcepos=\"3:1-3:53\"\u003e\n\u003ccode\u003egraphql-ruby\u003c/code\u003eで\u003ccode\u003eDataloader\u003c/code\u003eを使用する宣言\u003c/li\u003e\n\u003cli data-sourcepos=\"4:1-4:84\"\u003e\n\u003ccode\u003eDataloader\u003c/code\u003eは\u003ccode\u003emodel\u003c/code\u003eの\u003ccode\u003eassociations\u003c/code\u003eを事前読み込みする処理を実装\u003c/li\u003e\n\u003cli data-sourcepos=\"5:1-6:0\"\u003e実装した\u003ccode\u003eDataloader\u003c/code\u003eを\u003ccode\u003eType\u003c/code\u003eクラスで仕様します\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp data-sourcepos=\"7:1-7:50\"\u003e\u003ciframe id=\"qiita-embed-content__7f38d530024137818a765969b92e5cd1\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__7f38d530024137818a765969b92e5cd1\" data-content=\"https%3A%2F%2Fgithub.com%2FShopify%2Fgraphql-batch%2Ftree%2Fmain\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003ch2 data-sourcepos=\"9:1-9:56\"\u003e\n\u003cspan id=\"1-graphql-rubyでdataloaderを使用する宣言\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1-graphql-ruby%E3%81%A7dataloader%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%AE%A3%E8%A8%80\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1. \u003ccode\u003egraphql-ruby\u003c/code\u003eで\u003ccode\u003eDataloader\u003c/code\u003eを使用する宣言\u003c/h2\u003e\n\u003cp data-sourcepos=\"11:1-11:54\"\u003e\u003ccode\u003eapp_schema.rb\u003c/code\u003eで\u003ccode\u003edataloader\u003c/code\u003eを有効化します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"diff\" data-sourcepos=\"13:1-26:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/graphql/app_schema.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003eclass AppSchema \u0026lt; GraphQL::Schema\n\u003c/span\u003e\u003cspan class=\"gi\"\u003e+  use GraphQL::Dataloader\n\u003c/span\u003e\u003cspan class=\"err\"\u003e\n\u003c/span\u003e  disable_introspection_entry_points unless Rails.env.development?\n  \n  query(QueryType)\n\u003cspan class=\"err\"\u003e\n\u003c/span\u003e  max_complexity 200\n  max_depth 30\n  default_page_size 50\n  validate_max_errors 100\n\u003cspan class=\"p\"\u003eend\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch2 data-sourcepos=\"28:1-28:87\"\u003e\n\u003cspan id=\"2-dataloaderはmodelのassociationsを事前読み込みする処理を実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2-dataloader%E3%81%AFmodel%E3%81%AEassociations%E3%82%92%E4%BA%8B%E5%89%8D%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF%E3%81%99%E3%82%8B%E5%87%A6%E7%90%86%E3%82%92%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2. \u003ccode\u003eDataloader\u003c/code\u003eは\u003ccode\u003emodel\u003c/code\u003eの\u003ccode\u003eassociations\u003c/code\u003eを事前読み込みする処理を実装\u003c/h2\u003e\n\u003cp data-sourcepos=\"30:1-30:204\"\u003e\u003ccode\u003egraphql-batch\u003c/code\u003egemのリポジトリに\u003ccode\u003eActiveRecord\u003c/code\u003eの\u003ccode\u003ePreloader\u003c/code\u003eを扱うサンプルがあったので参考に以下のように\u003ccode\u003egraphql-ruby\u003c/code\u003eが提供している\u003ccode\u003edataloader\u003c/code\u003e機能で実装します\u003c/p\u003e\n\u003cp data-sourcepos=\"32:1-32:81\"\u003e\u003ciframe id=\"qiita-embed-content__15c46ff7f68492462bf595890929f38d\" src=\"https://qiita.com/embed-contents/link-card#qiita-embed-content__15c46ff7f68492462bf595890929f38d\" data-content=\"https%3A%2F%2Fgithub.com%2FShopify%2Fgraphql-batch%2Fblob%2Fmain%2Fexamples%2Fassociation_loader.rb\" frameborder=\"0\" scrolling=\"no\" loading=\"lazy\" style=\"width:100%;\" height=\"29\"\u003e\n\u003c/iframe\u003e\n\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"34:1-60:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/graphql/active_record_preloader.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e# frozen_string_literal: true\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eActiveRecordPreloader\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eGraphQL\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eDataloader\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eSource\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eattr_reader\u003c/span\u003e \u003cspan class=\"ss\"\u003e:model\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:association\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003einitialize\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@model\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emodel\u003c/span\u003e\n    \u003cspan class=\"vi\"\u003e@association\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003evalidate!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eActiveRecord\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eAssociations\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003ePreloader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e:,\u003c/span\u003e \u003cspan class=\"ss\"\u003eassociations: \u003c/span\u003e\u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ecall\u003c/span\u003e\n      \u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003erecord\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003erecord\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003epublic_send\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"kp\"\u003eprivate\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003evalidate!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"no\"\u003eTypeError\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"loader can't load association for \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e \u003cspan class=\"k\"\u003eunless\u003c/span\u003e \u003cspan class=\"n\"\u003erecords\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eall?\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"o\"\u003e|\u003c/span\u003e\u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"o\"\u003e|\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eis_a?\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereflect_on_association\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"no\"\u003eArgumentError\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"No association \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003eassociation\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e on \u003c/span\u003e\u003cspan class=\"si\"\u003e#{\u003c/span\u003e\u003cspan class=\"n\"\u003emodel\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch3 data-sourcepos=\"62:1-62:67\"\u003e\n\u003cspan id=\"3-実装したdataloaderをtypeクラスで仕様します\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#3-%E5%AE%9F%E8%A3%85%E3%81%97%E3%81%9Fdataloader%E3%82%92type%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E4%BB%95%E6%A7%98%E3%81%97%E3%81%BE%E3%81%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e3. 実装した\u003ccode\u003eDataloader\u003c/code\u003eを\u003ccode\u003eType\u003c/code\u003eクラスで仕様します\u003c/h3\u003e\n\u003cp data-sourcepos=\"64:1-64:62\"\u003e以下のように、\u003ccode\u003edataloader.with\u003c/code\u003eメソッドの引数に\u003c/p\u003e\n\u003cul data-sourcepos=\"66:1-69:0\"\u003e\n\u003cli data-sourcepos=\"66:1-66:37\"\u003e作成した\u003ccode\u003eActiveRecordPreloader\u003c/code\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"67:1-67:26\"\u003e\n\u003ccode\u003eActiveRecord\u003c/code\u003eの\u003ccode\u003emodel\u003c/code\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"68:1-69:0\"\u003e\n\u003ccode\u003emodel\u003c/code\u003eに紐づく\u003ccode\u003epreload\u003c/code\u003eしたい\u003ccode\u003eassociation\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"70:1-70:18\"\u003eを指定します\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"ruby\" data-sourcepos=\"72:1-81:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eapp/graphql/user_type.rb\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eUserType\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"no\"\u003eTypes\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eBaseObject\u003c/span\u003e\n  \u003cspan class=\"n\"\u003efield\u003c/span\u003e \u003cspan class=\"ss\"\u003e:email\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"no\"\u003eString\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n  \u003cspan class=\"n\"\u003efield\u003c/span\u003e \u003cspan class=\"ss\"\u003e:user_post\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"no\"\u003eUserPostType\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003enull: \u003c/span\u003e\u003cspan class=\"kp\"\u003efalse\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eprofile\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edataloader\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ewith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"no\"\u003eActiveRecordPreloader\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"no\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"ss\"\u003e:user_post\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eload\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eobject\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003cspan class=\"k\"\u003eend\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch1 data-sourcepos=\"83:1-83:8\"\u003e\n\u003cspan id=\"参考\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%8F%82%E8%80%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e参考\u003c/h1\u003e\n\u003cul data-sourcepos=\"85:1-87:0\"\u003e\n\u003cli data-sourcepos=\"85:1-85:53\"\u003e\u003ca href=\"https://graphql-ruby.org/dataloader/dataloader.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://graphql-ruby.org/dataloader/dataloader.html\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"86:1-87:0\"\u003e\u003ca href=\"https://graphql-ruby.org/dataloader/adopting.html#comparison-fetching-objects-in-sequence-dependent\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://graphql-ruby.org/dataloader/adopting.html#comparison-fetching-objects-in-sequence-dependent\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 data-sourcepos=\"88:1-88:8\"\u003e\n\u003cspan id=\"環境\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%92%B0%E5%A2%83\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e環境\u003c/h1\u003e\n\u003cul data-sourcepos=\"90:1-92:15\"\u003e\n\u003cli data-sourcepos=\"90:1-90:12\"\u003eruby 3.2.2\u003c/li\u003e\n\u003cli data-sourcepos=\"91:1-91:13\"\u003erails 7.0.8\u003c/li\u003e\n\u003cli data-sourcepos=\"92:1-92:15\"\u003egraphql 2.1.0\u003c/li\u003e\n\u003c/ul\u003e\n",
      "body": "# やる事\n\n1. `graphql-ruby`で`Dataloader`を使用する宣言\n2. `Dataloader`は`model`の`associations`を事前読み込みする処理を実装\n3. 実装した`Dataloader`を`Type`クラスで仕様します\n\nhttps://github.com/Shopify/graphql-batch/tree/main\n\n## 1. `graphql-ruby`で`Dataloader`を使用する宣言\n\n`app_schema.rb`で`dataloader`を有効化します。\n\n```diff:app/graphql/app_schema.rb\nclass AppSchema \u003c GraphQL::Schema\n+  use GraphQL::Dataloader\n\n  disable_introspection_entry_points unless Rails.env.development?\n  \n  query(QueryType)\n\n  max_complexity 200\n  max_depth 30\n  default_page_size 50\n  validate_max_errors 100\nend\n```\n\n## 2. `Dataloader`は`model`の`associations`を事前読み込みする処理を実装\n\n`graphql-batch`gemのリポジトリに`ActiveRecord`の`Preloader`を扱うサンプルがあったので参考に以下のように`graphql-ruby`が提供している`dataloader`機能で実装します\n\nhttps://github.com/Shopify/graphql-batch/blob/main/examples/association_loader.rb\n\n```ruby:app/graphql/active_record_preloader.rb\n# frozen_string_literal: true\n\nclass ActiveRecordPreloader \u003c GraphQL::Dataloader::Source\n  attr_reader :model, :association\n\n  def initialize(model, association)\n    @model = model\n    @association = association\n  end\n\n  def fetch(records)\n    validate!(records)\n    ::ActiveRecord::Associations::Preloader.new(records:, associations: association).call\n      records.map { |record| record.public_send(association) }\n    end\n  private\n\n  def validate!(records)\n    raise TypeError, \"loader can't load association for #{model}\" unless records.all? { |r| r.is_a?(model) }\n\n    return if model.reflect_on_association(association)\n\n    raise ArgumentError, \"No association #{association} on #{model}\"\n  end\nend\n```\n\n### 3. 実装した`Dataloader`を`Type`クラスで仕様します\n\n以下のように、`dataloader.with`メソッドの引数に\n\n- 作成した`ActiveRecordPreloader`\n- `ActiveRecord`の`model`\n- `model`に紐づく`preload`したい`association`\n\nを指定します\n\n```ruby:app/graphql/user_type.rb\nclass UserType \u003c Types::BaseObject\n  field :email, String, null: false\n  field :user_post, UserPostType, null: false\n\n  def profile\n    dataloader.with(ActiveRecordPreloader, ::User, :user_post).load(object)\n  end\nend\n```\n\n# 参考\n\n- https://graphql-ruby.org/dataloader/dataloader.html\n- https://graphql-ruby.org/dataloader/adopting.html#comparison-fetching-objects-in-sequence-dependent\n\n# 環境\n\n- ruby 3.2.2\n- rails 7.0.8\n- graphql 2.1.0\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T10:48:08+09:00",
      "group": null,
      "id": "b69d99f46fb482962cb4",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Ruby",
              "versions": []
          },
          {
              "name": "Rails",
              "versions": []
          },
          {
              "name": "GraphQL",
              "versions": []
          }
      ],
      "title": "`graphql-ruby`で`Dataloader`を使う",
      "updated_at": "2023-10-28T10:51:48+09:00",
      "url": "https://qiita.com/SoarTec-lab/items/b69d99f46fb482962cb4",
      "user": {
          "description": "freelance software developer.\r\nrails contributor: https://contributors.rubyonrails.org/contributors/shodai-suzuki/commits",
          "facebook_id": "",
          "followees_count": 6,
          "followers_count": 29,
          "github_login_name": "soartec-lab",
          "id": "SoarTec-lab",
          "items_count": 128,
          "linkedin_id": "",
          "location": "Japan Tokyo",
          "name": "SoarTec-lab",
          "organization": "",
          "permanent_id": 184760,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/184760/profile-images/1556024302",
          "team_only": false,
          "twitter_screen_name": "SoartecL",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003cp data-sourcepos=\"1:1-1:219\"\u003e\u003ca href=\"https://leafletjs.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLeaflet\u003c/a\u003eを使った地図アプリを作る上で試行錯誤したことをメモとして書いています。その機能あるよなど、なにかあればぜひコメントください。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"3:1-3:9\"\u003e\n\u003cspan id=\"概要\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%A6%82%E8%A6%81\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\u003ch3 data-sourcepos=\"4:1-4:22\"\u003e\n\u003cspan id=\"やりたいこと\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eやりたいこと\u003c/h3\u003e\n\u003cul data-sourcepos=\"5:1-7:0\"\u003e\n\u003cli data-sourcepos=\"5:1-5:81\"\u003eleafletで表示中の地図に、KMLファイルの内容を表示したい。\u003c/li\u003e\n\u003cli data-sourcepos=\"6:1-7:0\"\u003eKMLファイルで表示した各要素をカスタマイズしたい。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 data-sourcepos=\"8:1-8:10\"\u003e\n\u003cspan id=\"結論\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%90%E8%AB%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e結論\u003c/h3\u003e\n\u003cul data-sourcepos=\"9:1-11:0\"\u003e\n\u003cli data-sourcepos=\"9:1-11:0\"\u003e\n\u003ccode\u003eleaflet-kml\u003c/code\u003eの中に使われている関数を一部コピーして、カスタマイズ、\u003ccode\u003eleaflet-kml\u003c/code\u003eを上書きする。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 data-sourcepos=\"12:1-12:21\"\u003e\n\u003cspan id=\"使用するもの\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%82%82%E3%81%AE\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e使用するもの\u003c/h2\u003e\n\u003cul data-sourcepos=\"13:1-16:0\"\u003e\n\u003cli data-sourcepos=\"13:1-13:36\"\u003e\u003ca href=\"https://leafletjs.com/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eLeaflet\u003c/a\u003e\u003c/li\u003e\n\u003cli data-sourcepos=\"14:1-14:92\"\u003eleafletjsのKML表示プラグイン\u003ca href=\"https://github.com/windycom/leaflet-kml\" rel=\"nofollow noopener\" target=\"_blank\"\u003eleaflet-kml\u003c/a\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"15:1-16:0\"\u003eKMLの作成には\u003ca href=\"https://www.google.com/maps/\" rel=\"nofollow noopener\" target=\"_blank\"\u003eGoogle マイマップ\u003c/a\u003e、\u003ca href=\"\"\u003eGoogle Earth\u003c/a\u003eを利用しています。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 data-sourcepos=\"17:1-17:35\"\u003e\n\u003cspan id=\"0kmlファイルを作成する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#0kml%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e0,KMLファイルを作成する\u003c/h2\u003e\n\u003cp data-sourcepos=\"18:1-18:89\"\u003e\u003ccode\u003eスタート\u003c/code\u003eと\u003ccode\u003eゴール\u003c/code\u003eの2つのマーカーを立てたものを作りました。\u003c/p\u003e\n\u003ctable data-sourcepos=\"20:1-22:325\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"20:1-20:63\"\u003e\n\u003cth data-sourcepos=\"20:2-20:13\"\u003eGoogle Mymap\u003c/th\u003e\n\u003cth data-sourcepos=\"20:15-20:62\"\u003eGoogle MymapからKMLファイルを書き出し\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"22:1-22:325\"\u003e\n\u003ctd data-sourcepos=\"22:2-22:162\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/674297a6d428d71a6e7c4b22f68acd94118f22c1/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f65393166366563342d656161612d616333302d663630612d6363633762313730643633622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fe91f6ec4-eaaa-ac30-f60a-ccc7b170d63b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=2300c51c48edf2484a009277be35ea2a\" alt=\"スクリーンショット 2023-10-28 9.26.17.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/e91f6ec4-eaaa-ac30-f60a-ccc7b170d63b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fe91f6ec4-eaaa-ac30-f60a-ccc7b170d63b.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=3c9969023d10200261203e33047bb1e6 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"22:164-22:324\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/82c308fb4c02c879f140b6fafe73d32689b067a5/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f61346362626232642d343365352d376361642d306264642d3563356164666532366563342e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fa4cbbb2d-43e5-7cad-0bdd-5c5adfe26ec4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4ff9070a8050744473034b0cf18ad0ae\" alt=\"スクリーンショット 2023-10-28 9.26.33.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/a4cbbb2d-43e5-7cad-0bdd-5c5adfe26ec4.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fa4cbbb2d-43e5-7cad-0bdd-5c5adfe26ec4.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b96a1c80a5c876a8cb3224c6010f190b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp data-sourcepos=\"24:1-24:22\"\u003esample.kmlが完成。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"26:1-26:23\"\u003e\n\u003cspan id=\"1kmlを表示する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#1kml%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e1,KMLを表示する\u003c/h2\u003e\n\u003cp data-sourcepos=\"27:1-27:54\"\u003e単純にKMLファイルを読み込んで表示する\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"29:1-65:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eindex.html\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;html\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;head\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;title\u0026gt;\u003c/span\u003eLeaflet KML Example\u003cspan class=\"nt\"\u003e\u0026lt;/title\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003echarset=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"utf-8\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"viewport\"\u003c/span\u003e \u003cspan class=\"na\"\u003econtent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width=device-width, initial-scale=1.0\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet CSS --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;link\u003c/span\u003e \u003cspan class=\"na\"\u003erel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"stylesheet\"\u003c/span\u003e \u003cspan class=\"na\"\u003ehref=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet JavaScript --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet-KML Plugin --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/3.4.0/layer/vector/KML.js\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;body\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"map\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"height: 400px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;script\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Create a Leaflet map\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003emap\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003emap\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003esetView\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Set the initial map center and zoom level.\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Add a base layer (e.g., OpenStreetMap)\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etileLayer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ehttps://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"na\"\u003emaxZoom\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eaddTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Load and display a KML file on the map\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ekmlURL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003esample.kml\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ekmlLayer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eKML\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ekmlURL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"na\"\u003easync\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eaddTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/html\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"67:1-67:21\"\u003e表示したもの。\u003c/p\u003e\n\u003cp data-sourcepos=\"69:1-69:161\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/29087f19958f2ad1cd5c35f535966040f1c2cab8/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f62303062313832662d356233622d393364372d343739622d3861656236383662343032302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fb00b182f-5b3b-93d7-479b-8aeb686b4020.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f2809df3127bf7b71f23c45818f4f81e\" alt=\"スクリーンショット 2023-10-28 9.27.27.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/b00b182f-5b3b-93d7-479b-8aeb686b4020.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fb00b182f-5b3b-93d7-479b-8aeb686b4020.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9ff4f1f7ef1f1d512fb73f13e7b0cff5 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 data-sourcepos=\"71:1-71:44\"\u003e\n\u003cspan id=\"2ポップアップをカスタマイズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#2%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e2,ポップアップをカスタマイズ\u003c/h2\u003e\n\u003cp data-sourcepos=\"0:0-0:0\"\u003eマーカーをクリックした際に表示するポップアップにGPS座標を表示させます。\u003c/p\u003e\n\u003ctable data-sourcepos=\"72:1-75:340\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"72:1-72:119\"\u003e\n\u003cth data-sourcepos=\"72:108-72:112\"\u003eas-is\u003c/th\u003e\n\u003cth data-sourcepos=\"72:114-72:118\"\u003eto-be\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"75:1-75:340\"\u003e\n\u003ctd data-sourcepos=\"75:2-75:177\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/75ef2939e9ea62d5c2d8a63dee47322c5048b131/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f30323263633535642d346564382d376635372d383430372d3131613030616463393336372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2F022cc55d-4ed8-7f57-8407-11a00adc9367.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=dc4b004c5756a208df21c24ec15fef85\" alt=\"スクリーンショット 2023-10-28 9.27.27のコピー.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/022cc55d-4ed8-7f57-8407-11a00adc9367.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2F022cc55d-4ed8-7f57-8407-11a00adc9367.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ac3703782fe54a2cdb179ebd59278a3d 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"75:179-75:339\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/a8d6de59b1d1e3f6eda17fb7f30a74a65f5f73bf/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f62343037616234652d636438322d373535342d303932352d3165353136626663626633382e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fb407ab4e-cd82-7554-0925-1e516bfcbf38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=78e52170180e5821fc676f61f6340f1f\" alt=\"スクリーンショット 2023-10-28 9.27.27.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/b407ab4e-cd82-7554-0925-1e516bfcbf38.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2Fb407ab4e-cd82-7554-0925-1e516bfcbf38.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=69c0f4847b1da5afc706e7bd073d3043 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch4 data-sourcepos=\"77:1-77:78\"\u003e\n\u003cspan id=\"ポップアップを表示している関数parseplacemarkをコピー\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%9D%E3%83%83%E3%83%97%E3%82%A2%E3%83%83%E3%83%97%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E9%96%A2%E6%95%B0parseplacemark%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eポップアップを表示している関数(parsePlacemark)をコピー\u003c/h4\u003e\n\u003cp data-sourcepos=\"79:1-79:248\"\u003eLeaflet-KML Pluginのファイル、KML.jsの中で\u003ccode\u003ebindPopup\u003c/code\u003eを検索。出てきた箇所を含む関数\u003ccode\u003eparsePlacemark\u003c/code\u003eをごっそりコピー、自分で作った\u003ccode\u003eindex.html\u003c/code\u003eの\u003ccode\u003eLeaflet-KML Plugin\u003c/code\u003eを読み込んだ直後に貼り付ける。\u003c/p\u003e\n\u003cp data-sourcepos=\"81:1-81:106\"\u003e貼り付けの際、parsePlacemark:functionの部分をL.KML.parsePlacemark=functionに書き換える。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"82:1-88:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e index.htmlの一部分を抜粋\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"c1\"\u003e// ↓こうなっていたものを\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eparsePlacemark\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"nf\"\u003efunction \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003exml\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// ↓ こうする\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eKML\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eparsePlacemark\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003efunction \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003exml\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch4 data-sourcepos=\"90:1-90:41\"\u003e\n\u003cspan id=\"layerbindpopupをカスタマイズ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#layerbindpopup%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003elayer.bindPopupをカスタマイズ\u003c/h4\u003e\n\u003cp data-sourcepos=\"92:1-92:102\"\u003elayer.bindPopupの周辺にてGPS座標を取得、また、それらを表示するようにする。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"js\" data-sourcepos=\"94:1-103:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eindex.htmlの一部を抜粋\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetLatLng\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 追記： レイヤーからGPS座標を取得\u003c/span\u003e\n\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003epointlatLngStr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eGPS: \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elat\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e, \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elng\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 追記: 表示用の文字列にする\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eadd\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003efunction \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n     \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ebindPopup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026lt;h2\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026lt;/h2\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003edescr\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026lt;br\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointlatLngStr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"c1\"\u003e// 編集：　表示用の文字列を文字列をポップアップに追記する\u003c/span\u003e\n     \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003ch2 data-sourcepos=\"105:1-105:12\"\u003e\n\u003cspan id=\"完成系\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%8C%E6%88%90%E7%B3%BB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e完成系\u003c/h2\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"html\" data-sourcepos=\"107:1-216:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eindex.html\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"cp\"\u003e\u0026lt;!DOCTYPE html\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;html\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;head\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;title\u0026gt;\u003c/span\u003eLeaflet KML Example\u003cspan class=\"nt\"\u003e\u0026lt;/title\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003echarset=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"utf-8\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;meta\u003c/span\u003e \u003cspan class=\"na\"\u003ename=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"viewport\"\u003c/span\u003e \u003cspan class=\"na\"\u003econtent=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"width=device-width, initial-scale=1.0\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet CSS --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;link\u003c/span\u003e \u003cspan class=\"na\"\u003erel=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"stylesheet\"\u003c/span\u003e \u003cspan class=\"na\"\u003ehref=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet JavaScript --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- Leaflet-KML Plugin --\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script \u003c/span\u003e\u003cspan class=\"na\"\u003esrc=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/3.4.0/layer/vector/KML.js\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/script\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eKML\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eparsePlacemark\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003efunction \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003exml\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eoptions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eil\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eopts\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eoptions\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"p\"\u003e{};\u003c/span\u003e\n\n\t\t\u003cspan class=\"nx\"\u003eel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003estyleUrl\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003echildNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003enodeValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003efor \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"nx\"\u003eopts\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e][\u003c/span\u003e\u003cspan class=\"nx\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\n\t\t\u003cspan class=\"nx\"\u003eil\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eStyle\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eil\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003einlineStyle\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eparseStyle\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einlineStyle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"k\"\u003efor \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ek\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003einlineStyle\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\t\u003cspan class=\"nx\"\u003eopts\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003einlineStyle\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003emulti\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eMultiGeometry\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eMultiTrack\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003egx:MultiTrack\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003efor \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eh\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003emulti\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"nx\"\u003eel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emulti\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eparsePlacemark\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"nx\"\u003exml\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003estyle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eopts\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003elayers\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[];\u003c/span\u003e\n\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003eparse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eLineString\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ePolygon\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ePoint\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eTrack\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003egx:Track\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003efor \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003etag\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eparse\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\t\u003cspan class=\"nx\"\u003eel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003etag\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003el\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eparse\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003etag\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ereplace\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sr\"\u003e/gx:/\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"dl\"\u003e''\u003c/span\u003e\u003cspan class=\"p\"\u003e)](\u003c/span\u003e\u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"nx\"\u003exml\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eopts\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003el\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003elayers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003epush\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003el\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003elayers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003elayers\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003elayers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"nx\"\u003elayer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eFeatureGroup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003elayers\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\t\t\u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003edescr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e''\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\t\u003cspan class=\"nx\"\u003eel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ename\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003echildNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"nx\"\u003ename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003echildNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003enodeValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"nx\"\u003eel\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eplace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetElementsByTagName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003edescription\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003echildNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"nx\"\u003edescr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003edescr\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003eel\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003echildNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003ej\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"nx\"\u003enodeValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egetLatLng\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003epointlatLngStr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003eGPS: \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elat\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e, \u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointLatLang\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elng\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\t\t\u003cspan class=\"k\"\u003eif \u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eon\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003eadd\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003efunction \u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\t\t\t\t\u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebindPopup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026lt;h2\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026lt;/h2\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003edescr\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"dl\"\u003e\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026lt;br\u0026gt;\u003c/span\u003e\u003cspan class=\"dl\"\u003e\"\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"nx\"\u003epointlatLngStr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\t\t\t\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\t\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\t\t\u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003elayer\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\t\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/head\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;body\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;div\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"map\"\u003c/span\u003e \u003cspan class=\"na\"\u003estyle=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"height: 400px;\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u0026lt;/div\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;script\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"c1\"\u003e// Create a Leaflet map\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003emap\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003emap\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003esetView\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Set the initial map center and zoom level.\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Add a base layer (e.g., OpenStreetMap)\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003etileLayer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003ehttps://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"na\"\u003emaxZoom\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e19\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eaddTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"c1\"\u003e// Load and display a KML file on the map\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ekmlURL\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"s1\"\u003esample.kml\u003c/span\u003e\u003cspan class=\"dl\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Replace with the path to your KML file\u003c/span\u003e\n        \u003cspan class=\"kd\"\u003evar\u003c/span\u003e \u003cspan class=\"nx\"\u003ekmlLayer\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nc\"\u003eKML\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ekmlURL\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"na\"\u003easync\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}).\u003c/span\u003e\u003cspan class=\"nf\"\u003eaddTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;/script\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/body\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/html\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"218:1-219:162\"\u003eスクリーンショット\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/9d0fa3dae52f53d7bf5dbe341f5b8ab380f64ace/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f37333234362f33393338306230312d303938342d323030302d353962312d6335386439393861633663642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2F39380b01-0984-2000-59b1-c58d998ac6cd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=4d3e0d81a6125d85f94b65bba10c10ae\" alt=\"スクリーンショット 2023-10-28 10.18.55.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/39380b01-0984-2000-59b1-c58d998ac6cd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F73246%2F39380b01-0984-2000-59b1-c58d998ac6cd.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=014b4cef53d612f24526b0f81a0765b8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n",
      "body": "[Leaflet](https://leafletjs.com/)を使った地図アプリを作る上で試行錯誤したことをメモとして書いています。その機能あるよなど、なにかあればぜひコメントください。\n\n## 概要\n### やりたいこと\n- leafletで表示中の地図に、KMLファイルの内容を表示したい。\n- KMLファイルで表示した各要素をカスタマイズしたい。\n\n### 結論\n- `leaflet-kml`の中に使われている関数を一部コピーして、カスタマイズ、`leaflet-kml`を上書きする。\n\n\n## 使用するもの\n- [Leaflet](https://leafletjs.com/) \n- leafletjsのKML表示プラグイン[leaflet-kml](https://github.com/windycom/leaflet-kml)\n- KMLの作成には[Google マイマップ](https://www.google.com/maps/)、[Google Earth]()を利用しています。\n\n## 0,KMLファイルを作成する\n`スタート`と`ゴール`の2つのマーカーを立てたものを作りました。\n\n|Google Mymap|Google MymapからKMLファイルを書き出し|\n|--|--|\n|![スクリーンショット 2023-10-28 9.26.17.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/e91f6ec4-eaaa-ac30-f60a-ccc7b170d63b.png)|![スクリーンショット 2023-10-28 9.26.33.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/a4cbbb2d-43e5-7cad-0bdd-5c5adfe26ec4.png)|\n\nsample.kmlが完成。\n\n## 1,KMLを表示する\n単純にKMLファイルを読み込んで表示する\n\n```html:index.html\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n    \u003ctitle\u003eLeaflet KML Example\u003c/title\u003e\n    \u003cmeta charset=\"utf-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003c!-- Leaflet CSS --\u003e\n    \u003clink rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\" /\u003e\n\n    \u003c!-- Leaflet JavaScript --\u003e\n    \u003cscript src=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\"\u003e\u003c/script\u003e\n\n    \u003c!-- Leaflet-KML Plugin --\u003e\n    \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/3.4.0/layer/vector/KML.js\"\u003e\u003c/script\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \u003cdiv id=\"map\" style=\"height: 400px;\"\u003e\u003c/div\u003e\n\n    \u003cscript\u003e\n        // Create a Leaflet map\n        var map = L.map('map').setView([0, 0], 2); // Set the initial map center and zoom level.\n\n        // Add a base layer (e.g., OpenStreetMap)\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            maxZoom: 19,\n        }).addTo(map);\n\n        // Load and display a KML file on the map\n        var kmlURL = 'sample.kml';\n        var kmlLayer = new L.KML(kmlURL, {\n            async: true,\n        }).addTo(map);\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\n表示したもの。\n\n![スクリーンショット 2023-10-28 9.27.27.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/b00b182f-5b3b-93d7-479b-8aeb686b4020.png)\n\n## 2,ポップアップをカスタマイズ\nマーカーをクリックした際に表示するポップアップにGPS座標を表示させます。\n|as-is|to-be|\n|--|--|\n|![スクリーンショット 2023-10-28 9.27.27のコピー.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/022cc55d-4ed8-7f57-8407-11a00adc9367.png)|![スクリーンショット 2023-10-28 9.27.27.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/b407ab4e-cd82-7554-0925-1e516bfcbf38.png)|\n\n#### ポップアップを表示している関数(parsePlacemark)をコピー\n\nLeaflet-KML Pluginのファイル、KML.jsの中で`bindPopup`を検索。出てきた箇所を含む関数`parsePlacemark`をごっそりコピー、自分で作った`index.html`の`Leaflet-KML Plugin`を読み込んだ直後に貼り付ける。\n\n貼り付けの際、parsePlacemark:functionの部分をL.KML.parsePlacemark=functionに書き換える。\n```js: index.htmlの一部分を抜粋\n// ↓こうなっていたものを\nparsePlacemark:function (place, xml, style, options) { ...\n\n// ↓ こうする\nL.KML.parsePlacemark = function (place, xml, style, options) { ...\n```\n\n#### layer.bindPopupをカスタマイズ\n\nlayer.bindPopupの周辺にてGPS座標を取得、また、それらを表示するようにする。\n\n```js:index.htmlの一部を抜粋\nvar pointLatLang = layer.getLatLng(); // 追記： レイヤーからGPS座標を取得\nvar pointlatLngStr = \"GPS: \" + pointLatLang.lat + \", \" + pointLatLang.lng; // 追記: 表示用の文字列にする\n\nif (name) {\n  layer.on('add', function () {\n     layer.bindPopup('\u003ch2\u003e' + name + '\u003c/h2\u003e' + descr + \"\u003cbr\u003e\" + pointlatLngStr);// 編集：　表示用の文字列を文字列をポップアップに追記する\n     });\n}\n```\n\n## 完成系\n\n```html:index.html\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n    \u003ctitle\u003eLeaflet KML Example\u003c/title\u003e\n    \u003cmeta charset=\"utf-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e\n    \u003c!-- Leaflet CSS --\u003e\n    \u003clink rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css\" /\u003e\n\n    \u003c!-- Leaflet JavaScript --\u003e\n    \u003cscript src=\"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js\"\u003e\u003c/script\u003e\n\n    \u003c!-- Leaflet-KML Plugin --\u003e\n    \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/leaflet-plugins/3.4.0/layer/vector/KML.js\"\u003e\u003c/script\u003e\n    \u003cscript\u003e\n        L.KML.parsePlacemark = function (place, xml, style, options) {\n\t\tvar h, i, j, k, el, il, opts = options || {};\n\n\t\tel = place.getElementsByTagName('styleUrl');\n\t\tfor (i = 0; i \u003c el.length; i++) {\n\t\t\tvar url = el[i].childNodes[0].nodeValue;\n\t\t\tfor (var a in style[url]) {\n\t\t\t\topts[a] = style[url][a];\n\t\t\t}\n\t\t}\n\t\t\n\t\til = place.getElementsByTagName('Style')[0];\n\t\tif (il) {\n\t\t\tvar inlineStyle = this.parseStyle(place);\n\t\t\tif (inlineStyle) {\n\t\t\t\tfor (k in inlineStyle) {\n\t\t\t\t\topts[k] = inlineStyle[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar multi = ['MultiGeometry', 'MultiTrack', 'gx:MultiTrack'];\n\t\tfor (h in multi) {\n\t\t\tel = place.getElementsByTagName(multi[h]);\n\t\t\tfor (i = 0; i \u003c el.length; i++) {\n\t\t\t\treturn this.parsePlacemark(el[i], xml, style, opts);\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar layers = [];\n\n\t\tvar parse = ['LineString', 'Polygon', 'Point', 'Track', 'gx:Track'];\n\t\tfor (j in parse) {\n\t\t\tvar tag = parse[j];\n\t\t\tel = place.getElementsByTagName(tag);\n\t\t\tfor (i = 0; i \u003c el.length; i++) {\n\t\t\t\tvar l = this['parse' + tag.replace(/gx:/, '')](el[i], xml, opts);\n\t\t\t\tif (l) { layers.push(l); }\n\t\t\t}\n\t\t}\n\n\t\tif (!layers.length) {\n\t\t\treturn;\n\t\t}\n\t\tvar layer = layers[0];\n\t\tif (layers.length \u003e 1) {\n\t\t\tlayer = new L.FeatureGroup(layers);\n\t\t}\n\n\t\tvar name, descr = '';\n\t\tel = place.getElementsByTagName('name');\n\t\tif (el.length \u0026\u0026 el[0].childNodes.length) {\n\t\t\tname = el[0].childNodes[0].nodeValue;\n\t\t}\n\t\tel = place.getElementsByTagName('description');\n\t\tfor (i = 0; i \u003c el.length; i++) {\n\t\t\tfor (j = 0; j \u003c el[i].childNodes.length; j++) {\n\t\t\t\tdescr = descr + el[i].childNodes[j].nodeValue;\n\t\t\t}\n\t\t}\n\n        var pointLatLang = layer.getLatLng();\n        var pointlatLngStr = \"GPS: \" + pointLatLang.lat + \", \" + pointLatLang.lng;\n\n\t\tif (name) {\n\t\t\tlayer.on('add', function () {\n\t\t\t\tlayer.bindPopup('\u003ch2\u003e' + name + '\u003c/h2\u003e' + descr + \"\u003cbr\u003e\" + pointlatLngStr);\n\t\t\t});\n\t\t}\n\n\t\treturn layer;\n\t}\n    \u003c/script\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n    \u003cdiv id=\"map\" style=\"height: 400px;\"\u003e\u003c/div\u003e\n    \u003cscript\u003e\n        // Create a Leaflet map\n        var map = L.map('map').setView([0, 0], 2); // Set the initial map center and zoom level.\n\n        // Add a base layer (e.g., OpenStreetMap)\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            maxZoom: 19,\n        }).addTo(map);\n\n        // Load and display a KML file on the map\n        var kmlURL = 'sample.kml'; // Replace with the path to your KML file\n        var kmlLayer = new L.KML(kmlURL, {\n            async: true,\n        }).addTo(map);\n    \u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\nスクリーンショット\n![スクリーンショット 2023-10-28 10.18.55.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/73246/39380b01-0984-2000-59b1-c58d998ac6cd.png)\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T10:20:47+09:00",
      "group": null,
      "id": "1cf080b487636058f110",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "KML",
              "versions": []
          },
          {
              "name": "leaflet",
              "versions": []
          },
          {
              "name": "leaflet.js",
              "versions": []
          },
          {
              "name": "leafletjs-kml",
              "versions": []
          }
      ],
      "title": "leaflet + leaflet-kmlで表示されるpopupにGPS座標を表示させる",
      "updated_at": "2023-10-28T11:04:08+09:00",
      "url": "https://qiita.com/mzone/items/1cf080b487636058f110",
      "user": {
          "description": "",
          "facebook_id": "mimanishi",
          "followees_count": 1,
          "followers_count": 1,
          "github_login_name": "mzone",
          "id": "mzone",
          "items_count": 1,
          "linkedin_id": "",
          "location": "",
          "name": "Imanishi Masakazu",
          "organization": "",
          "permanent_id": 73246,
          "profile_image_url": "https://qiita-image-store.s3.amazonaws.com/0/73246/profile-images/1473699431",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": "http://www.imamuu.com"
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"2:1-2:254\"\u003elinuxのシェルスクリプトの勉強をしていてeq, ge, gt, le, lt, ne,をなかなか覚えられなかったです。そこで、Bingのチャットにその語源を聞いたらめっちゃいい回答をしてくれたので共有します。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"4:1-4:39\"\u003e\n\u003cspan id=\"edgeチャットへの質問と回答\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#edge%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%81%B8%E3%81%AE%E8%B3%AA%E5%95%8F%E3%81%A8%E5%9B%9E%E7%AD%94\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eEdgeチャットへの質問と回答\u003c/h1\u003e\n\u003cp data-sourcepos=\"5:1-6:221\"\u003e\u003cstrong\u003e質問\u003c/strong\u003e\u003cbr\u003e\nシェルスクリプトで数字を比較したいです。そのときに、eq, ge, gt, le, lt, ne,を使ったときの意味を教えてください。また、それぞれの名前の由来を教えてください。\u003c/p\u003e\n\u003cp data-sourcepos=\"8:1-9:109\"\u003e\u003cstrong\u003e回答\u003c/strong\u003e\u003cbr\u003e\nシェルスクリプトで数字を比較する場合、以下の比較演算子が使用されます¹²³:\u003c/p\u003e\n\u003cul data-sourcepos=\"10:1-17:0\"\u003e\n\u003cli data-sourcepos=\"10:1-10:16\"\u003e\n\u003ccode\u003e=\u003c/code\u003e: 等しい\u003c/li\u003e\n\u003cli data-sourcepos=\"11:1-11:18\"\u003e\n\u003ccode\u003e-eq\u003c/code\u003e: 等しい\u003c/li\u003e\n\u003cli data-sourcepos=\"12:1-12:15\"\u003e\n\u003ccode\u003e-ge\u003c/code\u003e: 以上\u003c/li\u003e\n\u003cli data-sourcepos=\"13:1-13:24\"\u003e\n\u003ccode\u003e-gt\u003c/code\u003e: より大きい\u003c/li\u003e\n\u003cli data-sourcepos=\"14:1-14:15\"\u003e\n\u003ccode\u003e-le\u003c/code\u003e: 以下\u003c/li\u003e\n\u003cli data-sourcepos=\"15:1-15:24\"\u003e\n\u003ccode\u003e-lt\u003c/code\u003e: より小さい\u003c/li\u003e\n\u003cli data-sourcepos=\"16:1-17:0\"\u003e\n\u003ccode\u003e-ne\u003c/code\u003e: 等しくない\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"18:1-18:60\"\u003eそれぞれの名前の由来は、以下の通りです¹:\u003c/p\u003e\n\u003cul data-sourcepos=\"20:1-27:0\"\u003e\n\u003cli data-sourcepos=\"20:1-20:16\"\u003e\n\u003ccode\u003e=\u003c/code\u003e: 等しい\u003c/li\u003e\n\u003cli data-sourcepos=\"21:1-21:28\"\u003e\n\u003ccode\u003eeq\u003c/code\u003e: equal to (等しい)\u003c/li\u003e\n\u003cli data-sourcepos=\"22:1-22:41\"\u003e\n\u003ccode\u003ege\u003c/code\u003e: greater than or equal to (以上)\u003c/li\u003e\n\u003cli data-sourcepos=\"23:1-23:38\"\u003e\n\u003ccode\u003egt\u003c/code\u003e: greater than (より大きい)\u003c/li\u003e\n\u003cli data-sourcepos=\"24:1-24:38\"\u003e\n\u003ccode\u003ele\u003c/code\u003e: less than or equal to (以下)\u003c/li\u003e\n\u003cli data-sourcepos=\"25:1-25:35\"\u003e\n\u003ccode\u003elt\u003c/code\u003e: less than (より小さい)\u003c/li\u003e\n\u003cli data-sourcepos=\"26:1-27:0\"\u003e\n\u003ccode\u003ene\u003c/code\u003e: not equal to (等しくない)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"28:1-28:123\"\u003e例えば、\u003ccode\u003ea\u003c/code\u003e と \u003ccode\u003eb\u003c/code\u003e という変数に格納された数値を比較する場合、以下のように使用します¹:\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"30:1-60:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eif [ $a -eq $b ]\nthen\n    echo \"a is equal to b\"\nfi\n\nif [ $a -ge $b ]\nthen\n    echo \"a is greater than or equal to b\"\nfi\n\nif [ $a -gt $b ]\nthen\n    echo \"a is greater than b\"\nfi\n\nif [ $a -le $b ]\nthen\n    echo \"a is less than or equal to b\"\nfi\n\nif [ $a -lt $b ]\nthen\n    echo \"a is less than b\"\nfi\n\nif [ $a -ne $b ]\nthen\n    echo \"a is not equal to b\"\nfi\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"62:1-64:55\"\u003e¹: \u003ca href=\"https://www.pmi-sfbac.org/arithmetic-comparison/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.pmi-sfbac.org/arithmetic-comparison/\u003c/a\u003e\u003cbr\u003e\n²: \u003ca href=\"https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\" class=\"autolink\" id=\"reference-4c7ee3d6a44c0e51172c\"\u003ehttps://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\u003c/a\u003e\u003cbr\u003e\n³: \u003ca href=\"https://eng-entrance.com/linux-shellscript-operator\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://eng-entrance.com/linux-shellscript-operator\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"66:1-71:60\"\u003eソース: Bing との会話 2023/10/28\u003cbr\u003e\n(1) 【Shellスクリプト】演算子「算術演算子」「比較演算子」につい .... \u003ca href=\"https://www.pmi-sfbac.org/arithmetic-comparison/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.pmi-sfbac.org/arithmetic-comparison/\u003c/a\u003e.\u003cbr\u003e\n(2) もうシェルスクリプトでIFの書き方を迷わないための逆引き .... \u003ca href=\"https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\" class=\"autolink\"\u003ehttps://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\u003c/a\u003e.\u003cbr\u003e\n(3) 初心者向け！シェルスクリプト演算子まとめました【Linux】. \u003ca href=\"https://eng-entrance.com/linux-shellscript-operator\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://eng-entrance.com/linux-shellscript-operator\u003c/a\u003e.\u003cbr\u003e\n(4) ShellScript bash 比較演算子 数値 文字列の比較 #初心者 - Qiita. \u003ca href=\"https://qiita.com/miriwo/items/fa173cf457fd4ff8009f\" class=\"autolink\" id=\"reference-1b444be4fa6c9c5b631f\"\u003ehttps://qiita.com/miriwo/items/fa173cf457fd4ff8009f\u003c/a\u003e.\u003cbr\u003e\n(5) undefined. \u003ca href=\"https://www.pmi-sfbac.org/conditional-branch\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://www.pmi-sfbac.org/conditional-branch\u003c/a\u003e.\u003c/p\u003e\n\u003ch1 data-sourcepos=\"73:1-73:11\"\u003e\n\u003cspan id=\"心の声\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%BF%83%E3%81%AE%E5%A3%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e心の声\u003c/h1\u003e\n\u003cp data-sourcepos=\"74:1-76:105\"\u003eめちゃくちゃ分かりやすい。\u003cbr\u003e\n語源を知っていると覚えやすいな。\u003cbr\u003e\n-geということはgreaterとequal。だから「以上」。という風に意味を思い出せる。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"78:1-78:14\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\u003cp data-sourcepos=\"79:1-79:185\"\u003e最後まで読んでくださりありがとうございました。ChatGPTやBingの桶毛で調べものの効率が上がっています。いつもありがとうございます。\u003c/p\u003e\n",
      "body": "# はじめに\nlinuxのシェルスクリプトの勉強をしていてeq, ge, gt, le, lt, ne,をなかなか覚えられなかったです。そこで、Bingのチャットにその語源を聞いたらめっちゃいい回答をしてくれたので共有します。\n\n# Edgeチャットへの質問と回答\n**質問**\nシェルスクリプトで数字を比較したいです。そのときに、eq, ge, gt, le, lt, ne,を使ったときの意味を教えてください。また、それぞれの名前の由来を教えてください。\n\n**回答**\nシェルスクリプトで数字を比較する場合、以下の比較演算子が使用されます¹²³:\n- `=`: 等しい\n- `-eq`: 等しい\n- `-ge`: 以上\n- `-gt`: より大きい\n- `-le`: 以下\n- `-lt`: より小さい\n- `-ne`: 等しくない\n\nそれぞれの名前の由来は、以下の通りです¹:\n\n- `=`: 等しい\n- `eq`: equal to (等しい)\n- `ge`: greater than or equal to (以上)\n- `gt`: greater than (より大きい)\n- `le`: less than or equal to (以下)\n- `lt`: less than (より小さい)\n- `ne`: not equal to (等しくない)\n\n例えば、`a` と `b` という変数に格納された数値を比較する場合、以下のように使用します¹:\n\n```\nif [ $a -eq $b ]\nthen\n    echo \"a is equal to b\"\nfi\n\nif [ $a -ge $b ]\nthen\n    echo \"a is greater than or equal to b\"\nfi\n\nif [ $a -gt $b ]\nthen\n    echo \"a is greater than b\"\nfi\n\nif [ $a -le $b ]\nthen\n    echo \"a is less than or equal to b\"\nfi\n\nif [ $a -lt $b ]\nthen\n    echo \"a is less than b\"\nfi\n\nif [ $a -ne $b ]\nthen\n    echo \"a is not equal to b\"\nfi\n```\n\n¹: https://www.pmi-sfbac.org/arithmetic-comparison/\n²: https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d\n³: https://eng-entrance.com/linux-shellscript-operator\n\nソース: Bing との会話 2023/10/28\n(1) 【Shellスクリプト】演算子「算術演算子」「比較演算子」につい .... https://www.pmi-sfbac.org/arithmetic-comparison/.\n(2) もうシェルスクリプトでIFの書き方を迷わないための逆引き .... https://qiita.com/tomoyk/items/aaa6bf2ddf9b884cb50d.\n(3) 初心者向け！シェルスクリプト演算子まとめました【Linux】. https://eng-entrance.com/linux-shellscript-operator.\n(4) ShellScript bash 比較演算子 数値 文字列の比較 #初心者 - Qiita. https://qiita.com/miriwo/items/fa173cf457fd4ff8009f.\n(5) undefined. https://www.pmi-sfbac.org/conditional-branch.\n\n# 心の声\nめちゃくちゃ分かりやすい。\n語源を知っていると覚えやすいな。\n-geということはgreaterとequal。だから「以上」。という風に意味を思い出せる。\n\n# おわりに\n最後まで読んでくださりありがとうございました。ChatGPTやBingの桶毛で調べものの効率が上がっています。いつもありがとうございます。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T10:14:26+09:00",
      "group": null,
      "id": "bd6035583af696b297c7",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "ShellScript",
              "versions": []
          },
          {
              "name": "Edge",
              "versions": []
          },
          {
              "name": "ChatGPT",
              "versions": []
          }
      ],
      "title": "Bingのチャットでシェルスクリプトの比較演算子の覚え方・語源を聞いたらめっちゃ分かりやすかったのでその記録を",
      "updated_at": "2023-10-28T10:14:26+09:00",
      "url": "https://qiita.com/taipy/items/bd6035583af696b297c7",
      "user": {
          "description": "勉強になったことや共有したいことを記事にしていきます。\r\n不束者ですがよろしくお願いします。",
          "facebook_id": "",
          "followees_count": 2,
          "followers_count": 1,
          "github_login_name": null,
          "id": "taipy",
          "items_count": 24,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 2613568,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2613568/profile-images/1698460306",
          "team_only": false,
          "twitter_screen_name": "taiPy5",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"2:1-2:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"3:1-4:78\"\u003e自分の備忘録のためとアウトプットすることで記憶に残したいなと思ったため投稿するに至りました。\u003cbr\u003e\nなのでゆるーく温かい目で見ていただければと思います。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"7:1-7:21\"\u003e\n\u003cspan id=\"やりたいこと\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%84%E3%82%8A%E3%81%9F%E3%81%84%E3%81%93%E3%81%A8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eやりたいこと\u003c/h2\u003e\n\u003cp data-sourcepos=\"8:1-9:189\"\u003eやりたいこととしては表題の通りです。\u003cbr\u003e\nmac買いたてで環境構築が必要だったのですがnpm install ~ で毎回管理者エラーが発生していて、sudoとかで無理やりインストールしていました。\u003c/p\u003e\n\u003cp data-sourcepos=\"11:1-11:198\"\u003eけどそれでは根本的解決になっていないなということでさすがに手を打って一応いけたっぽいので投稿として残すことにしました。qiitaデビュー👏\u003c/p\u003e\n\u003ch2 data-sourcepos=\"13:1-13:9\"\u003e\n\u003cspan id=\"結果\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%B5%90%E6%9E%9C\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e結果\u003c/h2\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"14:1-17:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003esudo chown -R ユーザーとグループのID \"/Users/ユーザー名/npm-temp\"\nnpm cache clean --force\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"18:1-19:120\"\u003e僕の場合はこのあと\u003ccode\u003enpm install -g sass\u003c/code\u003eでsassがインストールできました。\u003cbr\u003e\nユーザーとグループのIDには僕の場合は数字が入っています。（〇〇〇:〇〇という形で）\u003c/p\u003e\n\u003ch2 data-sourcepos=\"23:1-23:15\"\u003e\n\u003cspan id=\"プロセス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eプロセス\u003c/h2\u003e\n\u003cp data-sourcepos=\"24:1-28:18\"\u003e以下のとおりです。\u003cbr\u003e\n基本chatGPTに聞いてます。\u003cbr\u003e\n順を追って説明します。\u003cbr\u003e\nyourusernameとyourgroupnameは各自のものに適宜変換して読んでください。\u003cbr\u003e\nまずはじめに\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"29:1-31:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003enpm install -g sass\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"32:1-32:39\"\u003eコマンドを実行したところ、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"33:1-40:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003eThe operation was rejected by your operating system.\nnpm ERR! It is likely you do not have the permissions to access this file as the current user\nnpm ERR! \nnpm ERR! If you believe this might be a permissions issue, please double-check the\nnpm ERR! permissions of the file and its containing directories, or try running\nnpm ERR! the command again as root/Administrator.\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"41:1-42:88\"\u003eと表示されました。このファイルにアクセスする権限がないですと言われています。\u003cbr\u003e\nchatGPTに対処法を聞いたところ下記を実行してくださいとのこと。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"43:1-45:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"gp\"\u003esudo chown -R $\u003c/span\u003eUSER:\u003cspan class=\"nv\"\u003e$USER\u003c/span\u003e ~/.npm-global\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"46:1-46:212\"\u003e↑はnpmにグローバルでインストールするときの権限を$USERにするみたいなのでログインユーザーならだれでもインストールできるようにする記述みたいです。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"47:1-49:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003echown: 〇〇: illegal group name\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"50:1-52:66\"\u003e〇〇はグループネームだと思うのですがそんなのないよと言われました。\u003cbr\u003e\nillegal？って感じはしますが、存在しないよって意味で使ってるのだと思われます。\u003cbr\u003e\nそこでGPTに聞くとユーザー名を確認したいらしく\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"53:1-55:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"gp\"\u003eecho $\u003c/span\u003eUSER\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"56:1-56:39\"\u003eでユーザー名を確認したのち\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"57:1-59:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003esudo chown -R yourusername:yourusername ~/.npm-global\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"60:1-63:78\"\u003eを実行してくれとのことでした。\u003cbr\u003e\nしかし、エラーが出ました。\u003cbr\u003e\n実のところchatGPT的にはユーザー名とグループ名は同じになっていることが多いらしく\u003ccode\u003eecho $USER\u003c/code\u003eでユーザー名確認して\u003ccode\u003esudo chown -R yourusername:yourusername ~/.npm-global\u003c/code\u003eを実行したら権限変更できるやろって感じだったようです。\u003cbr\u003e\nただ僕の場合はユーザー名とグループ名が違ったようで。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"65:1-67:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003egroups\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"68:1-68:69\"\u003eを実行してグループ名を確認した後、下記を実行。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"69:1-71:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003esudo chown -R yourusername:yourgroupname ~/.npm-global\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"72:1-72:21\"\u003eしたのですが、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"73:1-76:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003eYour cache folder contains root-owned files, due to a bug in\nnpm ERR! previous versions of npm which has since been addressed.\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"77:1-79:69\"\u003enpmのキャッシュディレクトリが適切なアクセス権限を持っていないらしいです。\u003cbr\u003e\n一時保存先にnpmがアクセスできないというふうに僕は解釈をしています。\u003cbr\u003e\n最終的にchatGPTから\"結果\"にあるコマンドを実行し、\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"80:1-83:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003esudo chown -R ユーザーとグループのID \"/Users/ユーザー名/npm-temp\"\nnpm cache clean --force\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"84:1-84:12\"\u003e↓を実行\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"terminal\" data-sourcepos=\"85:1-87:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003eterminal\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"go\"\u003enpm install -g sass\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"88:1-88:69\"\u003eで無事にインストールが完了したというわけです。\u003c/p\u003e\n\u003cp data-sourcepos=\"90:1-91:54\"\u003e以上です。\u003cbr\u003e\nご覧いただきありがとうございました！\u003c/p\u003e\n",
      "body": "\n# はじめに\n自分の備忘録のためとアウトプットすることで記憶に残したいなと思ったため投稿するに至りました。\nなのでゆるーく温かい目で見ていただければと思います。\n\n\n## やりたいこと\nやりたいこととしては表題の通りです。\nmac買いたてで環境構築が必要だったのですがnpm install ~ で毎回管理者エラーが発生していて、sudoとかで無理やりインストールしていました。\n\nけどそれでは根本的解決になっていないなということでさすがに手を打って一応いけたっぽいので投稿として残すことにしました。qiitaデビュー👏\n\n## 結果\n```terminal:terminal\nsudo chown -R ユーザーとグループのID \"/Users/ユーザー名/npm-temp\"\nnpm cache clean --force\n```\n僕の場合はこのあと`npm install -g sass`でsassがインストールできました。\nユーザーとグループのIDには僕の場合は数字が入っています。（〇〇〇:〇〇という形で）\n\n\n\n## プロセス\n以下のとおりです。\n基本chatGPTに聞いてます。\n順を追って説明します。\nyourusernameとyourgroupnameは各自のものに適宜変換して読んでください。\nまずはじめに\n```terminal:terminal\nnpm install -g sass\n```\nコマンドを実行したところ、\n```terminal:terminal\nThe operation was rejected by your operating system.\nnpm ERR! It is likely you do not have the permissions to access this file as the current user\nnpm ERR! \nnpm ERR! If you believe this might be a permissions issue, please double-check the\nnpm ERR! permissions of the file and its containing directories, or try running\nnpm ERR! the command again as root/Administrator.\n```\nと表示されました。このファイルにアクセスする権限がないですと言われています。\nchatGPTに対処法を聞いたところ下記を実行してくださいとのこと。\n```terminal:terminal\nsudo chown -R $USER:$USER ~/.npm-global\n```\n↑はnpmにグローバルでインストールするときの権限を$USERにするみたいなのでログインユーザーならだれでもインストールできるようにする記述みたいです。\n```terminal:terminal\nchown: 〇〇: illegal group name\n```\n〇〇はグループネームだと思うのですがそんなのないよと言われました。\nillegal？って感じはしますが、存在しないよって意味で使ってるのだと思われます。\nそこでGPTに聞くとユーザー名を確認したいらしく\n```terminal:terminal\necho $USER\n```\nでユーザー名を確認したのち\n```terminal:terminal\nsudo chown -R yourusername:yourusername ~/.npm-global\n```\nを実行してくれとのことでした。\nしかし、エラーが出ました。\n実のところchatGPT的にはユーザー名とグループ名は同じになっていることが多いらしく`echo $USER`でユーザー名確認して`sudo chown -R yourusername:yourusername ~/.npm-global`を実行したら権限変更できるやろって感じだったようです。\nただ僕の場合はユーザー名とグループ名が違ったようで。\n\n```terminal:terminal\ngroups\n```\nを実行してグループ名を確認した後、下記を実行。\n```terminal:terminal\nsudo chown -R yourusername:yourgroupname ~/.npm-global\n```\nしたのですが、\n```terminal:terminal\nYour cache folder contains root-owned files, due to a bug in\nnpm ERR! previous versions of npm which has since been addressed.\n```\nnpmのキャッシュディレクトリが適切なアクセス権限を持っていないらしいです。\n一時保存先にnpmがアクセスできないというふうに僕は解釈をしています。\n最終的にchatGPTから\"結果\"にあるコマンドを実行し、\n```terminal:terminal\nsudo chown -R ユーザーとグループのID \"/Users/ユーザー名/npm-temp\"\nnpm cache clean --force\n```\n↓を実行\n```terminal:terminal\nnpm install -g sass\n```\nで無事にインストールが完了したというわけです。\n\n以上です。\nご覧いただきありがとうございました！\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T10:05:18+09:00",
      "group": null,
      "id": "1ffb0d0685a7724a6d8e",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Terminal",
              "versions": []
          },
          {
              "name": "インストール",
              "versions": []
          },
          {
              "name": "error",
              "versions": []
          },
          {
              "name": "npm",
              "versions": []
          }
      ],
      "title": "npm installで権限がどうのこうのエラーが出るの面倒なので変更してやった",
      "updated_at": "2023-10-28T11:03:28+09:00",
      "url": "https://qiita.com/nesso_jp/items/1ffb0d0685a7724a6d8e",
      "user": {
          "description": null,
          "facebook_id": null,
          "followees_count": 1,
          "followers_count": 0,
          "github_login_name": null,
          "id": "nesso_jp",
          "items_count": 1,
          "linkedin_id": null,
          "location": null,
          "name": "",
          "organization": null,
          "permanent_id": 3585833,
          "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/3585833/a6842be936c0dd8a291aedfa893f4874afbb0666/large.png?1698449524",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": null
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"2:1-3:194\"\u003eLinuxの勉強をしていたのですが、Linuxのコマンドとそのオプションが覚えにくい。\u003cbr\u003e\nどんな時に何を使うのか？オプションの意味って何だったけ？例えば、次の\u003ccode\u003els\u003c/code\u003eコマンドの意味とそのオプションを覚えるのにも苦労しました。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"\" data-sourcepos=\"4:1-9:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e覚えにくいコマンドとオプションの例\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003els\nls -i\nls -a\nls -F\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"11:1-11:123\"\u003eでも、最近、覚えるコツを身に着けることが出来たので、勉強がはかどっています。今日は\u003c/p\u003e\n\u003ch1 data-sourcepos=\"13:1-13:11\"\u003e\n\u003cspan id=\"解決策\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解決策\u003c/h1\u003e\n\u003cp data-sourcepos=\"14:1-14:54\"\u003e結論からいうと解決策は二つあります。\u003c/p\u003e\n\u003col data-sourcepos=\"15:1-17:0\"\u003e\n\u003cli data-sourcepos=\"15:1-15:21\"\u003e語源を調べる\u003c/li\u003e\n\u003cli data-sourcepos=\"16:1-17:0\"\u003e小学生に説明する\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp data-sourcepos=\"18:1-18:46\"\u003eでは、1つずつご紹介いたします。\u003c/p\u003e\n\u003ch2 data-sourcepos=\"20:1-20:32\"\u003e\n\u003cspan id=\"解決策1-語源を調べる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%961-%E8%AA%9E%E6%BA%90%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解決策1 語源を調べる\u003c/h2\u003e\n\u003cp data-sourcepos=\"21:1-21:241\"\u003eChatGPTで語源を調べます。それか、Edgeのチャットを僕はよく使います。Googleでもいいと思いますが、ChatGPTとEdgeのチャットの方がよりピンポイントで回答してくれるので好きです。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"\" data-sourcepos=\"23:1-25:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e聞き方\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003elsコマンドの-aオプションの意味とその名前の由来を教えてください\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"26:1-27:29\"\u003eこのように聞くと、次のような回答が返ってきます。↓↓\u003cbr\u003e\n\u003cstrong\u003e今回はEdgeチャット\u003c/strong\u003e\u003c/p\u003e\n\u003chr data-sourcepos=\"28:1-28:3\"\u003e\n\u003cp data-sourcepos=\"29:1-29:482\"\u003elsコマンドの-aオプションは、すべてのファイルやディレクトリを表示するオプションです。通常、ファイル名の先頭にピリオドがあるファイルやディレクトリは隠しファイルと呼ばれ、lsコマンドでは表示されません。しかし、-aオプションを使うと、隠しファイルも含めてカレントディレクトリ内の全てのファイルやディレクトリを一覧表示できます¹²³。\u003c/p\u003e\n\u003cp data-sourcepos=\"31:1-31:414\"\u003e-aオプションの名前の由来は、all（すべて）の頭文字から来ています。-aオプションは、Unixの最初期のバージョンから存在していたオプションで、lsコマンドの基本的な機能の一つです。-aオプションは、隠しファイルやディレクトリの存在を確認したり、設定ファイルなどを編集したりするときに便利です。\u003c/p\u003e\n\u003cp data-sourcepos=\"33:1-36:160\"\u003eソース: Bing との会話 2023/10/28\u003cbr\u003e\n(1) lsコマンドの使い方と覚えたい15のオプション【Linuxコマンド集】. \u003ca href=\"https://eng-entrance.com/linux_command_ls\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://eng-entrance.com/linux_command_ls\u003c/a\u003e.\u003cbr\u003e\n(2) 【Linux】lsコマンド #Linux - Qiita. \u003ca href=\"https://qiita.com/chihiro/items/6e1404c41e1236a9efe1\" class=\"autolink\" id=\"reference-a6177b962983d186155d\"\u003ehttps://qiita.com/chihiro/items/6e1404c41e1236a9efe1\u003c/a\u003e.\u003cbr\u003e\n(3) 【 ls 】コマンド（ドットファイル／ディレクトリ編）――表示 .... \u003ca href=\"https://atmarkit.itmedia.co.jp/ait/articles/1607/04/news022.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://atmarkit.itmedia.co.jp/ait/articles/1607/04/news022.html\u003c/a\u003e.\u003c/p\u003e\n\u003chr data-sourcepos=\"37:1-39:0\"\u003e\n\u003cp data-sourcepos=\"40:1-40:122\"\u003eまた、例付きで回答もしてくれます。今回は次のように聞きました。\u003cstrong\u003e今回はEdgeチャット\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"\" data-sourcepos=\"41:1-43:3\"\u003e\n\u003cdiv class=\"code-lang\"\u003e\u003cspan class=\"bold\"\u003e聞き方\u003c/span\u003e\u003c/div\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003els -aコマンドを実行した時の例を教えてください\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/div\u003e\n\u003cp data-sourcepos=\"44:1-44:57\"\u003eこのように聞いたときの回答がこちら↓↓\u003c/p\u003e\n\u003chr data-sourcepos=\"45:1-45:3\"\u003e\n\u003cp data-sourcepos=\"46:1-46:98\"\u003els -aコマンドを実行した時の例としては、以下のようなものがあります。\u003c/p\u003e\n\u003cul data-sourcepos=\"48:1-49:0\"\u003e\n\u003cli data-sourcepos=\"48:1-49:0\"\u003eユーザーのホームディレクトリでls -aコマンドを実行すると、隠しファイルやディレクトリも含めてカレントディレクトリ内の全てのファイルやディレクトリを一覧表示できます。例えば、以下のような出力が得られます。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"50:1-53:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003els\u003c/span\u003e \u003cspan class=\"nt\"\u003e-a\u003c/span\u003e\n\u003cspan class=\"nb\"\u003e.\u003c/span\u003e  ..  .bash_history  .bash_profile  .bashrc  Desktop  Documents  Downloads  Music  Pictures  Public\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"55:1-55:244\"\u003eここで、ピリオドで始まるファイルやディレクトリが隠しファイルやディレクトリです。.と..は特殊なディレクトリで、.はカレントディレクトリ、..は親ディレクトリを表します 。\u003c/p\u003e\n\u003cul data-sourcepos=\"57:1-58:0\"\u003e\n\u003cli data-sourcepos=\"57:1-58:0\"\u003eプロジェクトのディレクトリでls -aコマンドを実行すると、Gitでバージョン管理されているプロジェクトの場合は.gitという隠しディレクトリが表示されます。このディレクトリには、Gitのリポジトリの情報や履歴が保存されています 。例えば、以下のような出力が得られます。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"bash\" data-sourcepos=\"59:1-62:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"nv\"\u003e$ \u003c/span\u003e\u003cspan class=\"nb\"\u003els\u003c/span\u003e \u003cspan class=\"nt\"\u003e-a\u003c/span\u003e\n\u003cspan class=\"nb\"\u003e.\u003c/span\u003e  ..  .git  README.md  src  \u003cspan class=\"nb\"\u003etest\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"64:1-64:144\"\u003eここで、.gitはGitの隠しディレクトリです。README.md, src, testはプロジェクトのファイルやディレクトリです。\u003c/p\u003e\n\u003chr data-sourcepos=\"65:1-67:0\"\u003e\n\u003ch2 data-sourcepos=\"68:1-68:32\"\u003e\n\u003cspan id=\"解決策2-説明する方法\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%A7%A3%E6%B1%BA%E7%AD%962-%E8%AA%AC%E6%98%8E%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e解決策2 説明する方法\u003c/h2\u003e\n\u003cp data-sourcepos=\"69:1-71:39\"\u003e小学生の息子に紹介するぐらい丁寧に紹介してみます。そうすると自分が説明できないことに愕然とします。自分がどれだけ分かっていないのかそして分かってるつもりになっていたのかっていうのが露呈します。\u003cbr\u003e\nそして、調べて、一から思い出しながら説明する。\u003cbr\u003e\n↓まとめるとこんな感じ。↓\u003c/p\u003e\n\u003cul data-sourcepos=\"72:1-77:0\"\u003e\n\u003cli data-sourcepos=\"72:1-72:14\"\u003e説明する\u003c/li\u003e\n\u003cli data-sourcepos=\"73:1-73:38\"\u003eできないことに愕然とする\u003c/li\u003e\n\u003cli data-sourcepos=\"74:1-74:11\"\u003e調べる\u003c/li\u003e\n\u003cli data-sourcepos=\"75:1-75:26\"\u003eまた、説明する。\u003c/li\u003e\n\u003cli data-sourcepos=\"76:1-77:0\"\u003eうまく説明出来たら終わり。できなかったら「できないことに愕然とする」フェーズに戻る。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"78:1-79:48\"\u003eうまくできたら終わり。\u003cbr\u003e\nここまでやったらもう忘れません。\u003c/p\u003e\n\u003cp data-sourcepos=\"81:1-81:168\"\u003eなんで、僕はよく机の上の観葉植物に向かって息子に語りかけるような口調で分かりやすく説明するように心がけています。\u003c/p\u003e\n\u003cp data-sourcepos=\"83:1-83:164\"\u003eちなみにEdgeのチャットにも聞いても見ました。2つ目の説明はよくわからなかったけど、まあ、そういうことらしいです。\u003c/p\u003e\n\u003chr data-sourcepos=\"84:1-84:3\"\u003e\n\u003cp data-sourcepos=\"85:1-85:641\"\u003e説明すると、なんで覚えられるの？という質問には、脳科学の観点からいくつかの答えがあります。一つは、説明することで自分の理解度を確認し、間違いや不明点を発見することができるからです。説明するときには、自分の知識を言葉にしなければなりませんが、その過程で自分が何を知っていて、何を知らないのかがはっきりします。また、説明することで自分の知識を整理し、論理的に組み立てることができます。これにより、記憶の整合性や一貫性が高まります¹。\u003c/p\u003e\n\u003cp data-sourcepos=\"87:1-87:604\"\u003eもう一つは、説明することで感情や興味を関与させることができるからです。脳科学的には、感情や興味は記憶に大きな影響を与えます。感情や興味があると、脳内の神経伝達物質やホルモンの分泌が増えて、記憶の定着を促進します²。説明するときには、相手の反応や質問に応じて感情や興味が高まります。また、相手に教えることで自分も教えられる立場になります。これは、自己効力感や自尊感情を高めて、記憶への動機付けになります³。\u003c/p\u003e\n\u003cp data-sourcepos=\"89:1-89:249\"\u003e以上のように、説明することは記憶力を高める効果的な方法です。もし勉強したいことがあれば、誰かに教えてみるか、自分で説明するつもりで勉強してみるといいかもしれませんね。\u003c/p\u003e\n\u003cp data-sourcepos=\"91:1-93:62\"\u003e¹: ² (\u003ca href=\"https://japan-brain-science.com/archives/1969\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://japan-brain-science.com/archives/1969\u003c/a\u003e)\u003cbr\u003e\n²: ⁴ (\u003ca href=\"https://study-blog.info/omoshiro/brain-mechanism/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://study-blog.info/omoshiro/brain-mechanism/\u003c/a\u003e)\u003cbr\u003e\n³: ³ (\u003ca href=\"https://axivacademy.com/info/column/benkyouhou/177395\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://axivacademy.com/info/column/benkyouhou/177395\u003c/a\u003e)\u003c/p\u003e\n\u003cp data-sourcepos=\"95:1-100:126\"\u003eソース: Bing との会話 2023/10/28\u003cbr\u003e\n(1) 「説明上手」な人が守っている5つのポイントとは？ | NIKKEIリス .... \u003ca href=\"https://reskill.nikkei.com/article/DGXMZO03412920Z00C16A6000000/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://reskill.nikkei.com/article/DGXMZO03412920Z00C16A6000000/\u003c/a\u003e.\u003cbr\u003e\n(2) 【記憶の脳科学】なぜヒトは覚え、忘れるのか～記憶の仕組み .... \u003ca href=\"https://japan-brain-science.com/archives/1969\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://japan-brain-science.com/archives/1969\u003c/a\u003e.\u003cbr\u003e\n(3) 【勉強法】誰かに教えると自分も深く理解できるのはどうして .... \u003ca href=\"https://axivacademy.com/info/column/benkyouhou/177395\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://axivacademy.com/info/column/benkyouhou/177395\u003c/a\u003e.\u003cbr\u003e\n(4) 「覚えられない」・・・勉強がうまくいかない原因は脳の .... \u003ca href=\"https://study-blog.info/omoshiro/brain-mechanism/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://study-blog.info/omoshiro/brain-mechanism/\u003c/a\u003e.\u003cbr\u003e\n(5) あなたが人の話を｢半分｣も聞けていない理由 ｢言った .... \u003ca href=\"https://toyokeizai.net/articles/-/62637\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://toyokeizai.net/articles/-/62637\u003c/a\u003e.\u003c/p\u003e\n\u003chr data-sourcepos=\"101:1-103:0\"\u003e\n\u003ch1 data-sourcepos=\"104:1-104:14\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\u003cp data-sourcepos=\"105:1-105:74\"\u003eLinuxコマンドのオプションを覚える方法をまとめます。\u003c/p\u003e\n\u003cul data-sourcepos=\"106:1-111:0\"\u003e\n\u003cli data-sourcepos=\"106:1-107:50\"\u003e語源を調べる。\n\u003cul data-sourcepos=\"107:5-107:50\"\u003e\n\u003cli data-sourcepos=\"107:5-107:50\"\u003eChatCPTまたはEdgeのチャットにきく\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli data-sourcepos=\"108:1-111:0\"\u003e説明する\n\u003cul data-sourcepos=\"109:5-111:0\"\u003e\n\u003cli data-sourcepos=\"109:5-109:51\"\u003e小学生の息子に話しかけるように\u003c/li\u003e\n\u003cli data-sourcepos=\"110:5-111:0\"\u003e僕は観葉植物に話しかけています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp data-sourcepos=\"112:1-112:69\"\u003e最後まで読んでいただきありがとうございました！\u003c/p\u003e\n",
      "body": "# はじめに\nLinuxの勉強をしていたのですが、Linuxのコマンドとそのオプションが覚えにくい。\nどんな時に何を使うのか？オプションの意味って何だったけ？例えば、次の`ls`コマンドの意味とそのオプションを覚えるのにも苦労しました。 \n```:覚えにくいコマンドとオプションの例\nls\nls -i\nls -a\nls -F\n```\n\nでも、最近、覚えるコツを身に着けることが出来たので、勉強がはかどっています。今日は\n\n# 解決策\n結論からいうと解決策は二つあります。\n1. 語源を調べる\n1. 小学生に説明する\n\nでは、1つずつご紹介いたします。\n\n## 解決策1 語源を調べる\nChatGPTで語源を調べます。それか、Edgeのチャットを僕はよく使います。Googleでもいいと思いますが、ChatGPTとEdgeのチャットの方がよりピンポイントで回答してくれるので好きです。\n\n```:聞き方\nlsコマンドの-aオプションの意味とその名前の由来を教えてください\n```\nこのように聞くと、次のような回答が返ってきます。↓↓\n**今回はEdgeチャット**\n***\nlsコマンドの-aオプションは、すべてのファイルやディレクトリを表示するオプションです。通常、ファイル名の先頭にピリオドがあるファイルやディレクトリは隠しファイルと呼ばれ、lsコマンドでは表示されません。しかし、-aオプションを使うと、隠しファイルも含めてカレントディレクトリ内の全てのファイルやディレクトリを一覧表示できます¹²³。\n\n-aオプションの名前の由来は、all（すべて）の頭文字から来ています。-aオプションは、Unixの最初期のバージョンから存在していたオプションで、lsコマンドの基本的な機能の一つです。-aオプションは、隠しファイルやディレクトリの存在を確認したり、設定ファイルなどを編集したりするときに便利です。\n\nソース: Bing との会話 2023/10/28\n(1) lsコマンドの使い方と覚えたい15のオプション【Linuxコマンド集】. https://eng-entrance.com/linux_command_ls.\n(2) 【Linux】lsコマンド #Linux - Qiita. https://qiita.com/chihiro/items/6e1404c41e1236a9efe1.\n(3) 【 ls 】コマンド（ドットファイル／ディレクトリ編）――表示 .... https://atmarkit.itmedia.co.jp/ait/articles/1607/04/news022.html.\n***\n\n\nまた、例付きで回答もしてくれます。今回は次のように聞きました。**今回はEdgeチャット**\n```:聞き方\nls -aコマンドを実行した時の例を教えてください\n```\nこのように聞いたときの回答がこちら↓↓\n***\nls -aコマンドを実行した時の例としては、以下のようなものがあります。\n\n- ユーザーのホームディレクトリでls -aコマンドを実行すると、隠しファイルやディレクトリも含めてカレントディレクトリ内の全てのファイルやディレクトリを一覧表示できます。例えば、以下のような出力が得られます。\n\n```bash\n$ ls -a\n.  ..  .bash_history  .bash_profile  .bashrc  Desktop  Documents  Downloads  Music  Pictures  Public\n```\n\nここで、ピリオドで始まるファイルやディレクトリが隠しファイルやディレクトリです。.と..は特殊なディレクトリで、.はカレントディレクトリ、..は親ディレクトリを表します 。\n\n- プロジェクトのディレクトリでls -aコマンドを実行すると、Gitでバージョン管理されているプロジェクトの場合は.gitという隠しディレクトリが表示されます。このディレクトリには、Gitのリポジトリの情報や履歴が保存されています 。例えば、以下のような出力が得られます。\n\n```bash\n$ ls -a\n.  ..  .git  README.md  src  test\n```\n\nここで、.gitはGitの隠しディレクトリです。README.md, src, testはプロジェクトのファイルやディレクトリです。\n***\n\n\n## 解決策2 説明する方法\n小学生の息子に紹介するぐらい丁寧に紹介してみます。そうすると自分が説明できないことに愕然とします。自分がどれだけ分かっていないのかそして分かってるつもりになっていたのかっていうのが露呈します。\nそして、調べて、一から思い出しながら説明する。\n↓まとめるとこんな感じ。↓\n* 説明する\n* できないことに愕然とする\n* 調べる\n* また、説明する。\n* うまく説明出来たら終わり。できなかったら「できないことに愕然とする」フェーズに戻る。\n\nうまくできたら終わり。\nここまでやったらもう忘れません。\n\nなんで、僕はよく机の上の観葉植物に向かって息子に語りかけるような口調で分かりやすく説明するように心がけています。\n\nちなみにEdgeのチャットにも聞いても見ました。2つ目の説明はよくわからなかったけど、まあ、そういうことらしいです。\n***\n説明すると、なんで覚えられるの？という質問には、脳科学の観点からいくつかの答えがあります。一つは、説明することで自分の理解度を確認し、間違いや不明点を発見することができるからです。説明するときには、自分の知識を言葉にしなければなりませんが、その過程で自分が何を知っていて、何を知らないのかがはっきりします。また、説明することで自分の知識を整理し、論理的に組み立てることができます。これにより、記憶の整合性や一貫性が高まります¹。\n\nもう一つは、説明することで感情や興味を関与させることができるからです。脳科学的には、感情や興味は記憶に大きな影響を与えます。感情や興味があると、脳内の神経伝達物質やホルモンの分泌が増えて、記憶の定着を促進します²。説明するときには、相手の反応や質問に応じて感情や興味が高まります。また、相手に教えることで自分も教えられる立場になります。これは、自己効力感や自尊感情を高めて、記憶への動機付けになります³。\n\n以上のように、説明することは記憶力を高める効果的な方法です。もし勉強したいことがあれば、誰かに教えてみるか、自分で説明するつもりで勉強してみるといいかもしれませんね。\n\n¹: ² (https://japan-brain-science.com/archives/1969)\n²: ⁴ (https://study-blog.info/omoshiro/brain-mechanism/)\n³: ³ (https://axivacademy.com/info/column/benkyouhou/177395)\n\nソース: Bing との会話 2023/10/28\n(1) 「説明上手」な人が守っている5つのポイントとは？ | NIKKEIリス .... https://reskill.nikkei.com/article/DGXMZO03412920Z00C16A6000000/.\n(2) 【記憶の脳科学】なぜヒトは覚え、忘れるのか～記憶の仕組み .... https://japan-brain-science.com/archives/1969.\n(3) 【勉強法】誰かに教えると自分も深く理解できるのはどうして .... https://axivacademy.com/info/column/benkyouhou/177395.\n(4) 「覚えられない」・・・勉強がうまくいかない原因は脳の .... https://study-blog.info/omoshiro/brain-mechanism/.\n(5) あなたが人の話を｢半分｣も聞けていない理由 ｢言った .... https://toyokeizai.net/articles/-/62637.\n***\n\n\n# おわりに\nLinuxコマンドのオプションを覚える方法をまとめます。\n* 語源を調べる。\n    * ChatCPTまたはEdgeのチャットにきく\n* 説明する\n    * 小学生の息子に話しかけるように\n    * 僕は観葉植物に話しかけています\n\n最後まで読んでいただきありがとうございました！\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T09:55:51+09:00",
      "group": null,
      "id": "1f9cb773e04e495633ea",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Linux",
              "versions": []
          },
          {
              "name": "勉強法",
              "versions": []
          },
          {
              "name": "オプション",
              "versions": []
          },
          {
              "name": "ChatGPT",
              "versions": []
          }
      ],
      "title": "最近Linuxの勉強をしていて、調子がいいのでコツを書く。覚えにくいLinuxコマンドとオプションの覚え方",
      "updated_at": "2023-10-28T09:55:51+09:00",
      "url": "https://qiita.com/taipy/items/1f9cb773e04e495633ea",
      "user": {
          "description": "勉強になったことや共有したいことを記事にしていきます。\r\n不束者ですがよろしくお願いします。",
          "facebook_id": "",
          "followees_count": 2,
          "followers_count": 1,
          "github_login_name": null,
          "id": "taipy",
          "items_count": 24,
          "linkedin_id": "",
          "location": "",
          "name": "",
          "organization": "",
          "permanent_id": 2613568,
          "profile_image_url": "https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2613568/profile-images/1698460306",
          "team_only": false,
          "twitter_screen_name": "taiPy5",
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  },
  {
      "rendered_body": "\u003ch1 data-sourcepos=\"1:1-1:14\"\u003e\n\u003cspan id=\"はじめに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eはじめに\u003c/h1\u003e\n\u003cp data-sourcepos=\"3:1-3:303\"\u003e制御系を設計する場合、補償器やフィルタは連続時間の伝達関数として表現するのが一般的です。一方、シミュレーションやデータ処理において、離散信号に対して逐次的に伝達関数を適用する必要が生じることがあります。\u003c/p\u003e\n\u003cp data-sourcepos=\"5:1-5:222\"\u003eそこで、この記事はPythonを使用して、連続時間の伝達関数を離散化して差分方程式（漸化式）に変換し、離散信号に対して適用するためのクラスを作成してみます。\u003c/p\u003e\n\u003cdiv data-sourcepos=\"7:1-13:3\" class=\"note info\"\u003e\n\u003cspan class=\"fa fa-fw fa-check-circle\"\u003e\u003c/span\u003e\u003cdiv\u003e\n\u003cp data-sourcepos=\"8:1-8:63\"\u003eこの記事では以下のライブラリを使用します。\u003c/p\u003e\n\u003cul data-sourcepos=\"9:1-12:31\"\u003e\n\u003cli data-sourcepos=\"9:1-9:7\"\u003eNumPy\u003c/li\u003e\n\u003cli data-sourcepos=\"10:1-10:7\"\u003eSciPy\u003c/li\u003e\n\u003cli data-sourcepos=\"11:1-11:27\"\u003eMatplotlib（評価用）\u003c/li\u003e\n\u003cli data-sourcepos=\"12:1-12:31\"\u003ePython-Control（評価用）\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003ch1 data-sourcepos=\"15:1-15:26\"\u003e\n\u003cspan id=\"伝達関数の離散化\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BC%9D%E9%81%94%E9%96%A2%E6%95%B0%E3%81%AE%E9%9B%A2%E6%95%A3%E5%8C%96\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e伝達関数の離散化\u003c/h1\u003e\n\u003cp data-sourcepos=\"17:1-19:97\"\u003e連続時間の伝達関数は、\u003ccode\u003escipy.signal.cont2discrete()\u003c/code\u003eで離散化することができます。\u003cbr\u003e\n例えば、連続時間の伝達関数をサンプル時間\u003ccode\u003eTs\u003c/code\u003eで離散化する場合は、以下のように記述します。\u003cbr\u003e\nここで\u003ccode\u003enum\u003c/code\u003eと\u003ccode\u003eden\u003c/code\u003eは、それぞれ伝達関数の分子係数と分母係数とします。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Python\" data-sourcepos=\"21:1-23:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003econt2discrete\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003ebilinear\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"26:1-26:218\"\u003e3番目の引数には離散化に使用するアルゴリズムを指定します。省略すると\u003ccode\u003ezoh\u003c/code\u003e（0次ホールド）となりますが、ここでは\u003ccode\u003ebilinear\u003c/code\u003e（相一次変換）を使ってみました。\u003c/p\u003e\n\u003cp data-sourcepos=\"28:1-28:189\"\u003e戻り値のうち、\u003ccode\u003enum_d\u003c/code\u003eと\u003ccode\u003eden_d\u003c/code\u003eはそれぞれ離散時間における伝達関数の分子係数と分母係数です（\u003ccode\u003eTs\u003c/code\u003eは引数と同じくサンプリング周期です）。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"30:1-30:29\"\u003e\n\u003cspan id=\"差分方程式への変換\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%B7%AE%E5%88%86%E6%96%B9%E7%A8%8B%E5%BC%8F%E3%81%B8%E3%81%AE%E5%A4%89%E6%8F%9B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e差分方程式への変換\u003c/h1\u003e\n\u003cp data-sourcepos=\"32:1-32:105\"\u003e今更ですが、離散時間における伝達関数の一般系を次式のように定義します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"33:1-35:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eG_d(z) = \\frac{Y(z)}{X(z)} = \\frac{b_{n} z^n + b_{n-1} z^{n-1} + \\cdots + b_{0}}{a_{n} z^n + a_{n-1} z^{n-1} + \\cdots a_{0}}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"36:1-36:59\"\u003eここで、\u003ccode\u003enum_d\u003c/code\u003eと\u003ccode\u003eden_d\u003c/code\u003eは以下に相当します。\u003c/p\u003e\n\u003ctable data-sourcepos=\"38:1-41:51\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"38:1-38:12\"\u003e\n\u003cth data-sourcepos=\"38:2-38:7\"\u003e変数\u003c/th\u003e\n\u003cth data-sourcepos=\"38:9-38:11\"\u003e値\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"40:1-40:51\"\u003e\n\u003ctd data-sourcepos=\"40:2-40:8\"\u003e\u003ccode\u003enum_d\u003c/code\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"40:10-40:50\"\u003e$\\big[b_{n}, b_{n-1}, \\cdots, b_{0}\\big]$\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"41:1-41:51\"\u003e\n\u003ctd data-sourcepos=\"41:2-41:8\"\u003e\u003ccode\u003eden_d\u003c/code\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"41:10-41:50\"\u003e$\\big[a_{n}, a_{n-1}, \\cdots, a_{0}\\big]$\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp data-sourcepos=\"43:1-43:79\"\u003e$G_d(z)$の分母と分子を$z^n$で割ると以下のようになります。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"44:1-46:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eG_d(z) = \\frac{Y(z)}{X(z)} = \\frac{b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n}}{a_{n} + a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"48:1-48:9\"\u003eこれを\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"49:1-55:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\n\u0026amp; \u0026amp; (a_{n} + a_{n-1} z^{-1} + \\cdots a_{0} z^{-n})Y(z) = (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) \\\\\n\u0026amp; \\Rightarrow \u0026amp; a_nY(z) = (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) - (a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}) Y(z) \\\\\n\u0026amp; \\Rightarrow \u0026amp; Y(z) = \\frac{1}{a_n} \\Big\\{ (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) - (a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}) Y(z) \\Big\\}\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"56:1-56:75\"\u003eと変形していけば、最後に差分方程式（漸化式）として\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"57:1-62:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\\begin{align}\ny[k] = \\frac{1}{a_n} \u0026amp; \\big( b_n x[k] + b_{n-1} x[k-1]+\\cdots b_0 x[k-n] \\\\\n\u0026amp; - a_{n-1} y[k-1] - a_{n-1} y[k-2] - \\cdots - a_0 y[k-n] \\big)\n\\end{align}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"63:1-63:21\"\u003eが得られます。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"65:1-65:20\"\u003e\n\u003cspan id=\"クラスの実装\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%AE%9F%E8%A3%85\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eクラスの実装\u003c/h1\u003e\n\u003cp data-sourcepos=\"67:1-67:165\"\u003eここまで説明した伝達関数の離散化、および差分方程式による計算を、Pythonで一つのクラスとして実装した例を示します。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Python\" data-sourcepos=\"69:1-91:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003escipy.signal\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003econt2discrete\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDiscreteTransferFunction\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e__init__\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003econt2discrete\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003ebilinear\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esqueeze\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esqueeze\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einsert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)))\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ezeros\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ezeros\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \n    \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecalc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einsert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey_d\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003einsert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ex_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003edot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey_d\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ey_d\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"93:1-93:372\"\u003eコンストラクタでは、与えられた連続時間の伝達関数を離散化し、その次数に合わせて入出力信号（状態変数）である\u003ccode\u003ex_d\u003c/code\u003eと\u003ccode\u003ey_d\u003c/code\u003eの初期化を行います。分子多項式の要素数（次数）が分母多項式よりも小さいと不都合が生じるため、必要に応じて\u003ccode\u003enum_d\u003c/code\u003eの先頭を0埋めしています。\u003c/p\u003e\n\u003cp data-sourcepos=\"95:1-95:315\"\u003e\u003ccode\u003ecalc()\u003c/code\u003e関数では毎時刻の差分方程式を計算します。ここでは、入出力信号を\u003ccode\u003ex_d\u003c/code\u003e、\u003ccode\u003ey_d\u003c/code\u003eとしてそれぞれ以下のように定義し、\u003ccode\u003enum_d\u003c/code\u003eや\u003ccode\u003eden_d\u003c/code\u003eとの内積を計算する処理として、次数などが変わった場合もコードの修正を不要としています\u003csup\u003e\u003ca href=\"#fn-1\" id=\"fnref-1\"\u003e1\u003c/a\u003e\u003c/sup\u003e。\u003c/p\u003e\n\u003ctable data-sourcepos=\"98:1-101:47\"\u003e\n\u003cthead\u003e\n\u003ctr data-sourcepos=\"98:1-98:12\"\u003e\n\u003cth data-sourcepos=\"98:2-98:7\"\u003e変数\u003c/th\u003e\n\u003cth data-sourcepos=\"98:9-98:11\"\u003e値\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr data-sourcepos=\"100:1-100:50\"\u003e\n\u003ctd data-sourcepos=\"100:2-100:6\"\u003e\u003ccode\u003ex_d\u003c/code\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"100:8-100:49\"\u003e$\\Big[ x[k], x[k-1], \\cdots, x[k-n] \\Big]$\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr data-sourcepos=\"101:1-101:47\"\u003e\n\u003ctd data-sourcepos=\"101:2-101:6\"\u003e\u003ccode\u003ey_d\u003c/code\u003e\u003c/td\u003e\n\u003ctd data-sourcepos=\"101:8-101:46\"\u003e$\\Big[ 0, y[k-1], \\cdots, y[k-n] \\Big]$\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch1 data-sourcepos=\"103:1-103:11\"\u003e\n\u003cspan id=\"実行例\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E5%AE%9F%E8%A1%8C%E4%BE%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e実行例\u003c/h1\u003e\n\u003cp data-sourcepos=\"105:1-105:196\"\u003eここでは連続時間の伝達関数として、以下に示す2次のローパスフィルタを考えます。これを離散化して、1Hzの正弦波信号に適用してみましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"math\" data-sourcepos=\"106:1-108:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eG(s) = \\frac{\\omega_c^2}{s^2 + 2\\zeta\\omega_cs + \\omega_c^2} \\quad (\\omega_c =2\\pi, \\zeta = 1/\\sqrt{2})\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Python\" data-sourcepos=\"110:1-141:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ematplotlib.pyplot\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\n\n\u003cspan class=\"bp\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 伝達関数の定義と離散化\n\u003c/span\u003e\u003cspan class=\"n\"\u003ewc\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e\n\u003cspan class=\"n\"\u003ezeta\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esqrt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003ewc\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003cspan class=\"n\"\u003eden\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earray\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ezeta\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ewc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ewc\u003c/span\u003e\u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eTs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mf\"\u003e0.01\u003c/span\u003e\n\u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nc\"\u003eDiscreteTransferFunction\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# 変数の初期化\n\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003earange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003esin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epi\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ezeros_like\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# シミュレーション\n\u003c/span\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ek\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003ecalc\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ek\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# プロット\n\u003c/span\u003e\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efigure\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eInput\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eOutput\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egrid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elegend\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eshow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"143:1-144:121\"\u003eこれを実行すると以下のグラフがプロットされます。今回のローパスフィルタでは、1Hzのゲインが-3dB（≒0.7倍）なので問題なさそうです。\u003cbr\u003e\n\u003ca href=\"https://camo.qiitausercontent.com/338d9be266e8eeb8430eea85a4d6257f37ab994d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3238333532382f63343561623663652d636534622d306536622d313261382d6566393164633365376362372e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2Fc45ab6ce-ce4b-0e6b-12a8-ef91dc3e7cb7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9b1e0b48eecb844621017342fe49c4d8\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/c45ab6ce-ce4b-0e6b-12a8-ef91dc3e7cb7.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2Fc45ab6ce-ce4b-0e6b-12a8-ef91dc3e7cb7.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=1f432e64f2db2455e72de89d5ee0e84a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"146:1-146:96\"\u003e念のため、連続時間でのシミュレーション結果と比較してみましょう。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Python\" data-sourcepos=\"147:1-162:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003econtrol\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003etf\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003econtrol.matlab\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003elsim\u003c/span\u003e\n\n\u003cspan class=\"bp\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eG\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003etf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eden\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eyc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003exc\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elsim\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eG\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eU\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efigure\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eyc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eContinuous\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eplot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003et\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003elabel\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eDiscrete\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003egrid\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003elegend\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eshow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"163:1-163:121\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/d74ac6c3650b37079fff4df6e4eec0288f5ba5ad/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3238333532382f63313662303863342d663438662d356239382d363536352d6136316262313363393532392e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2Fc16b08c4-f48f-5b98-6565-a61bb13c9529.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=e0db075a4272360e66b80b35661d1ad3\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/c16b08c4-f48f-5b98-6565-a61bb13c9529.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2Fc16b08c4-f48f-5b98-6565-a61bb13c9529.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=260c3b4da0afdac976c06e80478e9822 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp data-sourcepos=\"165:1-165:36\"\u003e完全に一致していますね。\u003c/p\u003e\n\u003ch1 data-sourcepos=\"167:1-167:34\"\u003e\n\u003cspan id=\"おまけexcelでの計算\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%81%BE%E3%81%91excel%E3%81%A7%E3%81%AE%E8%A8%88%E7%AE%97\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e（おまけ）Excelでの計算\u003c/h1\u003e\n\u003cp data-sourcepos=\"169:1-169:172\"\u003e上で計算した差分方程式はExcelでも利用することができます。例えば、以下のコードを実行すればExcel用の数式が生成されます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"Python\" data-sourcepos=\"171:1-195:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003e\u003cspan class=\"n\"\u003ecol_in\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eB\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\n\u003cspan class=\"n\"\u003ecol_out\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003eC\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\n\u003cspan class=\"n\"\u003eheaderlines\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eN\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ek\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eformula\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e''\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eheaderlines\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ek\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eheaderlines\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eformula\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e%+f*%s%d\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enum_d\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003ecol_in\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nf\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eheaderlines\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eformula\u003c/span\u003e \u003cspan class=\"o\"\u003e+=\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e%+f*%s%d\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003eG_lpf\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eden_d\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003ecol_out\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eformula\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"sh\"\u003e''\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eforlula\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e0\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\n    \n    \u003cspan class=\"nf\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e%s%d =%s\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecol_out\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eformula\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n\u003cspan class=\"nf\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e\u003cspan class=\"s\"\u003e%s%d以降: %s%dの数式をオートフィル\u003c/span\u003e\u003cspan class=\"sh\"\u003e'\u003c/span\u003e \u003cspan class=\"o\"\u003e%\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecol_out\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecol_out\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ebaserow\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"196:1-196:249\"\u003eここでは、（時刻がA列と仮定して）入力信号（\u003ccode\u003ecol_in\u003c/code\u003e）をB列、出力信号（\u003ccode\u003ecol_out\u003c/code\u003e）をC列に割り当て、1行目はヘッダ（\u003ccode\u003eheader_lines\u003c/code\u003e）として2行目からデータを格納する設定としています。\u003c/p\u003e\n\u003cp data-sourcepos=\"198:1-198:142\"\u003e先ほどと同じ2次のローパスフィルタの場合、このコードを実行すると以下のように数式が生成されます。\u003c/p\u003e\n\u003cdiv class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"199:1-204:3\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003ccode\u003eC2 =+0.000944*B2\nC3 =+0.000944*B3+0.001889*B2+1.912043*C2\nC4 =+0.000944*B4+0.001889*B3+0.000944*B2+1.912043*C3-0.915821*C2\nC5以降: C4の数式をオートフィル\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\u003cp data-sourcepos=\"206:1-207:155\"\u003e実際にExcelで使ってみると、Pythonと同様の結果が得られていることが分かります。\u003cbr\u003e\nOfficeしか使えない環境向けに、あらかじめデータ処理用のExcelファイルとして準備しておくと便利かもしれません。\u003c/p\u003e\n\u003cp data-sourcepos=\"209:1-209:121\"\u003e\u003ca href=\"https://camo.qiitausercontent.com/d46aef2bfe737307f03d21a13652b91b7d3de441/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3238333532382f37613133316438342d303865312d653266662d633263362d3865346233303339353763302e706e67\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2F7a131d84-08e1-e2ff-c2c6-8e4b303957c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=73e23fdbfd49e87939018a6e2006db89\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/7a131d84-08e1-e2ff-c2c6-8e4b303957c0.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F283528%2F7a131d84-08e1-e2ff-c2c6-8e4b303957c0.png?ixlib=rb-4.0.0\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ab706cff63c51aae65ac689c6166e201 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch1 data-sourcepos=\"212:1-212:14\"\u003e\n\u003cspan id=\"おわりに\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eおわりに\u003c/h1\u003e\n\u003cp data-sourcepos=\"214:1-214:348\"\u003e本記事では、Pythonで連続時間の伝達関数を離散化し、シミュレーション等で使用するための方法を紹介しました。少しニッチな内容かもしれませんが、組み込みソフトウェアの実装などにも応用できるため用途は幅広いかと思います。参考になれば幸いです。\u003c/p\u003e\n\u003csection class=\"footnotes\"\u003e\n\u003col\u003e\n\u003cli id=\"fn-1\"\u003e\n\u003cp data-sourcepos=\"96:6-96:99\"\u003eここでは\u003ccode\u003eden_d\u003c/code\u003eをそのまま使用するため、\u003ccode\u003ey_d\u003c/code\u003eの先頭を0としています。 \u003ca href=\"#fnref-1\" class=\"\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e\n",
      "body": "# はじめに\n\n制御系を設計する場合、補償器やフィルタは連続時間の伝達関数として表現するのが一般的です。一方、シミュレーションやデータ処理において、離散信号に対して逐次的に伝達関数を適用する必要が生じることがあります。\n\nそこで、この記事はPythonを使用して、連続時間の伝達関数を離散化して差分方程式（漸化式）に変換し、離散信号に対して適用するためのクラスを作成してみます。\n\n:::note\nこの記事では以下のライブラリを使用します。\n* NumPy\n* SciPy\n* Matplotlib（評価用）\n* Python-Control（評価用）\n:::\n\n# 伝達関数の離散化\n\n連続時間の伝達関数は、`scipy.signal.cont2discrete()`で離散化することができます。\n例えば、連続時間の伝達関数をサンプル時間`Ts`で離散化する場合は、以下のように記述します。\nここで`num`と`den`は、それぞれ伝達関数の分子係数と分母係数とします。\n\n```Python\n(num_d, den_d, Ts)  = cont2discrete((num, den), Ts, 'bilinear')\n```\n\n\n3番目の引数には離散化に使用するアルゴリズムを指定します。省略すると`zoh`（0次ホールド）となりますが、ここでは`bilinear`（相一次変換）を使ってみました。\n\n戻り値のうち、`num_d`と`den_d`はそれぞれ離散時間における伝達関数の分子係数と分母係数です（`Ts`は引数と同じくサンプリング周期です）。\n\n# 差分方程式への変換\n\n今更ですが、離散時間における伝達関数の一般系を次式のように定義します。\n```math\nG_d(z) = \\frac{Y(z)}{X(z)} = \\frac{b_{n} z^n + b_{n-1} z^{n-1} + \\cdots + b_{0}}{a_{n} z^n + a_{n-1} z^{n-1} + \\cdots a_{0}}\n```\nここで、`num_d`と`den_d`は以下に相当します。\n\n|変数|値|\n|----|----|\n|`num_d`|$\\big[b_{n}, b_{n-1}, \\cdots, b_{0}\\big]$|\n|`den_d`|$\\big[a_{n}, a_{n-1}, \\cdots, a_{0}\\big]$|\n\n$G_d(z)$の分母と分子を$z^n$で割ると以下のようになります。\n```math\nG_d(z) = \\frac{Y(z)}{X(z)} = \\frac{b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n}}{a_{n} + a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}}\n```\n\nこれを\n```math\n\\begin{align}\n\u0026 \u0026 (a_{n} + a_{n-1} z^{-1} + \\cdots a_{0} z^{-n})Y(z) = (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) \\\\\n\u0026 \\Rightarrow \u0026 a_nY(z) = (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) - (a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}) Y(z) \\\\\n\u0026 \\Rightarrow \u0026 Y(z) = \\frac{1}{a_n} \\Big\\{ (b_{n} + b_{n-1} z^{-1} + \\cdots + b_{0} z^{-n})X(z) - (a_{n-1} z^{-1} + \\cdots a_{0} z^{-n}) Y(z) \\Big\\}\n\\end{align}\n```\nと変形していけば、最後に差分方程式（漸化式）として\n```math\n\\begin{align}\ny[k] = \\frac{1}{a_n} \u0026 \\big( b_n x[k] + b_{n-1} x[k-1]+\\cdots b_0 x[k-n] \\\\\n\u0026 - a_{n-1} y[k-1] - a_{n-1} y[k-2] - \\cdots - a_0 y[k-n] \\big)\n\\end{align}\n```\nが得られます。\n\n# クラスの実装\n\nここまで説明した伝達関数の離散化、および差分方程式による計算を、Pythonで一つのクラスとして実装した例を示します。\n\n```Python\nimport numpy as np\nfrom scipy.signal import cont2discrete\n\nclass DiscreteTransferFunction:\n    def __init__(self, num, den, Ts):\n        (self.num_d, self.den_d, Ts) = cont2discrete((num, den), Ts, 'bilinear')\n        self.num_d = np.squeeze(self.num_d)\n        self.den_d = np.squeeze(self.den_d)\n        self.num_d = np.insert(self.num_d, 0, [0] * (len(self.den_d) - len(self.num_d)))\n\n        self.x_d = np.zeros((len(self.num_d), 1))\n        self.y_d = np.zeros((len(self.den_d), 1))\n    \n    def calc(self, x):\n        self.x_d = np.insert(self.x_d, 0, x)[0:-1]\n        self.y_d = np.insert(self.y_d, 0, 0)[0:-1]\n\n        y = (np.dot(self.x_d, self.num_d) - np.dot(self.y_d, self.den_d)) / self.den_d[0]\n        self.y_d[0] = y\n\n        return y\n```\n\nコンストラクタでは、与えられた連続時間の伝達関数を離散化し、その次数に合わせて入出力信号（状態変数）である`x_d`と`y_d`の初期化を行います。分子多項式の要素数（次数）が分母多項式よりも小さいと不都合が生じるため、必要に応じて`num_d`の先頭を0埋めしています。\n\n`calc()`関数では毎時刻の差分方程式を計算します。ここでは、入出力信号を`x_d`、`y_d`としてそれぞれ以下のように定義し、`num_d`や`den_d`との内積を計算する処理として、次数などが変わった場合もコードの修正を不要としています[^1]。\n[^1]:ここでは`den_d`をそのまま使用するため、`y_d`の先頭を0としています。\n\n|変数|値|\n|----|----|\n|`x_d`|$\\Big[ x[k], x[k-1], \\cdots, x[k-n] \\Big]$|\n|`y_d`|$\\Big[ 0, y[k-1], \\cdots, y[k-n] \\Big]$|\n\n# 実行例\n\nここでは連続時間の伝達関数として、以下に示す2次のローパスフィルタを考えます。これを離散化して、1Hzの正弦波信号に適用してみましょう。\n```math\nG(s) = \\frac{\\omega_c^2}{s^2 + 2\\zeta\\omega_cs + \\omega_c^2} \\quad (\\omega_c =2\\pi, \\zeta = 1/\\sqrt{2})\n```\n\n```Python\nimport matplotlib.pyplot as plt\n\n...\n\n# 伝達関数の定義と離散化\nwc = 1 * 2 * np.pi\nzeta = 1 / np.sqrt(2)\n\nnum = np.array([wc**2])\nden = np.array([1, 2 * zeta * wc, wc**2])\n\nTs = 0.01\nG_lpf = DiscreteTransferFunction(num, den, Ts)\n\n# 変数の初期化\nt = np.arange(0, 5, Ts)\nx = np.sin(2 * np.pi * 10 * t)\ny = np.zeros_like(x)\n\n# シミュレーション\nfor k in range(len(x)):\n    y[k] = G_lpf.calc(x[k])\n\n# プロット\nplt.figure()\nplt.plot(t, x, label='Input')\nplt.plot(t, y, label='Output')\nplt.grid(True)\nplt.legend()\nplt.show()\n```\n\nこれを実行すると以下のグラフがプロットされます。今回のローパスフィルタでは、1Hzのゲインが-3dB（≒0.7倍）なので問題なさそうです。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/c45ab6ce-ce4b-0e6b-12a8-ef91dc3e7cb7.png)\n\n念のため、連続時間でのシミュレーション結果と比較してみましょう。\n```Python\nfrom control import tf\nfrom control.matlab import lsim\n\n...\n\nG = tf(num, den)\n(yc, tc, xc) = lsim(G, U=x, T=t)\n\nplt.figure()\nplt.plot(tc, yc, label='Continuous')\nplt.plot(t, y, label='Discrete')\nplt.grid(True)\nplt.legend()\nplt.show()\n```\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/c16b08c4-f48f-5b98-6565-a61bb13c9529.png)\n\n完全に一致していますね。\n\n# （おまけ）Excelでの計算\n\n上で計算した差分方程式はExcelでも利用することができます。例えば、以下のコードを実行すればExcel用の数式が生成されます。\n\n```Python\ncol_in = 'B'\ncol_out = 'C'\nheaderlines = 1\n\nN = len(G_lpf.den_d)\nfor k in range(N):\n    formula = ''\n    baserow = headerlines + k + 1\n\n    for i in range(N):\n        if G_lpf.num_d[i] != 0 and (baserow - i) \u003e headerlines:\n            formula += '%+f*%s%d' % (G_lpf.num_d[i], col_in, baserow - i)\n    \n    for i in range(1, N):\n        if baserow - i \u003e headerlines:\n            formula += '%+f*%s%d' % (-G_lpf.den_d[i], col_out, baserow - i)\n    \n    if formula == '':\n        forlula = '0'\n    \n    print('%s%d =%s' % (col_out,baserow, formula))\n\nprint('%s%d以降: %s%dの数式をオートフィル' % (col_out, baserow + 1, col_out, baserow))\n```\nここでは、（時刻がA列と仮定して）入力信号（`col_in`）をB列、出力信号（`col_out`）をC列に割り当て、1行目はヘッダ（`header_lines`）として2行目からデータを格納する設定としています。\n\n先ほどと同じ2次のローパスフィルタの場合、このコードを実行すると以下のように数式が生成されます。\n```\nC2 =+0.000944*B2\nC3 =+0.000944*B3+0.001889*B2+1.912043*C2\nC4 =+0.000944*B4+0.001889*B3+0.000944*B2+1.912043*C3-0.915821*C2\nC5以降: C4の数式をオートフィル\n```\n\n実際にExcelで使ってみると、Pythonと同様の結果が得られていることが分かります。\nOfficeしか使えない環境向けに、あらかじめデータ処理用のExcelファイルとして準備しておくと便利かもしれません。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/283528/7a131d84-08e1-e2ff-c2c6-8e4b303957c0.png)\n\n\n# おわりに\n\n本記事では、Pythonで連続時間の伝達関数を離散化し、シミュレーション等で使用するための方法を紹介しました。少しニッチな内容かもしれませんが、組み込みソフトウェアの実装などにも応用できるため用途は幅広いかと思います。参考になれば幸いです。\n",
      "coediting": false,
      "comments_count": 0,
      "created_at": "2023-10-28T09:36:41+09:00",
      "group": null,
      "id": "9e6f2c733b6d983363ec",
      "likes_count": 0,
      "private": false,
      "reactions_count": 0,
      "stocks_count": 0,
      "tags": [
          {
              "name": "Python",
              "versions": []
          },
          {
              "name": "Excel",
              "versions": []
          },
          {
              "name": "信号処理",
              "versions": []
          },
          {
              "name": "制御工学",
              "versions": []
          },
          {
              "name": "伝達関数",
              "versions": []
          }
      ],
      "title": "Pythonによる伝達関数の実装",
      "updated_at": "2023-10-28T09:36:41+09:00",
      "url": "https://qiita.com/acela86/items/9e6f2c733b6d983363ec",
      "user": {
          "description": "本職は制御系エンジニア。システム設計から組み込みまで。\r\n期間限定で研究者やってました。\r\n",
          "facebook_id": "",
          "followees_count": 18,
          "followers_count": 18,
          "github_login_name": "acela86",
          "id": "acela86",
          "items_count": 4,
          "linkedin_id": "",
          "location": "Yokohama",
          "name": "",
          "organization": "",
          "permanent_id": 283528,
          "profile_image_url": "https://s3-ap-northeast-1.amazonaws.com/qiita-image-store/0/283528/12673a699b757c42d72255be595719d52a4368f1/x_large.png?1698460568",
          "team_only": false,
          "twitter_screen_name": null,
          "website_url": ""
      },
      "page_views_count": null,
      "team_membership": null,
      "organization_url_name": null,
      "slide": false
  }
]